<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="HCC Infrastructure Velocity Report - Track U.S. infrastructure project execution in real-time. Monitor $1.35T in capital across 49 active projects.">
    <meta name="theme-color" content="#1e1b4b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HCC Velocity">
    <meta name="keywords" content="infrastructure, velocity, CHIPS Act, semiconductor, data center, investment, project tracking">
    <meta property="og:title" content="HCC Infrastructure Velocity Report">
    <meta property="og:description" content="Real-time tracking of U.S. infrastructure megaprojects. $1.35T monitored.">
    <meta property="og:type" content="website">
    <title>HCC Infrastructure Velocity Report | Executive Intelligence Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --deep-indigo: #1e1b4b;
            --electric-yellow: #FDFF66;
            --white: #ffffff;
            --off-white: #f8fafc;
            --green: #22c55e;
            --green-bg: rgba(34,197,94,0.1);
            --lime: #84cc16;
            --yellow: #eab308;
            --yellow-bg: rgba(234,179,8,0.1);
            --orange: #f97316;
            --red: #ef4444;
            --red-bg: rgba(239,68,68,0.1);
            --blue: #3b82f6;
            --blue-bg: rgba(59,130,246,0.1);
            --border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--off-white); color: var(--text-primary); line-height: 1.6; }
        
        /* Header */
        .header { background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.2)), var(--deep-indigo); color: var(--white); padding: 0; position: sticky; top: 0; z-index: 100; }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 0 1.5rem; max-width: 1600px; margin: 0 auto; }
        .brand { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--white); }
        .brand-logo { height: 28px; width: auto; }
        .brand-mark { width: 6px; height: 36px; background: var(--electric-yellow); }
        .brand-text { font-size: 0.85rem; font-weight: 700; letter-spacing: 0.1em; }
        .brand-subtitle { font-size: 0.65rem; font-weight: 400; opacity: 0.7; letter-spacing: 0.05em; margin-top: 2px; }
        
        .header-actions { display: flex; align-items: center; gap: 1rem; }
        .search-box { display: flex; align-items: center; background: rgba(255,255,255,0.1); border-radius: 8px; padding: 0.5rem 1rem; gap: 0.5rem; }
        .search-box input { background: none; border: none; color: var(--white); font-size: 0.85rem; width: 200px; outline: none; }
        .search-box input::placeholder { color: rgba(255,255,255,0.5); }
        .search-box svg { color: rgba(255,255,255,0.5); flex-shrink: 0; }
        
        .alert-btn { position: relative; background: rgba(255,255,255,0.1); border: none; color: var(--white); width: 40px; height: 40px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .alert-btn svg { stroke: var(--white); }
        .alert-btn:hover { background: rgba(255,255,255,0.2); }
        .alert-badge { position: absolute; top: -4px; right: -4px; background: var(--red); color: white; font-size: 0.65rem; font-weight: 700; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        
        /* Data Freshness Indicator */
        .data-freshness { display: flex; align-items: center; gap: 0.5rem; background: rgba(34,197,94,0.15); padding: 0.4rem 0.75rem; border-radius: 6px; }
        .freshness-dot { width: 8px; height: 8px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(34,197,94,0.4); } 50% { opacity: 0.8; box-shadow: 0 0 0 4px rgba(34,197,94,0); } }
        .freshness-text { font-size: 0.7rem; color: var(--green); font-weight: 600; text-transform: uppercase; letter-spacing: 0.03em; }
        .freshness-divider { color: rgba(255,255,255,0.3); }
        .freshness-timestamp { font-size: 0.65rem; color: rgba(255,255,255,0.8); font-family: 'Inter', sans-serif; }
        
        /* Scroll Reveal Animations */
        .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        @keyframes countUp { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        .kpi-animated { animation: countUp 0.5s ease forwards; }
        
        /* Data Quality Badge */
        .data-quality-badge { display: flex; align-items: center; gap: 0.35rem; background: rgba(59,130,246,0.2); padding: 0.4rem 0.65rem; border-radius: 6px; cursor: help; }
        .data-quality-badge svg { stroke: #60a5fa; width: 14px; height: 14px; }
        .data-quality-badge span { font-size: 0.65rem; color: #93c5fd; font-weight: 600; }
        
        /* Section Credibility Footer */
        .section-credibility { display: flex; justify-content: space-between; align-items: center; padding-top: 0.5rem; margin-top: 0.5rem; border-top: 1px solid var(--border); font-size: 0.65rem; color: var(--text-muted); }
        .credibility-sources { display: flex; align-items: center; gap: 0.35rem; }
        .credibility-sources svg { width: 12px; height: 12px; stroke: var(--text-muted); }
        .credibility-methodology { display: flex; align-items: center; gap: 0.35rem; }
        .credibility-methodology a { color: var(--blue); text-decoration: none; }
        .credibility-methodology a:hover { text-decoration: underline; }
        .credibility-confidence { display: flex; align-items: center; gap: 0.35rem; }
        .confidence-indicator { display: flex; gap: 2px; }
        .confidence-bar { width: 3px; height: 10px; background: #e2e8f0; border-radius: 1px; }
        .confidence-bar.filled { background: var(--green); }
        .confidence-bar.filled.medium { background: var(--yellow); }
        
        /* User Menu */
        .user-menu { display: flex; align-items: center; gap: 0.5rem; background: rgba(255,255,255,0.1); padding: 0.4rem 0.75rem; border-radius: 8px; cursor: pointer; }
        .user-menu:hover { background: rgba(255,255,255,0.2); }
        .user-avatar { width: 28px; height: 28px; background: var(--electric-yellow); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--deep-indigo); font-weight: 700; font-size: 0.75rem; }
        .user-menu span { font-size: 0.8rem; }
        
        /* Main Navigation */
        .main-nav { border-top: 1px solid rgba(255,255,255,0.1); }
        .nav-container { max-width: 1600px; margin: 0 auto; padding: 0 2rem; display: flex; gap: 0; }
        .nav-tab { padding: 1rem 1.5rem; color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem; font-weight: 500; border-bottom: 3px solid transparent; transition: all 0.2s; cursor: pointer; display: flex; align-items: center; }
        .nav-tab:hover { color: var(--white); background: rgba(255,255,255,0.05); }
        .nav-tab.active { color: var(--electric-yellow); border-bottom-color: var(--electric-yellow); }
        .nav-tab-dropdown { position: relative; }
        .nav-dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background: var(--deep-indigo); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; min-width: 200px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 1000; padding: 0.5rem 0; }
        .nav-tab-dropdown:hover .nav-dropdown-menu { display: block; }
        .nav-dropdown-item { display: block; padding: 0.75rem 1.25rem; color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.85rem; transition: all 0.2s; }
        .nav-dropdown-item:hover { background: rgba(255,255,255,0.1); color: var(--white); }
        .nav-dropdown-item.disabled { color: rgba(255,255,255,0.4); pointer-events: none; }
        .nav-dropdown-item .coming-soon { font-size: 0.65rem; background: rgba(255,255,255,0.1); padding: 0.15rem 0.4rem; border-radius: 4px; margin-left: 0.5rem; }
        
        /* Executive Summary */
        .executive-summary { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 0.75rem; }
        .executive-summary-header { margin-bottom: 1.5rem; padding-bottom: 1.25rem; border-bottom: 2px solid var(--electric-yellow); }
        .executive-headline { }
        .headline-label { display: block; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 0.5rem; }
        .headline-text { font-size: 1.75rem; font-weight: 700; color: var(--deep-indigo); line-height: 1.3; margin: 0; }
        .executive-kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
        .executive-kpi { text-align: center; padding: 1.5rem 1rem; background: linear-gradient(135deg, var(--deep-indigo) 0%, #312e81 100%); border-radius: 12px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .executive-kpi:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(30, 27, 75, 0.3); }
        .executive-kpi-value { font-size: 1.875rem; font-weight: 800; font-family: 'Inter', sans-serif; color: var(--white); line-height: 1.1; margin-bottom: 0.35rem; }
        .executive-kpi-label { font-size: 0.65rem; color: rgba(255,255,255,0.75); text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }
        .executive-thesis { }
        .executive-thesis-text { font-size: 0.95rem; line-height: 1.8; color: var(--text-secondary); }
        @media (max-width: 900px) { .executive-kpi-row { grid-template-columns: repeat(2, 1fr); } .headline-text { font-size: 1.5rem; } }
        
        /* Page Container */
        .page-container { max-width: 1600px; margin: 0 auto; padding: 2rem; }
        .page { display: none; }
        .page.active { display: block; }
        
        /* Home Page - Critical Developments */
        .critical-section { background: #1A1B2E; border: 2px solid #1A1B2E; border-radius: 16px; padding: 1.5rem; margin-bottom: 0.75rem; }
        .critical-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
        .critical-icon { font-size: 1.25rem; }
        .critical-icon-box { width: 28px; height: 28px; background: #dc2626; color: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1rem; }
        .critical-title { font-size: 0.85rem; font-weight: 700; color: #ffffff; text-transform: uppercase; letter-spacing: 0.05em; }
        .critical-date { margin-left: auto; font-size: 0.75rem; color: #ffffff; }
        
        .alert-card { background: var(--white); border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; border-left: 4px solid var(--red); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .alert-card:last-child { margin-bottom: 0; }
        .alert-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem; }
        .alert-card-title { font-size: 1.1rem; font-weight: 700; color: var(--text-primary); }
        .alert-card-chips { background: var(--deep-indigo); color: var(--white); padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .alert-card-body { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.75rem; }
        .alert-card-impact { background: var(--red-bg); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 0.75rem; }
        .alert-card-impact-label { font-size: 0.7rem; font-weight: 700; color: var(--red); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem; }
        .alert-card-impact-text { font-size: 0.85rem; color: var(--text-primary); font-weight: 500; }
        .alert-card-footer { display: flex; justify-content: space-between; align-items: center; }
        .alert-card-action { background: var(--blue-bg); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.8rem; color: var(--blue); }
        .alert-card-action strong { font-weight: 600; }
        .alert-card-link { color: var(--blue); text-decoration: none; font-size: 0.85rem; font-weight: 500; display: flex; align-items: center; gap: 0.25rem; }
        .alert-card-link:hover { text-decoration: underline; }
        
        /* Summary Cards with Visualizations */
        .summary-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem; }
        .summary-card { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; overflow: hidden; }
        .summary-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(30, 27, 75, 0.12); }
        .summary-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; }
        .summary-card-title { font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }
        .summary-card-link { font-size: 0.75rem; color: var(--blue); text-decoration: none; font-weight: 500; }
        .summary-card-link:hover { text-decoration: underline; }
        
        /* Portfolio Health Visualization */
        .portfolio-viz { display: flex; gap: 1.5rem; align-items: center; margin-bottom: 1.25rem; }
        .portfolio-viz-chart { width: 140px; height: 140px; position: relative; filter: drop-shadow(0 4px 12px rgba(30, 27, 75, 0.1)); }
        .portfolio-viz-legend { flex: 1; }
        .portfolio-viz-total { text-align: center; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--border); }
        .portfolio-viz-total-value { font-size: 1.75rem; font-weight: 800; color: var(--deep-indigo); font-family: 'Inter', sans-serif; display: block; }
        .portfolio-viz-total-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }
        .portfolio-viz-items { }
        .portfolio-viz-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0; transition: background 0.2s ease; border-radius: 6px; padding-left: 0.25rem; padding-right: 0.5rem; }
        .portfolio-viz-item:hover { background: var(--off-white); }
        .portfolio-viz-dot { width: 10px; height: 10px; border-radius: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.15); }
        .portfolio-viz-dot.on-track { background: var(--green); }
        .portfolio-viz-dot.at-risk { background: var(--yellow); }
        .portfolio-viz-dot.distressed { background: var(--red); }
        .portfolio-viz-dot.terminated { background: #1f2937; }
        .portfolio-viz-label { flex: 1; font-size: 0.8rem; color: var(--text-secondary); }
        .portfolio-viz-value { font-size: 0.85rem; font-weight: 700; color: var(--text-primary); width: 28px; text-align: right; }
        .portfolio-viz-pct { font-size: 0.75rem; color: var(--text-muted); width: 36px; text-align: right; }
        
        .portfolio-velocity-bar { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; }
        .portfolio-velocity-label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .portfolio-velocity-label span { font-size: 0.75rem; color: rgba(255,255,255,0.7); font-weight: 600; }
        .velocity-trend-info { display: flex; align-items: center; gap: 0.5rem; }
        .portfolio-velocity-score { font-size: 1.25rem; font-weight: 800; color: #FDFF66; font-family: 'Inter', sans-serif; }
        .velocity-change { font-size: 0.7rem; font-weight: 600; padding: 0.2rem 0.5rem; border-radius: 6px; }
        .velocity-change.positive { background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.25)); color: var(--green); }
        .velocity-change.negative { background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.25)); color: var(--red); }
        .portfolio-velocity-track { height: 14px; background: linear-gradient(to right, #ef4444 0%, #ef4444 45%, #eab308 45%, #eab308 75%, #22c55e 75%, #22c55e 100%); border-radius: 7px; position: relative; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1), 0 1px 2px rgba(255,255,255,0.8); }
        
        /* Historical Context */
        .historical-context { display: flex; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; margin-top: 0.75rem; }
        .historical-item { flex: 1; padding: 0.5rem; border-radius: 8px; transition: background 0.2s ease; }
        .historical-item:hover { background: rgba(255,255,255,0.1); }
        .historical-label { font-size: 0.6rem; color: rgba(255,255,255,0.6); text-transform: uppercase; letter-spacing: 0.03em; display: block; margin-bottom: 0.25rem; }
        .historical-value { font-size: 0.9rem; font-weight: 700; font-family: 'Inter', sans-serif; display: block; color: #FDFF66; }
        .historical-value.positive { color: #22c55e; }
        .historical-value.negative { color: #FDFF66; }
        .historical-detail { font-size: 0.65rem; color: rgba(255,255,255,0.5); }
        .historical-sparkline { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .sparkline-label { font-size: 0.55rem; color: var(--text-muted); margin-top: 0.15rem; }
        
        /* Compact Credibility Footer */
        .section-credibility.compact { display: flex; justify-content: space-between; padding-top: 0.5rem; margin-top: 0.75rem; border-top: 1px solid var(--border); font-size: 0.6rem; color: var(--text-muted); }
        .credibility-update { }
        .credibility-source-compact { }
        .portfolio-velocity-fill { position: absolute; left: 0; top: 0; height: 100%; background: transparent; border-right: 3px solid var(--deep-indigo); border-radius: 6px 0 0 6px; }
        .portfolio-velocity-marker { position: absolute; top: -4px; width: 2px; height: 20px; background: rgba(0,0,0,0.2); }
        .portfolio-velocity-scale { display: flex; justify-content: space-between; margin-top: 0.35rem; font-size: 0.65rem; color: rgba(255,255,255,0.6); }
        .scale-label-red { color: var(--red); }
        .scale-label-yellow { color: #b45309; }
        .scale-label-green { color: var(--green); }
        
        /* CHIPS Act Visualization */
        .chips-viz { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white; margin-bottom: 1rem; }
        .chips-viz-total { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 1rem; }
        .chips-viz-total-label { font-size: 0.8rem; color: rgba(255,255,255,0.7); }
        .chips-viz-total-value { font-size: 1.75rem; font-weight: 800; color: #FDFF66; font-family: 'Inter', sans-serif; }
        .chips-viz-bar { display: flex; height: 32px; border-radius: 6px; overflow: hidden; margin-bottom: 0.75rem; }
        .chips-viz-segment { display: flex; align-items: center; justify-content: center; position: relative; transition: all 0.2s; }
        .chips-viz-segment:hover { filter: brightness(1.1); }
        .chips-viz-segment.awarded { background: var(--green); }
        .chips-viz-segment.preliminary { background: var(--yellow); }
        .chips-viz-segment.at-risk { background: var(--red); }
        .chips-viz-segment-label { font-size: 0.7rem; font-weight: 700; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .chips-viz-legend { display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .chips-viz-legend-item { display: flex; align-items: center; gap: 0.35rem; }
        .chips-viz-legend-dot { width: 10px; height: 10px; border-radius: 3px; }
        .chips-viz-legend-dot.awarded { background: var(--green); }
        .chips-viz-legend-dot.preliminary { background: var(--yellow); }
        .chips-viz-legend-dot.at-risk { background: var(--red); }
        .chips-viz-legend-label { font-size: 0.7rem; color: rgba(255,255,255,0.7); }
        .chips-viz-details { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1); }
        .chips-viz-detail { text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.1); border-radius: 8px; color: white; }
        .chips-viz-detail.warning { background: rgba(255,255,255,0.1); }
        .chips-viz-detail-label { font-size: 0.65rem; color: rgba(255,255,255,0.7); display: block; margin-bottom: 0.15rem; }
        .chips-viz-detail-value { font-size: 1rem; font-weight: 700; color: #FDFF66; font-family: 'Inter', sans-serif; }
        .chips-viz-detail.warning .chips-viz-detail-value { color: #FDFF66; }
        
        /* Infrastructure Constraints Visualization */
        .infra-viz { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white; margin-bottom: 1rem; }
        .infra-viz-gauge { width: 130px; height: 130px; position: relative; margin: 0 auto 1.25rem; filter: drop-shadow(0 4px 12px rgba(239, 68, 68, 0.15)); }
        .infra-viz-gauge-center { position: absolute; top: 65%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .infra-viz-gauge-value { font-size: 2.25rem; font-weight: 800; color: #FDFF66; font-family: 'Inter', sans-serif; display: block; line-height: 1; text-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .infra-viz-gauge-label { font-size: 0.6rem; color: rgba(255,255,255,0.7); line-height: 1.3; }
        .infra-viz-metrics { margin-bottom: 1rem; background: rgba(255,255,255,0.1); border-radius: 10px; padding: 1rem; }
        .infra-viz-metric { margin-bottom: 0.75rem; }
        .infra-viz-metric:last-child { margin-bottom: 0; }
        .infra-viz-metric-bar { height: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; overflow: hidden; margin-bottom: 0.35rem; }
        .infra-viz-metric-fill { height: 100%; border-radius: 5px; transition: width 0.8s ease-out; }
        .infra-viz-metric-fill.grid-queue { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .infra-viz-metric-fill.warning { background: linear-gradient(90deg, #eab308, #d97706); }
        .infra-viz-metric-fill.critical { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .infra-viz-metric-info { display: flex; justify-content: space-between; }
        .infra-viz-metric-label { font-size: 0.75rem; color: rgba(255,255,255,0.7); font-weight: 500; }
        .infra-viz-metric-value { font-size: 0.75rem; font-weight: 700; color: #FDFF66; font-family: 'Inter', sans-serif; }
        .infra-viz-breakdown { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); }
        .infra-viz-breakdown-item { text-align: center; padding: 0.5rem; border-radius: 8px; transition: background 0.2s ease; }
        .infra-viz-breakdown-item:hover { background: rgba(255,255,255,0.1); }
        .infra-viz-breakdown-value { font-size: 1.35rem; font-weight: 800; color: #FDFF66; font-family: 'Inter', sans-serif; display: block; }
        .infra-viz-breakdown-label { font-size: 0.6rem; color: rgba(255,255,255,0.7); }
        
        /* Sector Snapshot */
        .sector-section { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; }
        .sector-section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; }
        .sector-section-title { font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }
        .sector-header-right { display: flex; align-items: center; gap: 1rem; }
        .sector-update-tag { font-size: 0.65rem; color: var(--text-muted); font-family: 'Inter', sans-serif; }
        
        .sector-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
        .sector-card { background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 14px; padding: 1.25rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.04); position: relative; overflow: hidden; }
        .sector-card::after { content: ''; position: absolute; top: 0; right: 0; width: 60px; height: 60px; background: radial-gradient(circle at top right, rgba(30, 27, 75, 0.03), transparent 70%); pointer-events: none; }
        .sector-card:hover { border-color: var(--deep-indigo); transform: translateY(-4px); box-shadow: 0 12px 32px rgba(30, 27, 75, 0.12); }
        .sector-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .sector-card-name { font-size: 1rem; font-weight: 600; color: var(--text-primary); }
        .sector-score-group { display: flex; align-items: center; gap: 0.5rem; }
        .sector-card-score { font-size: 1.5rem; font-weight: 800; font-family: 'Inter', sans-serif; color: var(--deep-indigo); text-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .sector-card-score.green { color: var(--green); }
        .sector-card-score.yellow { color: var(--yellow); }
        .sector-card-score.red { color: var(--red); }
        .sector-change { font-size: 0.7rem; font-weight: 600; padding: 0.2rem 0.4rem; border-radius: 6px; }
        .sector-change.positive { background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(34, 197, 94, 0.2)); color: var(--green); }
        .sector-change.negative { background: linear-gradient(135deg, rgba(239, 68, 68, 0.12), rgba(239, 68, 68, 0.2)); color: var(--red); }
        .sector-card-bar { height: 8px; background: #e2e8f0; border-radius: 4px; margin-bottom: 0.75rem; overflow: hidden; box-shadow: inset 0 1px 2px rgba(0,0,0,0.06); }
        .sector-card-bar-fill { height: 100%; border-radius: 4px; transition: width 0.6s ease-out; }
        .sector-card-bar-fill.green { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .sector-card-bar-fill.yellow { background: linear-gradient(90deg, #eab308, #ca8a04); }
        .sector-card-bar-fill.red { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .sector-sparkline-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem; padding: 0.5rem 0.75rem; background: var(--white); border-radius: 8px; border: 1px solid rgba(0,0,0,0.04); }
        .sector-yoy { text-align: right; }
        .sector-yoy-label { font-size: 0.55rem; color: var(--text-muted); text-transform: uppercase; display: block; }
        .sector-yoy-value { font-size: 0.8rem; font-weight: 700; font-family: 'Inter', sans-serif; }
        .sector-yoy-value.positive { color: var(--green); }
        .sector-yoy-value.negative { color: var(--red); }
        .sector-card-meta { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-muted); }
        .sector-card-capital { font-weight: 600; color: var(--text-secondary); }
        .sector-card-status { display: flex; gap: 0.75rem; }
        .sector-card-status span { display: flex; align-items: center; gap: 0.25rem; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; }
        .status-dot.risk { background: var(--yellow); }
        .status-dot.distress { background: var(--red); }
        .status-dot.terminated { background: #1f2937; }
        
        /* Top Movers */
        .movers-section { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 2rem; }
        .movers-card { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; overflow: hidden; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .movers-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.08); }
        .movers-card-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; }
        .movers-card-icon { width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; }
        .movers-card-icon.up { background: var(--green-bg); }
        .movers-card-icon.up::after { content: ''; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 8px solid var(--green); }
        .movers-card-icon.down { background: var(--red-bg); }
        .movers-card-icon.down::after { content: ''; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid var(--red); }
        .movers-card-title { font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }
        
        .mover-item { display: flex; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid var(--border); gap: 0.75rem; }
        .mover-item:last-of-type { border-bottom: none; }
        .mover-rank { width: 24px; height: 24px; background: var(--off-white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; color: var(--text-muted); flex-shrink: 0; }
        .mover-info { flex: 1; min-width: 0; }
        .mover-name { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .mover-sector { font-size: 0.75rem; color: var(--text-muted); }
        .mover-sparkline { flex-shrink: 0; }
        .mover-score { text-align: right; flex-shrink: 0; }
        .mover-score-value { font-size: 1rem; font-weight: 700; font-family: 'Inter', sans-serif; color: var(--deep-indigo); }
        .mover-score-value.green { color: var(--green); }
        .mover-score-value.red { color: var(--red); }
        .mover-score-change { font-size: 0.75rem; }
        .mover-score-change.positive { color: var(--green); }
        .mover-score-change.negative { color: var(--red); }
        .movers-date { margin-left: auto; font-size: 0.65rem; color: var(--text-muted); font-family: 'Inter', sans-serif; }
        .movers-footer { padding-top: 0.75rem; margin-top: 0.5rem; }
        .movers-footer.warning { background: var(--red-bg); margin: 0.75rem -1.5rem -1.5rem -1.5rem; padding: 1rem 1.5rem; border-radius: 0 0 16px 16px; }
        .movers-footer.highlight { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); margin: 0.75rem -1.5rem -1.5rem -1.5rem; padding: 1rem 1.5rem; border-radius: 0 0 16px 16px; }
        .movers-summary { font-size: 0.75rem; color: var(--text-secondary); }
        .movers-footer.warning .movers-summary { color: var(--red); font-weight: 500; }
        .movers-footer.highlight .movers-summary { color: #FDFF66; font-weight: 500; }
        
        /* Advanced Visualizations */
        .advanced-viz-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem; }
        .advanced-viz-card { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; }
        .advanced-viz-header { margin-bottom: 1.25rem; }
        .advanced-viz-title { font-size: 1rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.15rem; }
        .advanced-viz-subtitle { font-size: 0.75rem; color: var(--text-muted); }
        
        /* Heatmap */
        .heatmap-container { }
        .heatmap-grid { display: flex; flex-direction: column; gap: 2px; }
        .heatmap-row { display: grid; grid-template-columns: 100px repeat(4, 1fr); gap: 2px; }
        .heatmap-row.header { margin-bottom: 4px; }
        .heatmap-row.totals { margin-top: 4px; border-top: 2px solid var(--border); padding-top: 6px; }
        .heatmap-cell { padding: 0.5rem; text-align: center; font-size: 0.8rem; font-weight: 600; border-radius: 4px; background: var(--off-white); color: var(--text-primary); }
        .heatmap-cell.label { text-align: left; font-weight: 500; color: var(--text-secondary); background: transparent; font-size: 0.75rem; }
        .heatmap-cell.header-cell { font-size: 0.65rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; background: transparent; }
        .heatmap-cell.total { background: var(--off-white); color: var(--text-primary); }
        .heatmap-cell.total.grand { background: var(--deep-indigo); color: var(--white); }
        .heatmap-legend { display: flex; align-items: center; gap: 0.75rem; margin-top: 1rem; padding-top: 0.75rem; border-top: 1px solid var(--border); }
        .heatmap-legend-title { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; }
        .heatmap-legend-scale { display: flex; align-items: center; gap: 0.5rem; }
        .legend-low, .legend-high { font-size: 0.65rem; color: var(--text-muted); }
        .legend-gradient { width: 80px; height: 8px; background: linear-gradient(to right, #f1f5f9, var(--deep-indigo)); border-radius: 4px; }
        
        /* Map */
        .map-container { display: flex; gap: 1.5rem; }
        .us-map-simple { flex: 1; display: flex; flex-direction: column; gap: 0.5rem; }
        .map-region { display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 0.75rem; background: var(--off-white); border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .map-region:hover { background: #e2e8f0; }
        .region-label { width: 80px; font-size: 0.8rem; font-weight: 600; color: var(--text-primary); }
        .region-stats { display: flex; gap: 0.75rem; flex: 1; }
        .region-count { font-size: 0.85rem; font-weight: 700; color: var(--deep-indigo); font-family: 'Inter', sans-serif; }
        .region-capital { font-size: 0.75rem; color: var(--text-muted); }
        .region-bar { width: 60px; height: 8px; background: #e2e8f0; border-radius: 4px; position: relative; overflow: hidden; }
        .region-bar::after { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: var(--fill); background: var(--deep-indigo); border-radius: 4px; }
        .map-hotspots { width: 140px; }
        .hotspot-title { font-size: 0.65rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 0.75rem; }
        .hotspot-item { padding: 0.5rem 0; border-bottom: 1px solid var(--border); }
        .hotspot-item:last-child { border-bottom: none; }
        .hotspot-state { font-size: 0.8rem; font-weight: 600; color: var(--text-primary); display: block; }
        .hotspot-value { font-size: 0.9rem; font-weight: 700; color: var(--deep-indigo); font-family: 'Inter', sans-serif; display: block; }
        .hotspot-count { font-size: 0.65rem; color: var(--text-muted); }
        
        /* Timeline Gantt */
        .timeline-section { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; }
        .timeline-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; }
        .timeline-title { font-size: 1rem; font-weight: 700; color: var(--deep-indigo); }
        .timeline-legend { display: flex; gap: 1rem; }
        .legend-item { display: flex; align-items: center; gap: 0.35rem; font-size: 0.7rem; color: var(--text-muted); }
        .legend-dot { width: 10px; height: 10px; border-radius: 3px; }
        .legend-dot.completed { background: var(--green); }
        .legend-dot.upcoming { background: var(--blue); }
        .legend-dot.at-risk { background: var(--yellow); }
        .legend-dot.delayed { background: var(--red); }
        .gantt-container { position: relative; }
        .gantt-header { display: flex; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; margin-bottom: 0.5rem; }
        .gantt-project-col { width: 180px; flex-shrink: 0; font-size: 0.65rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; }
        .gantt-timeline-col { flex: 1; position: relative; }
        .gantt-months { display: flex; }
        .gantt-months span { flex: 1; text-align: center; font-size: 0.6rem; color: var(--text-muted); }
        .gantt-body { }
        .gantt-row { display: flex; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid #f1f5f9; }
        .gantt-row:last-child { border-bottom: none; }
        .gantt-row .gantt-project-col { display: flex; flex-direction: column; }
        .gantt-project-name { font-size: 0.8rem; font-weight: 600; color: var(--text-primary); }
        .gantt-project-milestone { font-size: 0.7rem; color: var(--text-muted); }
        .gantt-row .gantt-timeline-col { height: 24px; position: relative; background: repeating-linear-gradient(to right, transparent 0%, transparent calc(8.33% - 1px), #f1f5f9 calc(8.33% - 1px), #f1f5f9 8.33%); }
        .gantt-bar { position: absolute; top: 4px; height: 16px; border-radius: 4px; display: flex; align-items: center; justify-content: center; }
        .gantt-bar.completed { background: var(--green); }
        .gantt-bar.upcoming { background: var(--blue); }
        .gantt-bar.at-risk { background: var(--yellow); }
        .gantt-bar.delayed { background: var(--red); }
        .gantt-bar-label { font-size: 0.6rem; font-weight: 600; color: white; text-shadow: 0 1px 1px rgba(0,0,0,0.2); }
        .gantt-now-line { position: absolute; top: 0; bottom: 0; width: 2px; background: var(--deep-indigo); z-index: 10; }
        .gantt-now-line::before { content: 'NOW'; position: absolute; top: -18px; left: 50%; transform: translateX(-50%); font-size: 0.55rem; font-weight: 700; color: var(--deep-indigo); background: var(--white); padding: 0 4px; }
        
        /* Stock Correlation Panel */
        .stock-correlation-panel { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; }
        .correlation-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.25rem; }
        .correlation-title-group { }
        .correlation-title { font-size: 1rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.15rem; }
        .correlation-subtitle { font-size: 0.75rem; color: var(--text-muted); }
        .correlation-link { font-size: 0.75rem; color: var(--blue); text-decoration: none; font-weight: 500; }
        .correlation-link:hover { text-decoration: underline; }
        .correlation-content { display: block; }
        .correlation-summary { }
        .correlation-score-card { background: linear-gradient(135deg, var(--deep-indigo) 0%, #312e81 100%); border-radius: 12px; padding: 1.5rem; text-align: center; margin-bottom: 1rem; }
        .correlation-score-value { font-size: 3rem; font-weight: 800; color: var(--white); font-family: 'Inter', sans-serif; line-height: 1; }
        .correlation-score-label { font-size: 0.7rem; color: rgba(255,255,255,0.7); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 0.25rem; }
        .correlation-score-status { display: inline-block; margin-top: 0.75rem; padding: 0.35rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .correlation-score-status.green { background: var(--green); color: white; }
        .correlation-score-status.yellow { background: #FDFF66; color: #1e1b4b; }
        .correlation-score-status.red { background: var(--red); color: white; }
        .correlation-score-breakdown { background: var(--off-white); border-radius: 10px; padding: 1rem; }
        .breakdown-item { display: flex; justify-content: space-between; padding: 0.4rem 0; border-bottom: 1px solid var(--border); }
        .breakdown-item:last-child { border-bottom: none; }
        .breakdown-label { font-size: 0.8rem; color: var(--text-secondary); }
        .breakdown-value { font-size: 0.8rem; font-weight: 600; color: var(--text-primary); }
        .correlation-table-wrapper { overflow-x: auto; }
        .correlation-table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        .correlation-table th { text-align: left; padding: 0.75rem; background: var(--off-white); font-size: 0.65rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; }
        .correlation-table th:first-child { border-radius: 8px 0 0 8px; }
        .correlation-table th:last-child { border-radius: 0 8px 8px 0; }
        .correlation-table td { padding: 0.75rem; border-bottom: 1px solid var(--border); }
        .correlation-table tr:hover { background: var(--off-white); cursor: pointer; }
        .correlation-table tr:last-child td { border-bottom: none; }
        .rank-cell { font-weight: 600; color: var(--text-muted); width: 40px; }
        .ticker-cell { font-family: 'Inter', sans-serif; font-weight: 700; color: var(--deep-indigo); }
        .projects-cell { font-size: 0.75rem; color: var(--text-muted); max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .exposure-bar-mini { width: 80px; height: 20px; background: #e2e8f0; border-radius: 4px; position: relative; overflow: hidden; }
        .exposure-bar-mini::before { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: var(--exposure); background: linear-gradient(90deg, var(--yellow) 0%, var(--red) 100%); border-radius: 4px; }
        .exposure-bar-mini span { position: relative; z-index: 1; font-size: 0.65rem; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; justify-content: center; height: 100%; }
        .risk-indicator { padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.65rem; font-weight: 600; }
        .risk-indicator.high { background: var(--red-bg); color: var(--red); }
        .risk-indicator.medium { background: var(--yellow-bg); color: #b45309; }
        .risk-indicator.low { background: var(--green-bg); color: var(--green); }
        
        /* Portfolio Impact Page */
        .tool-section { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; }
        .tool-header { margin-bottom: 1.5rem; }
        .tool-title { font-size: 1.5rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.5rem; }
        .tool-description { font-size: 0.95rem; color: var(--text-secondary); }
        
        .ticker-input-section { margin-bottom: 2rem; }
        .ticker-input-row { display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center; }
        .ticker-chip { display: flex; align-items: center; gap: 0.5rem; background: var(--deep-indigo); color: var(--white); padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600; font-family: 'Inter', sans-serif; }
        .ticker-chip-remove { background: none; border: none; color: rgba(255,255,255,0.7); cursor: pointer; font-size: 1rem; }
        .ticker-chip-remove:hover { color: white; }
        .ticker-add { display: flex; align-items: center; gap: 0.5rem; }
        .ticker-add input { border: 2px solid var(--border); border-radius: 8px; padding: 0.5rem 1rem; font-size: 0.9rem; width: 100px; text-transform: uppercase; font-family: 'Inter', sans-serif; }
        .ticker-add input:focus { outline: none; border-color: var(--deep-indigo); }
        .ticker-add-btn { background: var(--electric-yellow); border: none; color: var(--deep-indigo); padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .ticker-add-btn:hover { background: #fbbf24; }
        
        .exposure-results { }
        .exposure-summary { background: var(--off-white); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 2rem; }
        .exposure-score-circle { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(var(--yellow) 0deg, var(--yellow) 240deg, #e2e8f0 240deg); display: flex; align-items: center; justify-content: center; position: relative; }
        .exposure-score-inner { width: 90px; height: 90px; background: var(--off-white); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .exposure-score-value { font-size: 2rem; font-weight: 800; color: var(--yellow); font-family: 'Inter', sans-serif; }
        .exposure-score-label { font-size: 0.7rem; color: var(--text-muted); }
        .exposure-summary-text { flex: 1; }
        .exposure-summary-title { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.5rem; }
        .exposure-summary-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        
        .exposure-table { width: 100%; border-collapse: collapse; }
        .exposure-table th { text-align: left; padding: 1rem; background: var(--deep-indigo); color: var(--white); font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
        .exposure-table th:first-child { border-radius: 8px 0 0 0; }
        .exposure-table th:last-child { border-radius: 0 8px 0 0; }
        .exposure-table td { padding: 1rem; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .exposure-table tr:hover { background: var(--off-white); }
        .exposure-ticker { font-weight: 700; font-family: 'Inter', sans-serif; color: var(--deep-indigo); }
        .exposure-type { padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .exposure-type.direct { background: var(--red-bg); color: var(--red); }
        .exposure-type.indirect { background: var(--yellow-bg); color: #b45309; }
        .exposure-type.mixed { background: var(--blue-bg); color: var(--blue); }
        .exposure-risk { display: flex; align-items: center; gap: 0.5rem; }
        .exposure-risk-dot { width: 8px; height: 8px; border-radius: 50%; }
        .exposure-risk-dot.high { background: var(--red); }
        .exposure-risk-dot.medium { background: var(--yellow); }
        .exposure-risk-dot.low { background: var(--green); }
        
        /* Markets Page */
        .markets-nav { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; }
        .markets-nav-btn { padding: 0.75rem 1.5rem; border: 2px solid var(--border); background: var(--white); border-radius: 8px; font-size: 0.85rem; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .markets-nav-btn:hover { border-color: var(--deep-indigo); }
        .markets-nav-btn.active { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        
        .projects-filter-row { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; align-items: center; }
        .filter-group { display: flex; align-items: center; gap: 0.5rem; }
        .filter-label { font-size: 0.8rem; color: var(--text-muted); }
        .filter-select { padding: 0.5rem 1rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.85rem; background: var(--white); cursor: pointer; }
        .filter-search { padding: 0.5rem 1rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.85rem; width: 250px; }
        .filter-search:focus { outline: none; border-color: var(--deep-indigo); }
        
        .projects-table { width: 100%; border-collapse: collapse; background: var(--white); border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
        .projects-table th { text-align: left; padding: 1rem; background: var(--deep-indigo); color: var(--white); font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; cursor: pointer; }
        .projects-table th:hover { background: #2d2a5d; }
        .projects-table td { padding: 1rem; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
        .projects-table tr:hover { background: var(--off-white); cursor: pointer; }
        .projects-table tr:last-child td { border-bottom: none; }
        .projects-methodology { margin-top: 1.5rem; padding: 1rem 1.25rem; background: var(--off-white); border-radius: 8px; border: 1px solid var(--border); }
        .methodology-title { font-size: 0.7rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
        .methodology-text { font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5; }
        .methodology-updated { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border); }
        .rating-badge { padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; }
        .rating-strong-buy { background: var(--off-white); color: var(--deep-indigo); border: 1px solid var(--deep-indigo); }
        .rating-buy { background: var(--off-white); color: var(--text-primary); border: 1px solid var(--border); }
        .rating-hold { background: var(--off-white); color: var(--text-secondary); border: 1px solid var(--border); }
        .rating-sell { background: var(--off-white); color: var(--text-secondary); border: 1px solid var(--border); }
        .rating-strong-sell { background: var(--off-white); color: var(--text-muted); border: 1px solid var(--border); }
        .rating-speculative { background: var(--off-white); color: var(--text-muted); border: 1px dashed var(--border); }
        .phase-badge { font-size: 0.75rem; color: var(--text-secondary); }
        
        .project-name-cell { display: flex; flex-direction: column; }
        .project-name { font-weight: 600; color: var(--text-primary); }
        .project-location { font-size: 0.75rem; color: var(--text-muted); }
        
        .velocity-cell { font-family: 'Inter', sans-serif; font-weight: 700; color: var(--deep-indigo); }
        
        .status-badge { padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .status-badge.on-track { background: var(--off-white); color: var(--deep-indigo); border: 1px solid var(--deep-indigo); }
        .status-badge.at-risk { background: var(--off-white); color: var(--text-secondary); border: 1px solid var(--border); }
        .status-badge.distressed { background: var(--off-white); color: var(--text-muted); border: 1px dashed var(--text-muted); }
        
        .rating-badge { padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 700; }
        .rating-badge.strong-buy { background: var(--green); color: white; }
        .rating-badge.buy { background: var(--lime); color: white; }
        .rating-badge.hold { background: var(--yellow); color: white; }
        .rating-badge.sell { background: var(--orange); color: white; }
        .rating-badge.strong-sell { background: var(--red); color: white; }
        
        /* Compare Section */
        .compare-container { display: grid; grid-template-columns: 300px 1fr; gap: 2rem; }
        .compare-selector-panel { background: var(--white); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; height: fit-content; position: sticky; top: 80px; }
        .compare-panel-title { font-size: 0.8rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 1rem; }
        .compare-filter-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .compare-filter-tab { padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 500; border: 1px solid var(--border); background: var(--white); cursor: pointer; transition: all 0.2s; }
        .compare-filter-tab:hover { border-color: var(--deep-indigo); }
        .compare-filter-tab.active { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        .compare-project-list { max-height: 400px; overflow-y: auto; }
        .compare-project-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 8px; cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
        .compare-project-item:hover { background: var(--off-white); }
        .compare-project-item.selected { background: var(--off-white); border-color: var(--deep-indigo); }
        .compare-project-item.selected-2 { background: var(--off-white); border-color: var(--deep-indigo); }
        .compare-project-item.selected-3 { background: var(--off-white); border-color: var(--deep-indigo); }
        .compare-project-item.selected-4 { background: var(--off-white); border-color: var(--deep-indigo); }
        .compare-project-logo { width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: 700; color: var(--white); flex-shrink: 0; background: var(--deep-indigo); }
        .compare-project-info { flex: 1; min-width: 0; }
        .compare-project-name { font-size: 0.85rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .compare-project-sector { font-size: 0.7rem; color: var(--text-muted); }
        .compare-project-right { text-align: right; }
        .compare-project-score { font-family: 'Inter', sans-serif; font-size: 0.9rem; font-weight: 600; color: var(--deep-indigo); }
        .compare-project-phase { font-size: 0.6rem; color: var(--text-muted); margin-top: 0.15rem; }
        .compare-project-phase.phase-critical { color: var(--deep-indigo); font-weight: 600; }
        .compare-selected-count { margin-top: 1rem; padding: 0.75rem; background: var(--off-white); border-radius: 8px; font-size: 0.85rem; text-align: center; }
        .compare-clear-btn { margin-top: 0.75rem; width: 100%; padding: 0.75rem; border: 1px solid var(--border); background: var(--white); border-radius: 8px; font-size: 0.85rem; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .compare-clear-btn:hover { background: var(--off-white); }
        .compare-chart-panel { background: var(--white); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; }
        .compare-chart-title { font-size: 1.25rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.5rem; }
        .compare-chart-subtitle { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1.5rem; }
        .compare-chart-container { height: 350px; margin-bottom: 2rem; }
        .compare-legend-container { display: flex; gap: 2rem; flex-wrap: wrap; margin-bottom: 1.5rem; padding: 1rem; background: var(--off-white); border-radius: 8px; }
        .compare-legend-item { display: flex; align-items: center; gap: 0.5rem; }
        .compare-legend-name { font-size: 0.85rem; font-weight: 500; }
        .compare-legend-score { font-family: 'Inter', sans-serif; font-size: 0.85rem; font-weight: 600; color: var(--deep-indigo); }
        .compare-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .compare-table th { background: var(--deep-indigo); color: var(--white); padding: 1rem; text-align: left; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; }
        .compare-table td { padding: 1rem; border-bottom: 1px solid var(--border); }
        .compare-table tr:nth-child(even) { background: var(--off-white); }
        .compare-metric-name { font-weight: 500; }
        .compare-metric-value { font-family: 'Inter', sans-serif; font-weight: 600; }
        .compare-critical-text { color: var(--deep-indigo); font-weight: 700; }
        .compare-empty-state { text-align: center; padding: 4rem 2rem; color: var(--text-muted); }
        .compare-empty-icon { font-size: 4rem; margin-bottom: 1rem; }
        .compare-empty-title { font-size: 1.25rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; }
        .compare-methodology-banner { background: var(--off-white); border: 1px solid var(--border); border-radius: 8px; padding: 1rem 1.25rem; margin-bottom: 1.5rem; }
        .compare-methodology-title { font-weight: 700; font-size: 0.8rem; color: var(--deep-indigo); margin-bottom: 0.5rem; }
        .compare-methodology-text { font-size: 0.75rem; color: var(--text-secondary); line-height: 1.5; }
        .compare-sources { background: var(--white); border: 1px solid var(--border); border-radius: 8px; padding: 1rem 1.25rem; margin-top: 2rem; }
        .compare-sources-title { font-weight: 700; font-size: 0.8rem; color: var(--deep-indigo); margin-bottom: 0.5rem; }
        .compare-sources-text { font-size: 0.7rem; color: var(--text-muted); line-height: 1.5; }
        .compare-sources-note { font-size: 0.7rem; color: var(--text-muted); font-style: italic; margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border); }
        .compare-legend-phase { font-size: 0.7rem; color: var(--text-muted); margin-left: 0.5rem; padding: 0.15rem 0.4rem; background: var(--off-white); border-radius: 4px; }
        @media (max-width: 1024px) { .compare-container { grid-template-columns: 1fr; } .compare-selector-panel { position: static; } }
        
        /* Shareholder Impact Section */
        .stocks-header { margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem; }
        .stocks-header-left { }
        .stocks-title { font-size: 1.5rem; font-weight: 800; color: var(--deep-indigo); margin-bottom: 0.5rem; }
        .stocks-subtitle { font-size: 0.95rem; color: var(--text-secondary); }
        .stocks-actions { display: flex; gap: 0.5rem; }
        .stocks-export-btn { display: flex; align-items: center; gap: 0.4rem; padding: 0.5rem 1rem; background: var(--white); border: 1px solid var(--border); border-radius: 6px; font-size: 0.8rem; font-weight: 500; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .stocks-export-btn:hover { border-color: var(--deep-indigo); color: var(--deep-indigo); }
        .stocks-export-btn svg { width: 14px; height: 14px; }
        .stocks-stats-bar { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
        .stocks-stat-card { background: var(--white); border: 1px solid var(--border); border-radius: 10px; padding: 1.25rem; text-align: center; }
        .stocks-stat-value { font-family: 'Inter', sans-serif; font-size: 1.75rem; font-weight: 700; color: var(--deep-indigo); }
        .stocks-stat-label { font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.25rem; }
        .stocks-filter-bar { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .stocks-filter-btn { padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.8rem; font-weight: 500; border: 1px solid var(--border); background: var(--white); cursor: pointer; transition: all 0.2s; }
        .stocks-filter-btn:hover { border-color: var(--deep-indigo); }
        .stocks-filter-btn.active { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        .stocks-table { width: 100%; background: var(--white); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; border-collapse: collapse; }
        .stocks-table th { background: var(--deep-indigo); color: var(--white); padding: 0.7rem 0.6rem; text-align: left; font-weight: 600; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.03em; cursor: pointer; user-select: none; white-space: nowrap; }
        .stocks-table th:hover { background: #2d2a5e; }
        .stocks-table th .sort-icon { margin-left: 0.25rem; opacity: 0.5; font-size: 0.6rem; }
        .stocks-table th.sorted .sort-icon { opacity: 1; }
        .stocks-table th.no-sort { cursor: default; }
        .stocks-table th.no-sort:hover { background: var(--deep-indigo); }
        .stocks-table td { padding: 0.6rem; border-bottom: 1px solid var(--border); font-size: 0.75rem; vertical-align: middle; }
        .stocks-table tr:hover { background: var(--off-white); }
        .stocks-table tr:last-child td { border-bottom: none; }
        .stocks-ticker { font-family: 'Inter', sans-serif; font-weight: 700; font-size: 0.85rem; color: var(--deep-indigo); }
        .stocks-company-sub { font-size: 0.65rem; color: var(--text-muted); margin-top: 0.1rem; }
        .stocks-mktcap { font-family: 'Inter', sans-serif; font-size: 0.75rem; color: var(--text-secondary); }
        .stocks-exposure { font-family: 'Inter', sans-serif; font-weight: 600; }
        .stocks-pct { font-family: 'Inter', sans-serif; font-weight: 700; font-size: 0.8rem; }
        .stocks-pct.high-exposure { color: var(--deep-indigo); }
        .stocks-ytd { font-family: 'Inter', sans-serif; font-weight: 600; font-size: 0.75rem; }
        .stocks-ytd.up { color: var(--green); }
        .stocks-ytd.down { color: var(--red); }
        .stocks-catalyst { font-size: 0.7rem; color: var(--text-secondary); }
        .stocks-catalyst-date { font-weight: 600; color: var(--deep-indigo); display: block; }
        .stocks-catalyst-event { font-size: 0.65rem; color: var(--text-muted); }
        .stocks-sector { display: inline-block; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 500; background: var(--off-white); color: var(--text-secondary); }
        .stocks-risk { display: inline-block; font-size: 0.7rem; font-weight: 500; color: var(--text-secondary); }
        .stocks-risk.critical { color: var(--deep-indigo); font-weight: 700; }
        .stocks-project-link { display: inline-block; padding: 0.15rem 0.35rem; background: var(--off-white); border-radius: 4px; font-size: 0.65rem; color: var(--text-secondary); margin-right: 0.15rem; margin-bottom: 0.15rem; cursor: pointer; transition: all 0.2s; position: relative; }
        .stocks-project-link:hover { background: var(--deep-indigo); color: white; }
        .stocks-impact-cell { font-size: 0.7rem; line-height: 1.3; white-space: nowrap; }
        .stocks-impact-up { color: var(--green); }
        .stocks-impact-down { color: var(--red); }
        /* Tooltip styles */
        .stocks-tooltip { position: absolute; background: var(--deep-indigo); color: white; padding: 0.75rem 1rem; border-radius: 8px; font-size: 0.75rem; z-index: 1000; max-width: 280px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); pointer-events: none; opacity: 0; transition: opacity 0.2s; }
        .stocks-tooltip.visible { opacity: 1; }
        .stocks-tooltip-title { font-weight: 700; margin-bottom: 0.5rem; font-size: 0.8rem; }
        .stocks-tooltip-row { display: flex; justify-content: space-between; margin-bottom: 0.25rem; }
        .stocks-tooltip-label { color: rgba(255,255,255,0.7); }
        .stocks-tooltip-value { font-weight: 600; }
        .stocks-tooltip::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: var(--deep-indigo); }
        .risk-methodology { background: var(--white); border: 1px solid var(--border); border-radius: 10px; padding: 1.25rem; margin-bottom: 1.5rem; }
        .risk-methodology-title { font-weight: 700; font-size: 0.85rem; color: var(--deep-indigo); margin-bottom: 0.75rem; }
        .risk-methodology-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
        .risk-methodology-item { display: flex; flex-direction: column; gap: 0.25rem; }
        .risk-label { font-weight: 600; font-size: 0.8rem; color: var(--text-secondary); }
        .risk-label.critical { color: var(--deep-indigo); font-weight: 700; }
        .risk-methodology-desc { font-size: 0.7rem; color: var(--text-muted); line-height: 1.4; }
        @media (max-width: 1024px) { .stocks-stats-bar { grid-template-columns: repeat(2, 1fr); } .stocks-table { display: block; overflow-x: auto; } .risk-methodology-grid { grid-template-columns: repeat(2, 1fr); } .stocks-header { flex-direction: column; } }
        
        /* Risks Page */
        .risk-nav { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 1rem; }
        .risk-nav-btn { padding: 0.75rem 1.5rem; background: transparent; border: none; font-size: 0.85rem; font-weight: 500; cursor: pointer; color: var(--text-secondary); border-radius: 8px; }
        .risk-nav-btn:hover { background: var(--off-white); color: var(--text-primary); }
        .risk-nav-btn.active { background: var(--deep-indigo); color: var(--white); }
        
        .early-warning-feed { }
        .warning-item { background: var(--white); border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; border-left: 4px solid var(--red); }
        .warning-item.medium { border-left-color: var(--yellow); }
        .warning-item.low { border-left-color: var(--green); }
        .warning-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem; }
        .warning-title { font-size: 1rem; font-weight: 600; color: var(--text-primary); }
        .warning-date { font-size: 0.75rem; color: var(--text-muted); }
        .warning-body { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.75rem; }
        .warning-meta { display: flex; gap: 1rem; }
        .warning-tag { font-size: 0.75rem; padding: 0.25rem 0.5rem; background: var(--off-white); border-radius: 4px; color: var(--text-muted); }
        
        /* Tools Page */
        .tools-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
        .tool-card { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; cursor: pointer; transition: all 0.2s; }
        .tool-card:hover { border-color: var(--deep-indigo); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .tool-card-icon { width: 48px; height: 48px; background: var(--deep-indigo); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
        .tool-card-icon svg { stroke: var(--electric-yellow); }
        .tool-card-title { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.5rem; }
        .tool-card-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        
        /* Methodology Section */
        .methodology-section { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-top: 2rem; display: block; }
        .methodology-header { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--electric-yellow); }
        .methodology-title { font-size: 1.5rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.25rem; }
        .methodology-subtitle { font-size: 0.8rem; color: var(--text-muted); }
        .methodology-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
        .methodology-card { background: var(--off-white); border-radius: 12px; padding: 1.5rem; }
        .methodology-card.full-width { grid-column: span 2; }
        .methodology-card-title { font-size: 1rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 1rem; }
        .methodology-text { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; }
        .methodology-table { }
        .methodology-row { display: grid; grid-template-columns: 140px 60px 1fr; gap: 1rem; padding: 0.6rem 0; border-bottom: 1px solid var(--border); font-size: 0.8rem; }
        .methodology-row:last-child { border-bottom: none; }
        .methodology-row.header { font-weight: 700; color: var(--text-secondary); text-transform: uppercase; font-size: 0.65rem; letter-spacing: 0.03em; }
        .methodology-row span:first-child { color: var(--text-primary); font-weight: 500; }
        .methodology-row span:nth-child(2) { font-family: 'Inter', sans-serif; color: var(--deep-indigo); font-weight: 600; }
        .methodology-row span:nth-child(3) { color: var(--text-secondary); }
        
        .rating-scale { display: flex; flex-direction: column; gap: 0.5rem; }
        .rating-item { display: grid; grid-template-columns: 60px 80px 1fr; gap: 1rem; padding: 0.6rem 0.75rem; border-radius: 6px; align-items: center; }
        .rating-item.strong-buy { background: var(--green-bg); }
        .rating-item.buy { background: rgba(132,204,22,0.1); }
        .rating-item.hold { background: var(--yellow-bg); }
        .rating-item.sell { background: rgba(249,115,22,0.1); }
        .rating-item.strong-sell { background: var(--red-bg); }
        .rating-range { font-family: 'Inter', sans-serif; font-weight: 700; font-size: 0.8rem; }
        .rating-item.strong-buy .rating-range { color: var(--green); }
        .rating-item.buy .rating-range { color: #84cc16; }
        .rating-item.hold .rating-range { color: #b45309; }
        .rating-item.sell .rating-range { color: var(--orange); }
        .rating-item.strong-sell .rating-range { color: var(--red); }
        .rating-label { font-weight: 600; font-size: 0.8rem; color: var(--text-primary); }
        .rating-desc { font-size: 0.75rem; color: var(--text-secondary); }
        
        .source-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
        .source-category h4 { font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 0.5rem; }
        .source-category ul { list-style: none; }
        .source-category li { font-size: 0.8rem; color: var(--text-secondary); padding: 0.25rem 0; padding-left: 0.75rem; position: relative; }
        .source-category li::before { content: ''; position: absolute; left: 0; top: 0.6rem; width: 4px; height: 4px; background: var(--electric-yellow); border-radius: 50%; }
        
        .update-frequency { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
        .frequency-item { text-align: center; padding: 1rem; background: var(--white); border-radius: 8px; border: 1px solid var(--border); }
        .frequency-type { display: block; font-size: 0.9rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.25rem; }
        .frequency-desc { font-size: 0.7rem; color: var(--text-secondary); }
        
        .methodology-disclaimer { margin-top: 1.5rem; padding: 1rem; background: rgba(234,179,8,0.1); border-radius: 8px; font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6; border-left: 4px solid var(--yellow); }
        
        /* Action Bar */
        .action-bar { display: flex; justify-content: space-between; align-items: center; background: var(--white); border: 1px solid var(--border); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 0.75rem; }
        .action-bar-left, .action-bar-right { display: flex; align-items: center; gap: 0.75rem; }
        .action-btn { display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1rem; border-radius: 8px; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; }
        .action-btn.primary { background: var(--deep-indigo); color: var(--white); }
        .action-btn.primary:hover { background: #2d2a5d; }
        .action-btn.secondary { background: var(--off-white); color: var(--text-primary); border: 1px solid var(--border); }
        .action-btn.secondary:hover { background: #e2e8f0; }
        .action-btn.subscribe { background: var(--electric-yellow); color: var(--deep-indigo); }
        .action-btn.subscribe:hover { background: #fbbf24; }
        .action-btn.icon { position: relative; padding: 0.6rem; }
        .action-btn-badge { position: absolute; top: -4px; right: -4px; background: var(--red); color: white; font-size: 0.6rem; font-weight: 700; width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .action-btn svg { flex-shrink: 0; }
        
        /* Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200; display: none; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: var(--white); border-radius: 16px; max-width: 1200px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; }
        .modal-content.modal-large { max-width: 1400px; width: 98%; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .modal-content.modal-small { max-width: 500px; }
        .modal-content.modal-tiny { max-width: 320px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; background: var(--deep-indigo); color: var(--white); border-radius: 16px 16px 0 0; }
        .modal-title { font-size: 1rem; font-weight: 600; }
        .modal-close { background: rgba(255,255,255,0.2); border: none; color: white; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; font-size: 1.1rem; }
        .modal-close:hover { background: rgba(255,255,255,0.3); }
        .modal-body { flex: 1; overflow: hidden; }
        .modal-body iframe { width: 100%; height: 80vh; border: none; }
        .modal-body-content { padding: 1.5rem; }
        .modal-description { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6; }
        
        /* Subscribe Form */
        .subscribe-form { }
        .form-group { margin-bottom: 1.25rem; }
        .form-label { display: block; font-size: 0.75rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 0.5rem; }
        .form-input { width: 100%; padding: 0.75rem 1rem; border: 1px solid var(--border); border-radius: 8px; font-size: 0.9rem; }
        .form-input:focus { outline: none; border-color: var(--deep-indigo); }
        .checkbox-group { display: flex; flex-direction: column; gap: 0.5rem; }
        .checkbox-item { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
        .checkbox-item input { width: 16px; height: 16px; accent-color: var(--deep-indigo); }
        .checkbox-label { font-size: 0.85rem; color: var(--text-secondary); }
        .tag-select { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .tag-option { padding: 0.4rem 0.75rem; border: 1px solid var(--border); border-radius: 20px; font-size: 0.75rem; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .tag-option:hover { border-color: var(--deep-indigo); }
        .tag-option.selected { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        .submit-btn { width: 100%; padding: 0.85rem; background: var(--deep-indigo); color: var(--white); border: none; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer; margin-top: 0.5rem; }
        .submit-btn:hover { background: #2d2a5d; }
        .form-disclaimer { font-size: 0.7rem; color: var(--text-muted); text-align: center; margin-top: 1rem; }
        
        /* Alerts Panel */
        .alerts-panel { position: fixed; top: 0; right: -400px; width: 400px; height: 100vh; background: var(--white); box-shadow: -4px 0 20px rgba(0,0,0,0.15); z-index: 300; transition: right 0.3s ease; display: flex; flex-direction: column; }
        .alerts-panel.active { right: 0; }
        .alerts-panel-header { display: flex; justify-content: space-between; align-items: center; padding: 1.25rem 1.5rem; background: var(--deep-indigo); color: var(--white); }
        .alerts-panel-title { font-size: 1rem; font-weight: 600; }
        .alerts-panel-close { background: rgba(255,255,255,0.2); border: none; color: white; width: 28px; height: 28px; border-radius: 6px; cursor: pointer; font-size: 1rem; }
        .alerts-panel-filters { display: flex; gap: 0.5rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); }
        .alert-filter { padding: 0.4rem 0.75rem; border: 1px solid var(--border); background: transparent; border-radius: 20px; font-size: 0.75rem; color: var(--text-secondary); cursor: pointer; }
        .alert-filter.active { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        .alerts-panel-list { flex: 1; overflow-y: auto; padding: 1rem 1.5rem; }
        .alert-panel-item { padding: 1rem; border-radius: 10px; margin-bottom: 0.75rem; border-left: 4px solid; }
        .alert-panel-item.critical { background: var(--red-bg); border-left-color: var(--red); }
        .alert-panel-item.warning { background: var(--yellow-bg); border-left-color: var(--yellow); }
        .alert-panel-badge { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem; }
        .alert-panel-item.critical .alert-panel-badge { color: var(--red); }
        .alert-panel-item.warning .alert-panel-badge { color: #b45309; }
        .alert-panel-title { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem; }
        .alert-panel-text { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .alert-panel-meta { display: flex; justify-content: space-between; align-items: center; }
        .alert-panel-time { font-size: 0.7rem; color: var(--text-muted); }
        .alert-panel-meta a { font-size: 0.75rem; color: var(--blue); text-decoration: none; }
        .alerts-panel-footer { padding: 1rem 1.5rem; border-top: 1px solid var(--border); text-align: center; }
        .alerts-panel-footer a { font-size: 0.8rem; color: var(--blue); text-decoration: none; }
        
        /* Download Progress */
        .download-progress { padding: 2rem; text-align: center; }
        .download-icon { margin-bottom: 1rem; }
        .download-icon svg { stroke: var(--deep-indigo); animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .download-text { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem; }
        .download-bar { height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden; }
        .download-bar-fill { height: 100%; background: var(--deep-indigo); border-radius: 3px; transition: width 0.3s; width: 0%; }
        
        /* Share Modal */
        .share-options { display: flex; flex-direction: column; gap: 0.75rem; }
        .share-option { display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .share-option:hover { border-color: var(--deep-indigo); background: var(--off-white); }
        .share-option-icon { width: 48px; height: 48px; background: var(--off-white); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .share-option-icon svg { stroke: var(--deep-indigo); }
        .share-option-text { }
        .share-option-title { display: block; font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }
        .share-option-desc { font-size: 0.75rem; color: var(--text-muted); }
        
        /* Notifications */
        .notification { position: fixed; bottom: 20px; right: 20px; padding: 1rem 1.5rem; border-radius: 10px; display: flex; align-items: center; gap: 0.75rem; z-index: 400; transform: translateX(120%); transition: transform 0.3s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
        .notification.show { transform: translateX(0); }
        .notification.success { background: var(--green); color: white; }
        .notification.error { background: var(--red); color: white; }
        .notification.info { background: var(--deep-indigo); color: white; }
        .notification-icon { font-size: 1.1rem; font-weight: 700; }
        .notification-message { font-size: 0.9rem; font-weight: 500; }
        
        /* Login Button */
        .login-btn { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--electric-yellow); color: var(--deep-indigo); border: none; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .login-btn:hover { background: #fbbf24; transform: translateY(-1px); }
        .login-btn svg { stroke: var(--deep-indigo); }
        
        /* User Section & Dropdown */
        .user-section { position: relative; }
        .user-menu { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.75rem; background: rgba(255,255,255,0.1); border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .user-menu:hover { background: rgba(255,255,255,0.2); }
        .user-avatar { width: 28px; height: 28px; background: var(--electric-yellow); color: var(--deep-indigo); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; }
        .user-name { font-size: 0.8rem; color: var(--white); }
        .user-menu svg { stroke: rgba(255,255,255,0.7); }
        .user-dropdown { position: absolute; top: 100%; right: 0; margin-top: 0.5rem; width: 220px; background: var(--white); border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.2s; z-index: 100; }
        .user-dropdown.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .user-dropdown-header { padding: 1rem; border-bottom: 1px solid var(--border); }
        .user-dropdown-name { display: block; font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }
        .user-dropdown-email { display: block; font-size: 0.75rem; color: var(--text-muted); margin-top: 0.15rem; }
        .user-dropdown-plan { display: inline-block; margin-top: 0.5rem; padding: 0.2rem 0.5rem; background: var(--green-bg); color: var(--green); font-size: 0.65rem; font-weight: 600; border-radius: 4px; text-transform: uppercase; }
        .user-dropdown-items { padding: 0.5rem; }
        .user-dropdown-items a { display: block; padding: 0.6rem 0.75rem; color: var(--text-secondary); text-decoration: none; font-size: 0.85rem; border-radius: 6px; transition: all 0.15s; }
        .user-dropdown-items a:hover { background: var(--off-white); color: var(--text-primary); }
        
        /* Auth Modal */
        .auth-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; }
        .auth-tab { flex: 1; padding: 0.75rem; background: var(--off-white); border: none; border-radius: 8px; font-size: 0.85rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .auth-tab.active { background: var(--deep-indigo); color: var(--white); }
        .auth-tab:hover:not(.active) { background: #e2e8f0; }
        .form-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .form-link { font-size: 0.8rem; color: var(--blue); text-decoration: none; }
        .form-link:hover { text-decoration: underline; }
        .auth-divider { text-align: center; margin: 1.5rem 0; position: relative; }
        .auth-divider::before { content: ''; position: absolute; left: 0; top: 50%; width: 100%; height: 1px; background: var(--border); }
        .auth-divider span { position: relative; background: var(--white); padding: 0 1rem; font-size: 0.75rem; color: var(--text-muted); }
        .social-auth { display: flex; gap: 0.75rem; }
        .social-btn { flex: 1; display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem; border: 1px solid var(--border); background: var(--white); border-radius: 8px; font-size: 0.85rem; font-weight: 500; color: var(--text-primary); cursor: pointer; transition: all 0.2s; }
        .social-btn:hover { background: var(--off-white); border-color: var(--text-muted); }
        
        /* Preferences Modal */
        .prefs-section { margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border); }
        .prefs-section:last-of-type { border-bottom: none; margin-bottom: 1rem; }
        .prefs-section-title { font-size: 0.7rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 1rem; }
        .prefs-row { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; }
        .prefs-label { }
        .prefs-name { display: block; font-size: 0.9rem; font-weight: 500; color: var(--text-primary); }
        .prefs-desc { font-size: 0.75rem; color: var(--text-muted); }
        .prefs-select { padding: 0.5rem 2rem 0.5rem 0.75rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.85rem; background: var(--white) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E") no-repeat right 0.75rem center; appearance: none; cursor: pointer; }
        .toggle-switch { position: relative; width: 44px; height: 24px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; inset: 0; background: #cbd5e1; border-radius: 24px; transition: 0.3s; }
        .toggle-slider::before { content: ''; position: absolute; width: 18px; height: 18px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: 0.3s; }
        .toggle-switch input:checked + .toggle-slider { background: var(--green); }
        .toggle-switch input:checked + .toggle-slider::before { transform: translateX(20px); }
        .prefs-actions { display: flex; justify-content: space-between; margin-top: 1rem; }
        .prefs-reset-btn { padding: 0.75rem 1.25rem; background: transparent; border: 1px solid var(--border); border-radius: 8px; font-size: 0.85rem; color: var(--text-secondary); cursor: pointer; }
        .prefs-reset-btn:hover { background: var(--off-white); }
        .prefs-save-btn { padding: 0.75rem 1.5rem; background: var(--deep-indigo); border: none; border-radius: 8px; font-size: 0.85rem; font-weight: 600; color: var(--white); cursor: pointer; }
        .prefs-save-btn:hover { background: #2d2a5d; }
        
        /* PWA Install Banner */
        .pwa-install-banner { position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; background: var(--white); border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); padding: 1rem 1.25rem; display: flex; justify-content: space-between; align-items: center; z-index: 500; transition: bottom 0.3s ease; }
        .pwa-install-banner.show { bottom: 20px; }
        .pwa-banner-content { display: flex; align-items: center; gap: 0.75rem; }
        .pwa-banner-icon { width: 40px; height: 40px; background: var(--deep-indigo); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .pwa-banner-icon svg { stroke: var(--white); }
        .pwa-banner-text strong { display: block; font-size: 0.9rem; color: var(--text-primary); }
        .pwa-banner-text span { font-size: 0.75rem; color: var(--text-muted); }
        .pwa-banner-actions { display: flex; gap: 0.5rem; }
        .pwa-banner-actions button { padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .pwa-banner-actions button:first-child { background: var(--deep-indigo); color: var(--white); border: none; }
        .pwa-banner-actions button:last-child { background: transparent; color: var(--text-muted); border: 1px solid var(--border); }
        
        /* Compact View Mode */
        body.compact-view { font-size: 14px; }
        body.compact-view .executive-kpi { padding: 0.75rem; }
        body.compact-view .executive-kpi-value { font-size: 1.5rem; }
        body.compact-view .summary-card { padding: 1rem; }
        body.compact-view .sector-card { padding: 0.75rem; }
        body.compact-view .kpi-timeframes { gap: 0.25rem; }
        body.compact-view .kpi-tf { font-size: 0.5rem; padding: 0.1rem 0.25rem; }
        
        /* Visual Sophistication - Animations */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes tickerScroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        
        .page.active { animation: fadeIn 0.3s ease; }
        .executive-kpi { animation: fadeInUp 0.4s ease backwards; }
        .executive-kpi:nth-child(1) { animation-delay: 0.1s; }
        .executive-kpi:nth-child(2) { animation-delay: 0.15s; }
        .executive-kpi:nth-child(3) { animation-delay: 0.2s; }
        .executive-kpi:nth-child(4) { animation-delay: 0.25s; }
        .sector-card { animation: fadeInUp 0.4s ease backwards; }
        .sector-card:nth-child(1) { animation-delay: 0.1s; }
        .sector-card:nth-child(2) { animation-delay: 0.15s; }
        .sector-card:nth-child(3) { animation-delay: 0.2s; }
        .sector-card:nth-child(4) { animation-delay: 0.25s; }
        .sector-card:nth-child(5) { animation-delay: 0.3s; }
        .sector-card:nth-child(6) { animation-delay: 0.35s; }
        .modal-overlay.active .modal-content { animation: scaleIn 0.25s ease; }
        .alerts-panel.active { animation: slideInRight 0.3s ease; }
        
        /* Loading Skeleton */
        .skeleton { background: linear-gradient(90deg, var(--off-white) 25%, #e2e8f0 50%, var(--off-white) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 4px; }
        .skeleton-text { height: 1em; margin-bottom: 0.5em; }
        .skeleton-title { height: 1.5em; width: 60%; margin-bottom: 0.75em; }
        .skeleton-chart { height: 150px; }
        
        /* Data Refresh Indicator */
        .refreshing .freshness-dot { animation: pulse 0.5s infinite; }
        .refreshing .freshness-text { color: var(--yellow) !important; }
        
        /* Hover Transitions */
        .executive-kpi, .sector-card, .summary-card, .tool-card, .watchlist-card { transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease; }
        .executive-kpi:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        
        /* Focus States */
        .form-input:focus, .filter-select:focus, .prefs-select:focus { outline: none; border-color: var(--deep-indigo); box-shadow: 0 0 0 3px rgba(30,27,75,0.1); }
        
        /* Interactive Tooltips */
        [data-tooltip] { position: relative; cursor: help; }
        [data-tooltip]::after { content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); padding: 0.5rem 0.75rem; background: var(--deep-indigo); color: var(--white); font-size: 0.7rem; border-radius: 6px; white-space: nowrap; opacity: 0; visibility: hidden; transition: all 0.2s; z-index: 100; }
        [data-tooltip]:hover::after { opacity: 1; visibility: visible; bottom: calc(100% + 8px); }
        
        /* Tools Section Headers */
        .tools-section-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
        .tools-section-title { font-size: 1.1rem; font-weight: 700; color: var(--deep-indigo); }
        .tools-section-badge { padding: 0.2rem 0.6rem; background: linear-gradient(135deg, var(--electric-yellow) 0%, #fbbf24 100%); color: var(--deep-indigo); font-size: 0.65rem; font-weight: 700; border-radius: 4px; text-transform: uppercase; }
        
        /* Premium Tool Cards */
        .tool-card.premium { position: relative; border: 2px solid var(--electric-yellow); }
        .tool-card.premium:hover { border-color: var(--deep-indigo); }
        .tool-card-badge { position: absolute; top: -8px; right: 12px; padding: 0.2rem 0.5rem; background: var(--green); color: white; font-size: 0.6rem; font-weight: 700; border-radius: 4px; }
        
        /* API Section */
        .api-section { background: linear-gradient(135deg, var(--deep-indigo) 0%, #312e81 100%); border-radius: 16px; padding: 2rem; margin-top: 2rem; color: var(--white); }
        .api-header { margin-bottom: 1.5rem; }
        .api-title-group { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.35rem; }
        .api-title { font-size: 1.25rem; font-weight: 700; }
        .api-badge { padding: 0.2rem 0.6rem; background: var(--electric-yellow); color: var(--deep-indigo); font-size: 0.65rem; font-weight: 700; border-radius: 4px; }
        .api-subtitle { font-size: 0.85rem; color: rgba(255,255,255,0.7); }
        .api-content { display: grid; grid-template-columns: 1fr 1.5fr; gap: 2rem; margin-bottom: 1.5rem; }
        .api-features { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .api-feature { display: flex; gap: 0.75rem; padding: 0.75rem; background: rgba(255,255,255,0.1); border-radius: 10px; }
        .api-feature-icon { width: 36px; height: 36px; background: rgba(255,255,255,0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .api-feature-icon svg { stroke: var(--electric-yellow); }
        .api-feature-text { }
        .api-feature-title { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.15rem; }
        .api-feature-desc { font-size: 0.7rem; color: rgba(255,255,255,0.6); }
        .api-code-preview { background: #0f0d24; border-radius: 10px; overflow: hidden; }
        .api-code-header { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1rem; background: rgba(255,255,255,0.05); }
        .api-code-label { font-size: 0.7rem; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.05em; }
        .api-copy-btn { padding: 0.3rem 0.6rem; background: rgba(255,255,255,0.1); border: none; border-radius: 4px; color: rgba(255,255,255,0.7); font-size: 0.7rem; cursor: pointer; }
        .api-copy-btn:hover { background: rgba(255,255,255,0.2); }
        .api-code { padding: 1rem; margin: 0; font-family: 'Inter', sans-serif; font-size: 0.7rem; line-height: 1.6; color: #a5b4fc; overflow-x: auto; }
        .api-cta { display: flex; align-items: center; gap: 1.5rem; }
        .api-btn { padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; border: none; }
        .api-btn.primary { background: var(--electric-yellow); color: var(--deep-indigo); }
        .api-btn.primary:hover { background: #fbbf24; }
        .api-link { color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem; }
        .api-link:hover { color: var(--white); text-decoration: underline; }
        
        /* Custom Dashboard Section */
        .custom-dashboard-section { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-top: 2rem; }
        .custom-dashboard-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem; }
        .custom-dashboard-title { font-size: 1.1rem; font-weight: 700; color: var(--deep-indigo); }
        .custom-dashboard-badge { padding: 0.2rem 0.6rem; background: var(--off-white); color: var(--text-muted); font-size: 0.65rem; font-weight: 600; border-radius: 4px; }
        .custom-dashboard-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1.5rem; }
        .custom-dashboard-preview { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
        .dashboard-template { flex: 1; padding: 1.5rem 1rem; background: var(--off-white); border: 2px dashed var(--border); border-radius: 12px; text-align: center; cursor: pointer; transition: all 0.2s; }
        .dashboard-template:hover { border-color: var(--deep-indigo); border-style: solid; }
        .dashboard-template.add-new { border-style: dashed; }
        .dashboard-template.add-new:hover { background: rgba(30,27,75,0.05); }
        .dashboard-template-icon { margin-bottom: 0.5rem; }
        .dashboard-template-icon svg { stroke: var(--text-muted); }
        .dashboard-template:hover .dashboard-template-icon svg { stroke: var(--deep-indigo); }
        .dashboard-template-name { font-size: 0.8rem; font-weight: 600; color: var(--text-secondary); }
        .waitlist-btn { padding: 0.75rem 1.5rem; background: var(--deep-indigo); color: var(--white); border: none; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; }
        .waitlist-btn:hover { background: #2d2a5d; }
        
        /* Medium Modal */
        .modal-content.modal-medium { max-width: 650px; }
        
        /* Earnings Calendar */
        .earnings-calendar { }
        .calendar-month { margin-bottom: 1.5rem; }
        .calendar-month:last-child { margin-bottom: 0; }
        .calendar-month-title { font-size: 0.9rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--electric-yellow); }
        .earnings-list { display: flex; flex-direction: column; gap: 0.5rem; }
        .earnings-item { display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: var(--off-white); border-radius: 8px; }
        .earnings-date { font-family: 'Inter', sans-serif; font-size: 0.8rem; font-weight: 600; color: var(--text-secondary); width: 50px; }
        .earnings-info { flex: 1; }
        .earnings-company { font-weight: 700; color: var(--deep-indigo); margin-right: 0.5rem; }
        .earnings-event { font-size: 0.85rem; color: var(--text-secondary); }
        .earnings-tag { padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.65rem; font-weight: 600; }
        .earnings-tag.critical { background: var(--red-bg); color: var(--red); }
        .earnings-tag.high { background: var(--yellow-bg); color: #b45309; }
        .earnings-tag.medium { background: var(--green-bg); color: var(--green); }
        
        /* AI Summary */
        .ai-summary-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
        .ai-summary-date { font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); }
        .ai-summary-badge { padding: 0.25rem 0.75rem; background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%); color: white; font-size: 0.7rem; font-weight: 600; border-radius: 20px; }
        .ai-summary-content { }
        .ai-summary-section { font-size: 0.85rem; font-weight: 700; color: var(--deep-indigo); margin-top: 1.25rem; margin-bottom: 0.5rem; }
        .ai-summary-section:first-child { margin-top: 0; }
        .ai-summary-text { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; }
        .ai-summary-list { margin: 0; padding-left: 1.25rem; }
        .ai-summary-list li { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 0.5rem; }
        .ai-summary-list li strong { color: var(--text-primary); }
        .ai-summary-actions { display: flex; gap: 1rem; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border); }
        
        /* Watchlist */
        .watchlist-container { }
        .watchlist-actions { display: flex; gap: 0.75rem; margin-bottom: 1.25rem; }
        .watchlist-add-btn, .watchlist-export-btn { display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1rem; border-radius: 8px; font-size: 0.8rem; font-weight: 600; cursor: pointer; border: 1px solid var(--border); background: var(--white); color: var(--text-primary); }
        .watchlist-add-btn:hover, .watchlist-export-btn:hover { background: var(--off-white); }
        .watchlist-add-btn { background: var(--deep-indigo); color: var(--white); border-color: var(--deep-indigo); }
        .watchlist-add-btn:hover { background: #2d2a5d; }
        .watchlist-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
        .watchlist-card { background: var(--off-white); border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; cursor: pointer; transition: all 0.2s; }
        .watchlist-card:hover { border-color: var(--deep-indigo); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .watchlist-card.add-card { border-style: dashed; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 180px; }
        .watchlist-card.add-card:hover { background: rgba(30,27,75,0.05); border-style: solid; }
        .watchlist-add-icon { margin-bottom: 0.5rem; }
        .watchlist-add-icon svg { stroke: var(--text-muted); }
        .watchlist-add-text { font-size: 0.8rem; color: var(--text-muted); }
        .watchlist-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem; }
        .watchlist-card-name { font-size: 0.95rem; font-weight: 700; color: var(--text-primary); }
        .watchlist-remove { background: transparent; border: none; color: var(--text-muted); font-size: 1.1rem; cursor: pointer; padding: 0; line-height: 1; }
        .watchlist-remove:hover { color: var(--red); }
        .watchlist-card-sector { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.75rem; }
        .watchlist-card-score { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
        .watchlist-velocity { font-size: 1.5rem; font-weight: 800; font-family: 'Inter', sans-serif; }
        .watchlist-velocity.green { color: var(--green); }
        .watchlist-velocity.yellow { color: var(--yellow); }
        .watchlist-velocity.red { color: var(--red); }
        .watchlist-change { font-size: 0.75rem; font-weight: 600; padding: 0.15rem 0.35rem; border-radius: 4px; }
        .watchlist-change.positive { background: var(--green-bg); color: var(--green); }
        .watchlist-change.negative { background: var(--red-bg); color: var(--red); }
        .watchlist-card-status { margin-bottom: 0.75rem; }
        .watchlist-card-alert { display: flex; align-items: center; gap: 0.35rem; font-size: 0.7rem; color: var(--text-muted); padding: 0.5rem; background: var(--white); border-radius: 6px; }
        .watchlist-card-alert svg { stroke: var(--text-muted); flex-shrink: 0; }
        .watchlist-card-alert.critical { background: var(--red-bg); color: var(--red); }
        .watchlist-card-alert.critical svg { stroke: var(--red); }
        .watchlist-subscribe { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.25rem; background: linear-gradient(135deg, var(--deep-indigo) 0%, #312e81 100%); border-radius: 10px; color: var(--white); }
        .watchlist-subscribe-text { }
        .watchlist-subscribe-text strong { display: block; font-size: 0.9rem; margin-bottom: 0.15rem; }
        .watchlist-subscribe-text span { font-size: 0.75rem; color: rgba(255,255,255,0.7); }
        .watchlist-subscribe-btn { padding: 0.6rem 1.25rem; background: var(--electric-yellow); color: var(--deep-indigo); border: none; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .watchlist-subscribe-btn:hover { background: #fbbf24; }
        
        /* Footer */
        .footer { background: var(--deep-indigo); color: var(--white); padding: 0; margin-top: 2rem; }
        .footer-content { max-width: 1600px; margin: 0 auto; }
        .footer-main { display: flex; justify-content: space-between; align-items: center; gap: 2rem; padding: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .footer-brand-section { }
        .footer-brand { font-size: 0.9rem; font-weight: 700; }
        .footer-links-section { display: flex; flex-direction: row; align-items: center; gap: 1.5rem; }
        .footer-links-section a { color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.75rem; }
        .footer-links-section a:hover { color: var(--white); }
        .footer-bottom { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; flex-wrap: wrap; gap: 0.5rem; }
        .footer-sources { font-size: 0.65rem; color: rgba(255,255,255,0.5); width: 100%; text-align: center; margin-bottom: 0.5rem; }
        .footer-update { font-size: 0.7rem; color: rgba(255,255,255,0.5); font-family: 'Inter', sans-serif; }
        .footer-disclaimer { font-size: 0.6rem; color: rgba(255,255,255,0.4); max-width: 500px; text-align: center; }
        .footer-copyright { font-size: 0.65rem; color: rgba(255,255,255,0.5); }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .executive-summary-grid { grid-template-columns: 1fr; }
            .executive-summary-sidebar { flex-direction: row; }
            .executive-highlight { flex: 1; }
            .summary-row { grid-template-columns: 1fr; }
            .sector-grid { grid-template-columns: repeat(2, 1fr); }
            .movers-section { grid-template-columns: 1fr; }
            .advanced-viz-row { grid-template-columns: 1fr; }
            .tools-grid { grid-template-columns: 1fr; }
            .methodology-grid { grid-template-columns: 1fr; }
            .methodology-card.full-width { grid-column: span 1; }
            .source-list { grid-template-columns: 1fr; }
            .update-frequency { grid-template-columns: repeat(2, 1fr); }
            .api-content { grid-template-columns: 1fr; }
            .api-features { grid-template-columns: 1fr; }
            .correlation-content { grid-template-columns: 1fr; }
            .custom-dashboard-preview { flex-wrap: wrap; }
            .dashboard-template { min-width: 140px; }
            .watchlist-grid { grid-template-columns: repeat(2, 1fr); }
            .systemic-risk-grid { grid-template-columns: repeat(2, 1fr) !important; }
            .portfolio-health-grid { grid-template-columns: repeat(2, 1fr) !important; }
        }
        @media (max-width: 768px) {
            .header-top { flex-direction: column; gap: 1rem; }
            .header-actions { width: 100%; justify-content: space-between; flex-wrap: wrap; }
            .search-box { order: 3; width: 100%; margin-top: 0.5rem; }
            .search-box input { width: 100%; }
            .data-freshness { display: none; }
            .data-quality-badge { display: none; }
            .login-btn span { display: none; }
            .executive-kpi-row { grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
            .executive-kpi { padding: 1rem; }
            .executive-kpi-value { font-size: 1.5rem; }
            .kpi-timeframes { flex-wrap: wrap; gap: 0.25rem; }
            .kpi-tf { font-size: 0.5rem; }
            .executive-summary-sidebar { flex-direction: column; }
            .sector-grid { grid-template-columns: 1fr; }
            .projects-filter-row { flex-direction: column; align-items: stretch; }
            .map-container { flex-direction: column; }
            .map-hotspots { width: 100%; }
            .gantt-project-col { width: 100px; }
            .gantt-months span { font-size: 0.5rem; }
            .footer-main { flex-direction: column; gap: 1.5rem; align-items: flex-start; }
            .footer-links-section { align-items: flex-start; }
            .footer-bottom { flex-direction: column; gap: 0.75rem; text-align: center; }
            .action-bar { flex-direction: column; gap: 1rem; padding: 1rem; }
            .action-bar-left, .action-bar-right { width: 100%; justify-content: center; flex-wrap: wrap; }
            .action-btn { flex: 1; min-width: 100px; justify-content: center; }
            .correlation-content { grid-template-columns: 1fr; }
            .correlation-summary { order: 2; }
            .correlation-table-wrapper { order: 1; }
            .correlation-table { font-size: 0.7rem; }
            .correlation-table th, .correlation-table td { padding: 0.5rem 0.35rem; }
            .projects-cell { display: none; }
            .custom-dashboard-preview { gap: 0.75rem; }
            .dashboard-template { padding: 1rem 0.75rem; min-width: calc(50% - 0.5rem); }
            .watchlist-grid { grid-template-columns: 1fr; }
            .watchlist-subscribe { flex-direction: column; gap: 1rem; text-align: center; }
            .heatmap-row { grid-template-columns: 80px repeat(4, 1fr); }
            .heatmap-cell { padding: 0.35rem; font-size: 0.7rem; }
            .prefs-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            .social-auth { flex-direction: column; }
            .modal-content.modal-medium { max-width: 95%; }
            .pwa-install-banner { flex-direction: column; gap: 1rem; text-align: center; }
            .pwa-banner-content { flex-direction: column; }
            .systemic-risk-grid { grid-template-columns: repeat(2, 1fr) !important; }
            .portfolio-health-grid { grid-template-columns: repeat(2, 1fr) !important; }
            .infra-viz-breakdown { grid-template-columns: repeat(2, 1fr); }
            .historical-context { flex-direction: column; gap: 0.5rem; }
            .brand span { font-size: 1.1rem !important; }
        }
        @media (max-width: 480px) {
            .executive-kpi-row { grid-template-columns: 1fr; }
            .nav-tabs { flex-wrap: wrap; }
            .nav-btn { flex: 1; min-width: 60px; font-size: 0.7rem; padding: 0.6rem 0.5rem; }
            .action-btn { font-size: 0.7rem; padding: 0.5rem 0.75rem; }
            .action-btn svg { display: none; }
            .gantt-container { overflow-x: auto; }
            .gantt-header, .gantt-row { min-width: 600px; }
            .systemic-risk-grid { grid-template-columns: 1fr !important; }
            .portfolio-health-grid { grid-template-columns: repeat(2, 1fr) !important; }
            .infra-viz-breakdown { grid-template-columns: repeat(2, 1fr); }
            .chips-viz-details { grid-template-columns: 1fr; }
        }
        
        /* Print Styles */
        @media print {
            .header, .nav-tabs, .action-bar, .alerts-panel, .modal-overlay { display: none !important; }
            .page { display: block !important; }
            .footer { page-break-before: always; }
            body { background: white; }
            .summary-card, .sector-card, .executive-kpi { break-inside: avoid; }
        }
        
        /* Accessibility - Screen Reader Only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--deep-indigo);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            z-index: 1000;
            text-decoration: none;
            font-weight: 600;
            transition: top 0.3s;
        }
        .skip-link:focus {
            top: 0;
        }
        
        /* Focus Visible */
        :focus-visible {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        body.reduce-motion * {
            animation: none !important;
            transition: none !important;
        }
        
        /* High Contrast Mode */
        @media (prefers-contrast: high) {
            :root {
                --border: #000;
                --text-primary: #000;
                --text-secondary: #333;
                --text-muted: #555;
            }
            .executive-kpi, .sector-card, .summary-card {
                border: 2px solid var(--text-primary);
            }
        }
        
        /* Form Error States */
        .form-input[aria-invalid="true"] {
            border-color: var(--red);
            background: var(--red-bg);
        }
        .form-error {
            color: var(--red);
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        /* ARIA Live Region Styling (hidden but accessible) */
        [role="status"], [role="alert"] {
            position: absolute;
            clip: rect(0, 0, 0, 0);
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Screen Reader Announcer -->
    <div id="srAnnouncer" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    
    <!-- Header -->
    <header class="header" role="banner">
        <div class="header-top">
                        <a href="#" class="brand" style="text-decoration: none; padding: 1rem 1.5rem; display: flex; align-items: center;">
                <span style="font-size: 1.4rem; font-weight: 800; color: white; letter-spacing: -0.02em; display: flex; align-items: center; gap: 0.75rem;"><span style="display: flex; gap: 3px;"><span style="width: 4px; height: 18px; background: #FDFF66; border-radius: 2px;"></span><span style="width: 4px; height: 14px; background: #FDFF66; opacity: 0.7; border-radius: 2px;"></span><span style="width: 4px; height: 10px; background: #FDFF66; opacity: 0.4; border-radius: 2px;"></span></span>NXT Infrastructure Execution Report</span>
            </a>
            <div class="header-actions">
                <div class="data-freshness">
                    <span class="freshness-dot"></span>
                    <span class="freshness-text">Live</span>
                    <span class="freshness-divider">|</span>
                    <span class="freshness-timestamp">Data as of Jan 8, 2026</span>
                </div>
                <div class="search-box">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                    <input type="text" placeholder="Search projects, sectors..." id="globalSearch">
                </div>
                <button onclick="window.print()" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: #FDFF66; color: #1e1b4b; border: none; border-radius: 6px; font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#e5e855'" onmouseout="this.style.background='#FDFF66'">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    Export PDF
                </button>
                <div class="user-section" id="userSection" style="display: none;"></div>
            </div>
        </div>
        <nav class="main-nav">
            <div class="nav-container">
                <a class="nav-tab active" data-page="home">Home</a>
                <a class="nav-tab" data-page="markets">Projects</a>
                <div class="nav-tab-dropdown">
                    <a class="nav-tab" data-page="analysis">Analysis <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-left: 4px;"><polyline points="6 9 12 15 18 9"/></svg></a>
                    <div class="nav-dropdown-menu">
                        <a href="ECONOMIC_IMPACT.html" class="nav-dropdown-item">Economic Impact</a>
                        <a href="INFRASTRUCTURE_CONSTRAINTS.html" class="nav-dropdown-item">Infrastructure</a>
                        <a href="SUPPLY_CHAIN.html" class="nav-dropdown-item">Supply Chain</a>
                        <a href="POLICY_MONITOR.html" class="nav-dropdown-item">Policy & Risk</a>
                        <a href="COMPETITIVE.html" class="nav-dropdown-item">Competitive</a>
                        <a href="#" class="nav-dropdown-item disabled">Workforce <span class="coming-soon">Coming Soon</span></a>
                    </div>
                </div>
                <a class="nav-tab" data-page="tools">Tools</a>
            </div>
        </nav>
    </header>
    
    <main id="main-content" role="main" class="page-container">
        <!-- HOME PAGE -->
        <div class="page active" id="home" role="region" aria-label="Home Dashboard">

        <!-- This Week Alerts Bar -->
        <div class="alerts-ticker" style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; color: white; overflow: hidden;">
            <div style="display: flex; align-items: center; gap: 1.5rem;">
                <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem; padding-right: 1rem; border-right: 1px solid rgba(255,255,255,0.2); z-index: 1; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);">
                    <span style="font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: #FDFF66;">UPDATES</span>
                </div>
                
                <div style="overflow: hidden; flex: 1;">
                    <div style="display: flex; gap: 3rem; animation: tickerScroll 30s linear infinite; white-space: nowrap;">
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>TSMC Arizona</strong> yields exceed Taiwan facilities by 4 percentage points</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">MILESTONE</span>
                        </div>
                        
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>Pharma Sector</strong> executing flawlessly with Eli Lilly, Novo Nordisk on schedule</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">SECTOR: 85</span>
                        </div>
                        
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #f59e0b; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>Rivian Georgia</strong> construction resuming after VW partnership capital infusion</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">STATUS CHANGE</span>
                        </div>
                        
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #ef4444; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>Intel Ohio</strong> timeline pushed to 2030-31, only $1.5B of $20B invested to date</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">CRITICAL</span>
                        </div>
                        
                        <!-- Duplicate for seamless loop -->
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>TSMC Arizona</strong> yields exceed Taiwan facilities by 4 percentage points</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">MILESTONE</span>
                        </div>
                        
                        <div style="flex-shrink: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%;"></span>
                            <span style="font-size: 0.8rem;"><strong>Pharma Sector</strong> executing flawlessly with Eli Lilly, Novo Nordisk on schedule</span>
                            <span style="font-size: 0.65rem; opacity: 0.6; padding: 0.15rem 0.4rem; background: rgba(255,255,255,0.1); border-radius: 4px;">SECTOR: 85</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
            <!-- Executive Summary -->
            <div class="executive-summary">
                <div class="executive-summary-header">
                    <div class="executive-headline">
                        <span class="headline-label">Week of January 6, 2026</span>
                        <h1 class="headline-text">4 in 5 Major U.S. Infrastructure Projects Now Behind Schedule</h1>
                    </div>
                </div>
                <!-- Bottom Line Callout -->
                <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; padding: 1rem 1.25rem; margin-bottom: 1.25rem; display: flex; align-items: center; gap: 1rem;">
                    <div style="font-size: 0.65rem; font-weight: 700; color: #FDFF66; text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap;">Bottom Line</div>
                    <div style="font-size: 0.95rem; color: white; line-height: 1.5;">Semiconductor and battery sectors are deteriorating fastest. Only pharma and select data centers are executing on schedule. Grid interconnection delays now affect 23 projects representing $280B+ in capital.</div>
                </div>
                <div class="executive-kpi-row">
                    <div class="executive-kpi">
                        <div class="executive-kpi-value">$1.4T</div>
                        <div class="executive-kpi-label">Capital Committed</div>
                        <div style="font-size: 0.6rem; color: rgba(255,255,255,0.5); margin-top: 0.35rem;">+$85B vs Q3 2025</div>
                    </div>
                    <div class="executive-kpi">
                        <div class="executive-kpi-value">50</div>
                        <div class="executive-kpi-label">Total Projects</div>
                        <div style="font-size: 0.6rem; color: rgba(255,255,255,0.5); margin-top: 0.35rem;">+3 vs Q3 2025</div>
                    </div>
                    <div class="executive-kpi">
                        <div class="executive-kpi-value">80%</div>
                        <div class="executive-kpi-label">At Risk or Worse</div>
                        <div style="font-size: 0.6rem; color: rgba(255,255,255,0.5); margin-top: 0.35rem;"> from 68% Q3</div>
                    </div>
                    <div class="executive-kpi">
                        <div class="executive-kpi-value">38%</div>
                        <div class="executive-kpi-label">Workforce-Related</div>
                        <div style="font-size: 0.6rem; color: rgba(255,255,255,0.5); margin-top: 0.35rem;">Stable vs Q3</div>
                    </div>
                </div>
                <!-- Source Attribution -->
                <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 1rem; padding-top: 0.75rem; border-top: 1px solid var(--border);">
                    <strong>Data sources:</strong> SEC filings, CHIPS Act disclosures, company earnings calls, state permit databases, and verified construction reports. Data as of January 8, 2026.
                </div>
            </div>
            
            <!-- Delayed Projects - Most Prominent -->
            <div class="delayed-scoreboard" style="background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <div>
                        <h2 style="font-size: 1.25rem; font-weight: 700; margin: 0; color: var(--deep-indigo);">Delayed Projects</h2>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin: 0.25rem 0 0 0;">Three worst delays by severity. Sources: Company press releases, regulatory filings.</p>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 2rem; font-weight: 800; color: var(--deep-indigo);">$41B+</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">Committed Capital Behind Schedule</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                    <!-- Intel Ohio - WORST -->
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="font-size: 0.6rem; font-weight: 700; color: #FDFF66; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">CRITICAL DELAY</div>
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div>
                                <div style="font-size: 1rem; font-weight: 700;">Intel Ohio</div>
                                <div style="font-size: 0.75rem; opacity: 0.7;">$20B+ committed (Semiconductor)</div>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.25rem;">
                                <div style="background: #FDFF66; color: #1e1b4b; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 700;">5-6 YR DELAY</div>
                                <div style="font-size: 0.65rem; opacity: 0.6;">Score: 32 (CRITICAL)</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                            <div style="flex: 1;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">ANNOUNCED (Jan 2022)</div>
                                <div style="font-size: 1rem; font-weight: 700;">2025</div>
                            </div>
                            <div style="font-size: 1.25rem; opacity: 0.4;"></div>
                            <div style="flex: 1; text-align: right;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">CURRENT TARGET</div>
                                <div style="font-size: 1rem; font-weight: 700; color: #FDFF66;">2030-31</div>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #FDFF66;">Why:</strong> <span style="color: rgba(255,255,255,0.7);">Weak chip demand, Intel financial struggles, workforce shortages. Only ~$1.5B of $20B invested to date.</span>
                        </div>
                    </div>
                    
                    <!-- VinFast NC - 2ND WORST -->
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="font-size: 0.6rem; font-weight: 700; color: #FDFF66; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">CRITICAL DELAY</div>
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div>
                                <div style="font-size: 1rem; font-weight: 700;">VinFast NC</div>
                                <div style="font-size: 0.75rem; opacity: 0.7;">$4B committed (Automotive)</div>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.25rem;">
                                <div style="background: #FDFF66; color: #1e1b4b; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 700;">4 YR DELAY</div>
                                <div style="font-size: 0.65rem; opacity: 0.6;">Score: 28 (CRITICAL)</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                            <div style="flex: 1;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">ANNOUNCED (Jul 2023)</div>
                                <div style="font-size: 1rem; font-weight: 700;">2024</div>
                            </div>
                            <div style="font-size: 1.25rem; opacity: 0.4;"></div>
                            <div style="flex: 1; text-align: right;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">CURRENT TARGET</div>
                                <div style="font-size: 1rem; font-weight: 700; color: #FDFF66;">2028</div>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #FDFF66;">Why:</strong> <span style="color: rgba(255,255,255,0.7);">Minimal U.S. sales, stock collapsed 96%, pivot to Asia. Site described as "sound of crickets."</span>
                        </div>
                    </div>
                    
                    <!-- Samsung Taylor - 3RD WORST -->
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="font-size: 0.6rem; font-weight: 700; color: #FDFF66; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">DISTRESSED</div>
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div>
                                <div style="font-size: 1rem; font-weight: 700;">Samsung Taylor</div>
                                <div style="font-size: 0.75rem; opacity: 0.7;">$17B+ committed (Semiconductor)</div>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.25rem;">
                                <div style="background: #FDFF66; color: #1e1b4b; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 700;">2-3 YR DELAY</div>
                                <div style="font-size: 0.65rem; opacity: 0.6;">Score: 35 (DISTRESSED)</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                            <div style="flex: 1;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">ANNOUNCED (Nov 2021)</div>
                                <div style="font-size: 1rem; font-weight: 700;">H2 2024</div>
                            </div>
                            <div style="font-size: 1.25rem; opacity: 0.4;"></div>
                            <div style="flex: 1; text-align: right;">
                                <div style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 0.15rem;">CURRENT TARGET</div>
                                <div style="font-size: 1rem; font-weight: 700; color: #FDFF66;">Feb 2027</div>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #FDFF66;">Why:</strong> <span style="color: rgba(255,255,255,0.7);">No confirmed customers for the fab. Industry reports (The Elec) cite Feb 2027.</span>
                        </div>
                    </div>
                </div>
                
                <!-- 39 At-Risk or Distressed Projects Breakdown -->
                <div style="margin-top: 1.25rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 10px;">
                    <div style="font-size: 0.75rem; font-weight: 700; margin-bottom: 0.75rem; color: #000000;">39 At-Risk or Distressed Projects by Primary Cause</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; font-size: 0.7rem;">
                        <div><strong>15 Financial/Demand:</strong> <span style="opacity: 0.7;">Intel, Samsung, BlueOval SK, VinFast, Rivian, AESC, Ascend, Natron, Ford BlueOval City, GM ZERO, Wolfspeed, Hyundai LG, Stargate, CoreWeave, Plug Power</span></div>
                        <div><strong>10 Grid/Permitting:</strong> <span style="opacity: 0.7;">GlobalFoundries, Micron NY, Nucor, Applied Materials, Amazon AWS, Meta, Google, Microsoft, Air Products, Scout</span></div>
                        <div><strong>8 Execution/Ramp:</strong> <span style="opacity: 0.7;">Polar Semi, LG Chem, SK Battery, Panasonic, Honda LG, Redwood, Ford MI, Form Energy</span></div>
                        <div><strong>6 Strategic Pivot:</strong> <span style="opacity: 0.7;">Novo Nordisk, StarPlus, LG Energy, Sila, Hyundai Metaplant, Hyundai Steel</span></div>
                    </div>
                </div>
            </div>
            
            <!-- Systemic Risk Indicators -->
            <div style="background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.5rem;">
                    <div>
                        <h2 style="font-size: 1.25rem; font-weight: 700; margin: 0; color: var(--deep-indigo);">Systemic Risk Indicators</h2>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin: 0.25rem 0 0 0;">Portfolio-wide constraints affecting project execution</p>
                    </div>
                </div>
                <div class="systemic-risk-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div style="font-size: 0.7rem; font-weight: 600; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.05em;">Grid Queue</div>
                            <div style="background: #FDFF66; color: #1e1b4b; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 700;">CRITICAL</div>
                        </div>
                        <div style="font-size: 1.75rem; font-weight: 800; color: #FDFF66; margin-bottom: 0.25rem;">5+ yrs</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">Avg interconnection wait</div>
                        <div style="font-size: 0.65rem; opacity: 0.5; margin-top: 0.5rem;">23 projects constrained</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div style="font-size: 0.7rem; font-weight: 600; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.05em;">Workforce</div>
                            <div style="background: #FDFF66; color: #1e1b4b; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 700;">ELEVATED</div>
                        </div>
                        <div style="font-size: 1.75rem; font-weight: 800; color: #FDFF66; margin-bottom: 0.25rem;">92%</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">Contractors can't hire</div>
                        <div style="font-size: 0.65rem; opacity: 0.5; margin-top: 0.5rem;">19 projects citing delays</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div style="font-size: 0.7rem; font-weight: 600; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.05em;">Regulatory</div>
                            <div style="background: #FDFF66; color: #1e1b4b; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 700;">ELEVATED</div>
                        </div>
                        <div style="font-size: 1.75rem; font-weight: 800; color: #FDFF66; margin-bottom: 0.25rem;">2</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">FERC rejections YTD</div>
                        <div style="font-size: 0.65rem; opacity: 0.5; margin-top: 0.5rem;">$9.3B rate case exposure</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.25rem; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;">
                            <div style="font-size: 0.7rem; font-weight: 600; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.05em;">CHIPS Funding</div>
                            <div style="background: #FDFF66; color: #1e1b4b; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 700;">STABLE</div>
                        </div>
                        <div style="font-size: 1.75rem; font-weight: 800; color: #FDFF66; margin-bottom: 0.25rem;">$25.8B</div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">Awards finalized</div>
                        <div style="font-size: 0.65rem; opacity: 0.5; margin-top: 0.5rem;">$4.3B renegotiating</div>
                    </div>
                </div>
            </div>
            
            
            <!-- Top Movers -->
            <div class="movers-section">
                <div class="movers-card">
                    <div class="movers-card-header">
                        <span class="movers-card-icon up"></span>
                        <span class="movers-card-title">Top Improvers (30 Days)</span>
                        <span class="movers-date">vs. Dec 3, 2025</span>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">1</div>
                        <div class="mover-info">
                            <div class="mover-name">Hyundai Steel Louisiana</div>
                            <div class="mover-sector">Steel</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">75</div>
                            <div class="mover-score-change positive">NEW</div>
                        </div>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">2</div>
                        <div class="mover-info">
                            <div class="mover-name">Polar Semiconductor</div>
                            <div class="mover-sector">Semiconductor</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">78</div>
                            <div class="mover-score-change positive">+13</div>
                        </div>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">3</div>
                        <div class="mover-info">
                            <div class="mover-name">LG Chem Tennessee</div>
                            <div class="mover-sector">Battery</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">78</div>
                            <div class="mover-score-change positive">+2</div>
                        </div>
                    </div>
                    <div class="movers-footer highlight">
                        <span class="movers-summary">5 projects improved by 5+ points this month</span>
                    </div>
                </div>
                
                <div class="movers-card">
                    <div class="movers-card-header">
                        <span class="movers-card-icon down"></span>
                        <span class="movers-card-title">Biggest Declines (30 Days)</span>
                        <span class="movers-date">vs. Dec 3, 2025</span>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">1</div>
                        <div class="mover-info">
                            <div class="mover-name">Natron Energy</div>
                            <div class="mover-sector">Battery</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">0</div>
                            <div class="mover-score-change negative">-58</div>
                        </div>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">2</div>
                        <div class="mover-info">
                            <div class="mover-name">Ascend Elements</div>
                            <div class="mover-sector">Battery</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">35</div>
                            <div class="mover-score-change negative">-27</div>
                        </div>
                    </div>
                    <div class="mover-item">
                        <div class="mover-rank">3</div>
                        <div class="mover-info">
                            <div class="mover-name">Applied Materials</div>
                            <div class="mover-sector">Semiconductor</div>
                        </div>
                        <div class="mover-score">
                            <div class="mover-score-value">62</div>
                            <div class="mover-score-change negative">-6</div>
                        </div>
                    </div>
                    <div class="movers-footer highlight">
                        <span class="movers-summary">1 project terminated, 6 declined by 5+ points</span>
                    </div>
                </div>
            </div>
            
            <!-- Summary Cards with Visualizations -->
            <div class="summary-row">
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Portfolio Health</span>
                        <a href="#" class="summary-card-link" onclick="switchToPage('markets')">View All</a>
                    </div>
                    <!-- 4 KPI Boxes replacing pie chart -->
                    <div class="portfolio-health-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 1.25rem;">
                        <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; padding: 1rem; text-align: center; color: white;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #FDFF66;">10</div>
                            <div style="font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 0.03em;">On Track</div>
                            <div style="font-size: 0.65rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">20%</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; padding: 1rem; text-align: center; color: white;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #FDFF66;">21</div>
                            <div style="font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 0.03em;">At Risk</div>
                            <div style="font-size: 0.65rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">42%</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; padding: 1rem; text-align: center; color: white;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #FDFF66;">18</div>
                            <div style="font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 0.03em;">Distressed</div>
                            <div style="font-size: 0.65rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">36%</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 10px; padding: 1rem; text-align: center; color: white;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #FDFF66;">1</div>
                            <div style="font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 0.03em;">Terminated</div>
                            <div style="font-size: 0.65rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">2%</div>
                        </div>
                    </div>
                    <div class="portfolio-velocity-bar">
                        <div class="portfolio-velocity-label">
                            <span>Portfolio Velocity</span>
                            <div class="velocity-trend-info">
                                <span class="portfolio-velocity-score">54</span>
                                <span class="velocity-change negative">-12 vs Q3</span>
                            </div>
                        </div>
                        <div class="portfolio-velocity-track">
                            <div class="portfolio-velocity-fill" style="width: 54%;"></div>
                            <div class="portfolio-velocity-marker" style="left: 66%;"></div>
                            <div class="portfolio-velocity-marker" style="left: 45%;"></div>
                        </div>
                        <div class="portfolio-velocity-scale">
                            <span>0</span>
                            <span class="scale-label-red">Distressed</span>
                            <span class="scale-label-yellow">At Risk</span>
                            <span class="scale-label-green">On Track</span>
                            <span>100</span>
                        </div>
                    </div>
                    <div class="historical-context">
                        <div class="historical-item">
                            <span class="historical-label">vs. Prior Quarter</span>
                            <span class="historical-value negative">-12 pts</span>
                            <span class="historical-detail">Was 66 in Q3</span>
                        </div>
                        <div class="historical-item">
                            <span class="historical-label">vs. Year Ago</span>
                            <span class="historical-value negative">-18 pts</span>
                            <span class="historical-detail">Was 72 in Dec 2024</span>
                        </div>
                    </div>
                    <div class="section-credibility compact">
                        <span class="credibility-update">Velocity scores derived from SEC filings, CHIPS Act disclosures, and verified construction data. <a href="#" onclick="switchToPage('tools')" style="color: inherit; text-decoration: underline;">Methodology</a></span>
                    </div>
                </div>
                
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">CHIPS Act Funding Status</span>
                        <a href="#" class="summary-card-link" onclick="showRiskView('policy'); switchToPage('risks');">View Details</a>
                    </div>
                    <div class="chips-viz">
                        <div class="chips-viz-total">
                            <span class="chips-viz-total-label">Total CHIPS Manufacturing</span>
                            <span class="chips-viz-total-value">$39B</span>
                        </div>
                        <div class="chips-viz-bar">
                            <div class="chips-viz-segment awarded" style="width: 66%;" data-tooltip="Finalized: $25.8B">
                                <span class="chips-viz-segment-label">$25.8B</span>
                            </div>
                            <div class="chips-viz-segment preliminary" style="width: 23%;" data-tooltip="Intel Equity: $8.9B">
                                <span class="chips-viz-segment-label">$8.9B</span>
                            </div>
                            <div class="chips-viz-segment at-risk" style="width: 11%;" data-tooltip="Renegotiating: $4.3B">
                                <span class="chips-viz-segment-label">$4.3B</span>
                            </div>
                        </div>
                        <div class="chips-viz-legend">
                            <div class="chips-viz-legend-item">
                                <span class="chips-viz-legend-dot awarded"></span>
                                <span class="chips-viz-legend-label">Finalized Awards</span>
                            </div>
                            <div class="chips-viz-legend-item">
                                <span class="chips-viz-legend-dot preliminary"></span>
                                <span class="chips-viz-legend-label">Intel Equity Stake</span>
                            </div>
                            <div class="chips-viz-legend-item">
                                <span class="chips-viz-legend-dot at-risk"></span>
                                <span class="chips-viz-legend-label">Renegotiating</span>
                            </div>
                        </div>
                        <div class="chips-viz-details">
                            <div class="chips-viz-detail">
                                <span class="chips-viz-detail-label">Recipients</span>
                                <span class="chips-viz-detail-value">19</span>
                            </div>
                            <div class="chips-viz-detail">
                                <span class="chips-viz-detail-label">Intel Stake</span>
                                <span class="chips-viz-detail-value">~10%</span>
                            </div>
                            <div class="chips-viz-detail warning">
                                <span class="chips-viz-detail-label">R&D Voided</span>
                                <span class="chips-viz-detail-value">$7.4B</span>
                            </div>
                        </div>
                    </div>
                    <div class="historical-context">
                        <div class="historical-item">
                            <span class="historical-label">Aug 2025 Change</span>
                            <span class="historical-value">Intel  Equity</span>
                            <span class="historical-detail">$8.9B converted to 10% stake</span>
                        </div>
                        <div class="historical-item">
                            <span class="historical-label">Natcast Status</span>
                            <span class="historical-value negative">Voided</span>
                            <span class="historical-detail">$7.4B R&D funds rescinded</span>
                        </div>
                    </div>
                    <div class="section-credibility compact">
                        <span class="credibility-update">Source: Commerce Dept, GAO, OIG Reports</span>
                        <span class="credibility-source-compact">Updated: Aug 2025</span>
                    </div>
                </div>
                
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Infrastructure Constraints</span>
                        <a href="#" class="summary-card-link" onclick="showRiskView('infrastructure'); switchToPage('risks');">View Analysis</a>
                    </div>
                    <div class="infra-viz">
                        <div class="infra-viz-gauge">
                            <canvas id="infraGaugeChart"></canvas>
                            <div class="infra-viz-gauge-center">
                                <span class="infra-viz-gauge-value">23</span>
                                <span class="infra-viz-gauge-label">Projects<br>Constrained</span>
                            </div>
                        </div>
                        <div class="infra-viz-metrics">
                            <div class="infra-viz-metric">
                                <div class="infra-viz-metric-bar">
                                    <div class="infra-viz-metric-fill grid-queue" style="width: 76%;"></div>
                                </div>
                                <div class="infra-viz-metric-info">
                                    <span class="infra-viz-metric-label">Grid Queue</span>
                                    <span class="infra-viz-metric-value">5 yr avg</span>
                                </div>
                            </div>
                            <div class="infra-viz-metric">
                                <div class="infra-viz-metric-bar">
                                    <div class="infra-viz-metric-fill warning" style="width: 62%;"></div>
                                </div>
                                <div class="infra-viz-metric-info">
                                    <span class="infra-viz-metric-label">Power Demand</span>
                                    <span class="infra-viz-metric-value">14.2 GW</span>
                                </div>
                            </div>
                            <div class="infra-viz-metric">
                                <div class="infra-viz-metric-bar">
                                    <div class="infra-viz-metric-fill critical" style="width: 46%;"></div>
                                </div>
                                <div class="infra-viz-metric-info">
                                    <span class="infra-viz-metric-label">Labor Gap</span>
                                    <span class="infra-viz-metric-value">46% filled</span>
                                </div>
                            </div>
                        </div>
                        <div class="infra-viz-breakdown">
                            <div class="infra-viz-breakdown-item">
                                <span class="infra-viz-breakdown-value">7</span>
                                <span class="infra-viz-breakdown-label">Data Center</span>
                            </div>
                            <div class="infra-viz-breakdown-item">
                                <span class="infra-viz-breakdown-value">9</span>
                                <span class="infra-viz-breakdown-label">Semiconductor</span>
                            </div>
                            <div class="infra-viz-breakdown-item">
                                <span class="infra-viz-breakdown-value">5</span>
                                <span class="infra-viz-breakdown-label">Battery</span>
                            </div>
                            <div class="infra-viz-breakdown-item">
                                <span class="infra-viz-breakdown-value">2</span>
                                <span class="infra-viz-breakdown-label">Other</span>
                            </div>
                        </div>
                    </div>
                    <div class="historical-context">
                        <div class="historical-item">
                            <span class="historical-label">vs. Q3 2025</span>
                            <span class="historical-value negative">+5 projects</span>
                            <span class="historical-detail">Was 18 constrained</span>
                        </div>
                        <div class="historical-item">
                            <span class="historical-label">Queue Growth</span>
                            <span class="historical-value negative">+1 yr YoY</span>
                            <span class="historical-detail">Was 4 yr avg</span>
                        </div>
                    </div>
                    <div class="section-credibility compact">
                        <span class="credibility-update">Source: PJM, ERCOT, CAISO, MISO queues</span>
                        <span class="credibility-source-compact">Dec 2025 data</span>
                    </div>
                </div>
            </div>
            
            <!-- Key Milestones Timeline - Enhanced with Risk Indicators -->
            <div class="timeline-section">
                <div class="timeline-header">
                    <div>
                        <h3 class="timeline-title">Key Milestones</h3>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem;">Upcoming milestones ranked by slip probability based on current velocity scores</p>
                    </div>
                    <div class="timeline-legend">
                        <span class="legend-item"><span class="legend-dot completed"></span>Completed</span>
                        <span class="legend-item"><span class="legend-dot upcoming"></span>On Track</span>
                        <span class="legend-item"><span class="legend-dot at-risk"></span>At Risk</span>
                        <span class="legend-item"><span class="legend-dot delayed"></span>Likely Slip</span>
                    </div>
                </div>
                <div class="gantt-container">
                    <div class="gantt-header">
                        <div class="gantt-project-col">Project / Milestone</div>
                        <div class="gantt-timeline-col">
                            <div class="gantt-months">
                                <span>Jan 26</span>
                                <span>Feb 26</span>
                                <span>Mar 26</span>
                                <span>Q2 26</span>
                                <span>Q3 26</span>
                                <span>Q4 26</span>
                                <span>2027</span>
                                <span>2028+</span>
                            </div>
                        </div>
                    </div>
                    <div class="gantt-body">
                        <!-- TSMC Arizona - ON TRACK -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('SE001_TSMC_Arizona_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">TSMC Arizona</span>
                                <span class="gantt-project-milestone">Phase 2 Equipment Install</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar upcoming" style="left: 8%; width: 15%;">
                                    <span class="gantt-bar-label">Q1 26</span>
                                </div>
                            </div>
                        </div>
                        <!-- Samsung Taylor - LIKELY SLIP -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('SE003_Samsung_Taylor_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">Samsung Taylor</span>
                                <span class="gantt-project-milestone">Production Start (Revised)</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar delayed" style="left: 75%; width: 20%;">
                                    <span class="gantt-bar-label">2028</span>
                                </div>
                            </div>
                        </div>
                        <!-- Intel Ohio - LIKELY SLIP -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('SE002_Intel_Ohio_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">Intel Ohio</span>
                                <span class="gantt-project-milestone">Fab 1 Production</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar delayed" style="left: 75%; width: 25%;">
                                    <span class="gantt-bar-label">2030+</span>
                                </div>
                            </div>
                        </div>
                        <!-- Panasonic Kansas - AT RISK -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('BT001_Panasonic_Kansas_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">Panasonic Kansas</span>
                                <span class="gantt-project-milestone">Phase 2 Groundbreaking</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar at-risk" style="left: 25%; width: 20%;">
                                    <span class="gantt-bar-label">Q2 26</span>
                                </div>
                            </div>
                        </div>
                        <!-- Eli Lilly - ON TRACK -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('PH001_Eli_Lilly_LEAP_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">Eli Lilly LEAP</span>
                                <span class="gantt-project-milestone">Manufacturing Online</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar upcoming" style="left: 38%; width: 18%;">
                                    <span class="gantt-bar-label">Q3 26</span>
                                </div>
                            </div>
                        </div>
                        <!-- CoreWeave Denton - AT RISK -->
                        <div class="gantt-row" style="cursor: pointer;" onclick="openProjectModal('DC007_CoreWeave_Denton_RAID.html')">
                            <div class="gantt-project-col">
                                <span class="gantt-project-name">CoreWeave Denton</span>
                                <span class="gantt-project-milestone">Grid Interconnection</span>
                            </div>
                            <div class="gantt-timeline-col">
                                <div class="gantt-bar at-risk" style="left: 50%; width: 25%;">
                                    <span class="gantt-bar-label">Q4 26</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding: 0.75rem 1rem; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 8px;">
                    <div style="font-size: 0.75rem; font-weight: 600; color: #FDFF66; margin-bottom: 0.25rem;">3 Milestones Likely to Slip</div>
                    <div style="font-size: 0.8rem; color: rgba(255,255,255,0.85);">Intel Ohio, Samsung Taylor, and CoreWeave Denton face high slip probability based on current velocity scores below 65 and unresolved blockers.</div>
                </div>
                <div class="section-credibility compact" style="margin-top: 1rem;">
                    <span class="credibility-update">Milestones from company filings and announcements. Risk assessment based on velocity scores.</span>
                </div>
            </div>
        </div>
        
        <!-- MARKETS PAGE -->
        <div class="page" id="markets">
            <div class="markets-nav">
                <button class="markets-nav-btn active" onclick="showMarketsView('projects')">All Projects</button>
                <button class="markets-nav-btn" onclick="showMarketsView('compare')">Compare</button>
                <button class="markets-nav-btn" onclick="showMarketsView('sectors')">By Sector</button>
            </div>
            
            <div id="marketsProjects">
                <div class="projects-filter-row">
                    <div class="filter-group">
                        <span class="filter-label">Sector:</span>
                        <select class="filter-select" id="filterSector" onchange="filterProjects()">
                            <option value="">All Sectors</option>
                            <option value="Semiconductor">Semiconductor</option>
                            <option value="Battery">Battery</option>
                            <option value="Data Center">Data Center</option>
                            <option value="Automotive">Automotive</option>
                            <option value="Pharma">Pharmaceutical</option>
                            <option value="Solar">Solar</option>
                            <option value="Steel">Steel</option>
                            <option value="Hydrogen">Hydrogen</option>
                            <option value="Energy Storage">Energy Storage</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <span class="filter-label">Status:</span>
                        <select class="filter-select" id="filterStatus" onchange="filterProjects()">
                            <option value="">All Statuses</option>
                            <option value="On Track">On Track</option>
                            <option value="At Risk">At Risk</option>
                            <option value="Distressed">Distressed</option>
                        </select>
                    </div>
                    <input type="text" class="filter-search" placeholder="Search projects..." id="filterSearch" onkeyup="filterProjects()">
                </div>
                
                <table class="projects-table">
                    <thead>
                        <tr>
                            <th onclick="sortProjects('name')">Project </th>
                            <th onclick="sortProjects('sector')">Sector </th>
                            <th onclick="sortProjects('capital')">Capital </th>
                            <th onclick="sortProjects('velocity')">Velocity </th>
                            <th onclick="sortProjects('phase')">Phase </th>
                            <th onclick="sortProjects('status')">Status </th>
                            <th onclick="sortProjects('rating')">Rating </th>
                        </tr>
                    </thead>
                    <tbody id="projectsTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
                
                <div class="projects-methodology">
                    <div class="methodology-title">Methodology</div>
                    <div class="methodology-text">Velocity scores (0-100) based on four equally-weighted factors (25% each): Timeline Adherence, Funding Security, Construction Progress, and Operator Stability. Scores are then adjusted for Original Commitment Accountability: projects are permanently penalized for slipping from originally announced production dates (approximately 5 points per year of delay, capped at -30). Projects ahead of schedule receive bonuses (+3 to +8 points). This ensures projects cannot reset the scoreboard by simply announcing new dates. Execution Status: EXECUTING (80+), ON TRACK (65-79), MONITORING (50-64), DISTRESSED (35-49), CRITICAL (&lt;35). Data from company filings, CHIPS Act awards, regulatory documents, WARN notices, and verified news sources.</div>
                    <div class="methodology-text" style="margin-top: 0.75rem;">Velocity scores (5-15 pts) based on 4-factor weighted average. Data verified against SEC filings, federal grant databases, and official announcements.</div>
                    <div class="methodology-text" style="margin-top: 0.5rem; color: #64748b;">For methodology questions or data corrections: research@velocityxp.com</div>
                    <div class="methodology-updated">Last Updated: January 6, 2026 | 49 Active + 1 Terminated | $1.35T Capital Tracked</div>
                </div>
            </div>
            
            <div id="marketsCompare" style="display: none;">
                <div class="compare-container">
                    <div class="compare-selector-panel">
                        <div class="compare-panel-title">Select Projects (Max 4)</div>
                        
                        <div class="compare-filter-tabs">
                            <button class="compare-filter-tab active" data-filter="all">All</button>
                            <button class="compare-filter-tab" data-filter="Semiconductor">Semi</button>
                            <button class="compare-filter-tab" data-filter="Battery">Battery</button>
                            <button class="compare-filter-tab" data-filter="Data Center">Data Ctr</button>
                            <button class="compare-filter-tab" data-filter="Automotive">Auto</button>
                            <button class="compare-filter-tab" data-filter="Pharma">Pharma</button>
                        </div>
                        
                        <div class="compare-project-list" id="compareProjectList"></div>
                        
                        <div class="compare-selected-count" id="compareSelectedCount">0 of 4 selected</div>
                        <button class="compare-clear-btn" id="compareClearBtn">Clear Selection</button>
                    </div>

                    <div class="compare-chart-panel">
                        <div id="compareEmptyState" class="compare-empty-state">
                            <div class="compare-empty-icon"></div>
                            <div class="compare-empty-title">Select Projects to Compare</div>
                            <p>Choose up to 4 projects to see side-by-side metrics comparison</p>
                        </div>
                        
                        <div id="compareChartArea" style="display: none;">
                            <!-- Methodology Banner -->
                            <div class="compare-methodology-banner">
                                <div class="compare-methodology-title">Velocity Score Methodology</div>
                                <div class="compare-methodology-text">
                                    Velocity scores (0-100) measure project execution health based on four equally-weighted factors: 
                                    <strong>Timeline Adherence</strong> (original vs. current target), 
                                    <strong>Funding Security</strong> (committed capital, CHIPS awards), 
                                    <strong>Construction Progress</strong> (phase completion), and 
                                    <strong>Operator Stability</strong> (financial health, strategic commitment). 
                                    Scores updated monthly from public filings, news reports, and regulatory documents.
                                </div>
                            </div>
                            
                            <h2 class="compare-chart-title">Project Comparison</h2>
                            <p class="compare-chart-subtitle">Side-by-side analysis of selected projects</p>
                            
                            <div class="compare-legend-container" id="compareLegend"></div>
                            
                            <h3 style="font-size: 1rem; font-weight: 700; margin: 1.5rem 0 1rem; color: var(--deep-indigo);">Head-to-Head Metrics</h3>
                            <table class="compare-table" id="comparisonTable">
                                <thead>
                                    <tr>
                                        <th>Metric</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            
                            <!-- Data Sources -->
                            <div class="compare-sources">
                                <div class="compare-sources-title">Data Sources</div>
                                <div class="compare-sources-text">
                                    Investment figures from company filings, earnings calls, and official announcements. 
                                    CHIPS Act awards from NIST/Commerce Department. 
                                    Timeline data from SEC filings, environmental permits, and construction reports.
                                    <br><strong>Last Updated:</strong> January 3, 2026
                                </div>
                                <div class="compare-sources-note">
                                    *Stargate $500B represents total JV commitment (OpenAI, SoftBank, Oracle, MGX) through 2029, not a single company investment.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="marketsSectors" style="display: none;">
                <div style="margin-bottom: 1.5rem;">
                    <h2 style="font-size: 1.25rem; font-weight: 700; color: var(--deep-indigo); margin-bottom: 0.5rem;">Sector Performance</h2>
                    <p style="font-size: 0.875rem; color: var(--text-secondary);">Click any sector card to view detailed breakdown and project list.</p>
                </div>
                <div class="sector-grid">
                    <div class="sector-card" onclick="openSectorModal('MACRO_Semiconductor.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Semiconductor</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">58</span>
                                <span class="sector-change negative">-12</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill yellow" style="width: 58%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$580B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot on-track"></span>3</span>
                                <span><span class="status-dot risk"></span>2</span>
                                <span><span class="status-dot distress"></span>5</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Battery.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Battery</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">58</span>
                                <span class="sector-change negative">-9</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill yellow" style="width: 58%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$42B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot risk"></span>9</span>
                                <span><span class="status-dot distress"></span>4</span>
                                <span><span class="status-dot terminated"></span>1</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Data_Center.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Data Center</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">76</span>
                                <span class="sector-change positive">+3</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill green" style="width: 76%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$830B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot on-track"></span>1</span>
                                <span><span class="status-dot risk"></span>4</span>
                                <span><span class="status-dot distress"></span>2</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Automotive.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Automotive</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">62</span>
                                <span class="sector-change negative">-10</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill yellow" style="width: 62%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$38B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot on-track"></span>1</span>
                                <span><span class="status-dot risk"></span>2</span>
                                <span><span class="status-dot distress"></span>4</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Pharma.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Pharmaceutical</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">84</span>
                                <span class="sector-change positive">+2</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill green" style="width: 84%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$19B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot on-track"></span>2</span>
                                <span><span class="status-dot risk"></span>1</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Solar.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Solar</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">90</span>
                                <span class="sector-change positive">+4</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill green" style="width: 90%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$7.3B capital</span>
                            <span class="sector-card-status">
                                <span>All On Track</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Steel.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Steel</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">81</span>
                                <span class="sector-change positive">+3</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill green" style="width: 81%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$11.7B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot on-track"></span>1</span>
                                <span><span class="status-dot risk"></span>2</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Hydrogen.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Hydrogen</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">32</span>
                                <span class="sector-change negative">-15</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill red" style="width: 32%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$8.5B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot distress"></span>2</span>
                            </span>
                        </div>
                    </div>
                    <div class="sector-card" onclick="openSectorModal('MACRO_Energy_Storage.html')">
                        <div class="sector-card-header">
                            <span class="sector-card-name">Energy Storage</span>
                            <div class="sector-score-group">
                                <span class="sector-card-score">82</span>
                                <span class="sector-change positive">+5</span>
                            </div>
                        </div>
                        <div class="sector-card-bar"><div class="sector-card-bar-fill green" style="width: 82%;"></div></div>
                        <div class="sector-card-meta">
                            <span class="sector-card-capital">$0.8B capital</span>
                            <span class="sector-card-status">
                                <span><span class="status-dot risk"></span>1</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--off-white); border-radius: 8px; font-size: 0.8rem; color: var(--text-secondary);">
                    <strong>Data as of Jan 8, 2026.</strong> Aggregated from 49 active projects + 1 terminated across 9 sectors. Sector scores represent capital-weighted average of constituent project velocity scores.
                </div>
            </div>
        </div>
        
        <!-- RISKS PAGE -->
        <div class="page" id="risks">
            <div class="risk-nav">
                <button class="risk-nav-btn active" onclick="showRiskView('warnings')">Early Warnings</button>
                <button class="risk-nav-btn" onclick="showRiskView('policy')">Policy & CHIPS</button>
                <button class="risk-nav-btn" onclick="showRiskView('infrastructure')">Infrastructure</button>
                <button class="risk-nav-btn" onclick="showRiskView('competitive')">Competitive</button>
            </div>
            
            <div id="riskWarnings" class="early-warning-feed">
                <div class="warning-item">
                    <div class="warning-header">
                        <div class="warning-title">Intel Ohio CHIPS Milestone Review Approaching</div>
                        <div class="warning-date">Due: Q2 2025</div>
                    </div>
                    <div class="warning-body">Commerce Department will assess whether Intel has met required milestones for $7.9B award. Given 5-year timeline slip and zero foundry customers, clawback risk is elevated.</div>
                    <div class="warning-meta">
                        <span class="warning-tag">Semiconductor</span>
                        <span class="warning-tag">CHIPS Act</span>
                        <span class="warning-tag">$7.9B at risk</span>
                    </div>
                </div>
                
                <div class="warning-item">
                    <div class="warning-header">
                        <div class="warning-title">Samsung Taylor Strategic Decision Imminent</div>
                        <div class="warning-date">Expected: Q1 2025</div>
                    </div>
                    <div class="warning-body">Samsung board conducting strategic review of foundry business. Equipment installation frozen at 99.6%-complete Taylor facility. Exit from U.S. foundry market possible.</div>
                    <div class="warning-meta">
                        <span class="warning-tag">Semiconductor</span>
                        <span class="warning-tag">Corporate Strategy</span>
                        <span class="warning-tag">$44B commitment</span>
                    </div>
                </div>
                
                <div class="warning-item medium">
                    <div class="warning-header">
                        <div class="warning-title">TSMC Arizona Phase 2 Equipment Installation</div>
                        <div class="warning-date">Target: 2026-2028</div>
                    </div>
                    <div class="warning-body">Phase 1 now in volume production with yields approximately 4 percentage points higher than Taiwan. Phase 2 (3nm) construction complete, equipment installation underway. Phase 3 (2nm) groundbreaking April 2025. Workforce scaling to support 6-fab gigacluster.</div>
                    <div class="warning-meta">
                        <span class="warning-tag">Semiconductor</span>
                        <span class="warning-tag">Expansion</span>
                        <span class="warning-tag">$165B committed</span>
                    </div>
                </div>
                
                <div class="warning-item">
                    <div class="warning-header">
                        <div class="warning-title">Stargate Multi-Site Buildout Accelerating</div>
                        <div class="warning-date">Status: Active</div>
                    </div>
                    <div class="warning-body">Abilene flagship now operational. Five additional U.S. sites announced (TX, NM, OH, WI). Project on track for $500B, 10GW commitment by end of 2025. Power grid integration remains critical path.</div>
                    <div class="warning-meta">
                        <span class="warning-tag">Data Center</span>
                        <span class="warning-tag">AI Infrastructure</span>
                        <span class="warning-tag">7GW planned</span>
                    </div>
                </div>
                
                <div class="warning-item">
                    <div class="warning-header">
                        <div class="warning-title">Plug Power Going Concern Warning</div>
                        <div class="warning-date">Status: Active</div>
                    </div>
                    <div class="warning-body">Auditors issued going concern warning. Cash burn exceeds $200M/quarter with no path to profitability. Rochester green hydrogen facility may not complete.</div>
                    <div class="warning-meta">
                        <span class="warning-tag">Hydrogen</span>
                        <span class="warning-tag">Financial Distress</span>
                        <span class="warning-tag">Bankruptcy risk</span>
                    </div>
                </div>
            </div>
            
            <div id="riskPolicy" style="display: none;">
                <div class="tool-section">
                    <h2 style="margin-bottom: 1rem;">CHIPS Act Status Tracker</h2>
                    <table class="projects-table">
                        <thead>
                            <tr>
                                <th>Project</th>
                                <th>Award Amount</th>
                                <th>Status</th>
                                <th>Risk Level</th>
                                <th>Key Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Intel Ohio</td>
                                <td>$7.9B</td>
                                <td><span class="status-badge at-risk">Finalized</span></td>
                                <td><div class="exposure-risk"><span class="exposure-risk-dot high"></span> High</div></td>
                                <td>2030-31 Production</td>
                            </tr>
                            <tr>
                                <td>TSMC Arizona</td>
                                <td>$6.6B</td>
                                <td><span class="status-badge on-track">Awarded</span></td>
                                <td><div class="exposure-risk"><span class="exposure-risk-dot low"></span> Low</div></td>
                                <td>In Production</td>
                            </tr>
                            <tr>
                                <td>Samsung Taylor</td>
                                <td>$4.7B</td>
                                <td><span class="status-badge at-risk">Finalized</span></td>
                                <td><div class="exposure-risk"><span class="exposure-risk-dot high"></span> High</div></td>
                                <td>2026-27 Target</td>
                            </tr>
                            <tr>
                                <td>Micron NY/ID</td>
                                <td>$6.4B</td>
                                <td><span class="status-badge on-track">Finalized</span></td>
                                <td><div class="exposure-risk"><span class="exposure-risk-dot low"></span> Low</div></td>
                                <td>ID: 2027, NY: 2030</td>
                            </tr>
                            <tr>
                                <td>Wolfspeed NC</td>
                                <td>$750M</td>
                                <td><span class="status-badge distressed">Never Finalized</span></td>
                                <td><div class="exposure-risk"><span class="exposure-risk-dot high"></span> High</div></td>
                                <td>Ch.11 Complete Sept 2025</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="riskInfrastructure" style="display: none;">
                <div class="tool-section">
                    <h2 style="margin-bottom: 1rem;">Grid Capacity Constraints</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Projects facing power interconnection delays or grid capacity limitations.</p>
                    <table class="projects-table">
                        <thead>
                            <tr>
                                <th>Project</th>
                                <th>Power Need</th>
                                <th>Grid Operator</th>
                                <th>Queue Position</th>
                                <th>Est. Delay</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Stargate JV</td>
                                <td>2+ GW</td>
                                <td>ERCOT</td>
                                <td>Pending</td>
                                <td>36+ months</td>
                            </tr>
                            <tr>
                                <td>Meta AI Infrastructure</td>
                                <td>1.5 GW</td>
                                <td>Multiple</td>
                                <td>Various</td>
                                <td>24-36 months</td>
                            </tr>
                            <tr>
                                <td>Microsoft AI</td>
                                <td>1.2 GW</td>
                                <td>Multiple</td>
                                <td>Various</td>
                                <td>24-36 months</td>
                            </tr>
                            <tr>
                                <td>CoreWeave Denton</td>
                                <td>400 MW</td>
                                <td>ERCOT</td>
                                <td>Delayed</td>
                                <td>18+ months</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- TOOLS PAGE -->
        <div class="page" id="tools">
            <div class="tools-section-header">
                <h2 class="tools-section-title">Analysis Tools</h2>
            </div>
            <div class="tools-grid">
                <div class="tool-card" onclick="openCompareModal()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 3h5v5"/><path d="M8 3H3v5"/><path d="M21 3l-7 7"/><path d="M3 3l7 7"/><path d="M16 21h5v-5"/><path d="M8 21H3v-5"/><path d="M21 21l-7-7"/><path d="M3 21l7-7"/></svg></div>
                    <div class="tool-card-title">Compare Projects</div>
                    <div class="tool-card-desc">Select 2-4 projects for side-by-side comparison of velocity scores, timelines, risks, and key metrics.</div>
                </div>
                
                <div class="tool-card" onclick="downloadWeeklyBrief()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></div>
                    <div class="tool-card-title">Export Reports</div>
                    <div class="tool-card-desc">Generate board-ready PDF reports for specific projects, sectors, or your entire watchlist.</div>
                </div>
                
                <div class="tool-card" onclick="toggleMethodology()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10,9 9,9 8,9"/></svg></div>
                    <div class="tool-card-title">Methodology</div>
                    <div class="tool-card-desc">Understand how we calculate velocity scores, rate projects, and generate early warning signals.</div>
                </div>
            </div>
            
            <!-- Advanced Tools Section -->
            <div class="tools-section-header" style="margin-top: 2rem;">
                <h2 class="tools-section-title">Advanced Features</h2>
                <span class="tools-section-badge">Pro</span>
            </div>
            <div class="tools-grid">
                <div class="tool-card premium" onclick="openScenarioModal()">
                    <div class="tool-card-badge">NEW</div>
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></div>
                    <div class="tool-card-title">Scenario Modeling</div>
                    <div class="tool-card-desc">Model "what-if" scenarios to understand how project delays could impact your portfolio or market position.</div>
                </div>
                
                <div class="tool-card premium" onclick="openEarningsCalendar()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
                    <div class="tool-card-title">Earnings Calendar</div>
                    <div class="tool-card-desc">Track upcoming earnings calls and investor days for companies with major infrastructure projects.</div>
                </div>
                
                <div class="tool-card premium" onclick="openPeerBenchmark()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
                    <div class="tool-card-title">Peer Comparison</div>
                    <div class="tool-card-desc">Benchmark projects against sector peers and industry averages for context on relative performance.</div>
                </div>
                
                <div class="tool-card premium" onclick="openAISummary()">
                    <div class="tool-card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10H12V2z"/><path d="M12 2a10 10 0 0 1 10 10"/><circle cx="12" cy="12" r="6"/></svg></div>
                    <div class="tool-card-title">AI Weekly Summary</div>
                    <div class="tool-card-desc">Get an AI-generated executive summary of the week's most important infrastructure developments.</div>
                </div>
            </div>
            
            <!-- API Access Section -->
            <div class="api-section">
                <div class="api-header">
                    <div class="api-title-group">
                        <h3 class="api-title">API Access</h3>
                        <span class="api-badge">Enterprise</span>
                    </div>
                    <p class="api-subtitle">Integrate HCC Velocity data directly into your investment systems and workflows</p>
                </div>
                <div class="api-content">
                    <div class="api-features">
                        <div class="api-feature">
                            <div class="api-feature-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                            </div>
                            <div class="api-feature-text">
                                <span class="api-feature-title">RESTful API</span>
                                <span class="api-feature-desc">JSON endpoints for all project data</span>
                            </div>
                        </div>
                        <div class="api-feature">
                            <div class="api-feature-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                            </div>
                            <div class="api-feature-text">
                                <span class="api-feature-title">Real-time Updates</span>
                                <span class="api-feature-desc">WebSocket feeds for instant alerts</span>
                            </div>
                        </div>
                        <div class="api-feature">
                            <div class="api-feature-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                            </div>
                            <div class="api-feature-text">
                                <span class="api-feature-title">Secure Access</span>
                                <span class="api-feature-desc">OAuth 2.0 authentication</span>
                            </div>
                        </div>
                        <div class="api-feature">
                            <div class="api-feature-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 1 1-9-9"/><polyline points="21 3 21 9 15 9"/></svg>
                            </div>
                            <div class="api-feature-text">
                                <span class="api-feature-title">Historical Data</span>
                                <span class="api-feature-desc">Full time-series back to 2024</span>
                            </div>
                        </div>
                    </div>
                    <div class="api-code-preview">
                        <div class="api-code-header">
                            <span class="api-code-label">Example Request</span>
                            <button class="api-copy-btn" onclick="copyApiExample()">Copy</button>
                        </div>
                        <pre class="api-code"><code>curl -X GET "https://api.nxtvelocity.com/v1/projects" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"

# Response
{
  "data": [
    {
      "id": "SE001",
      "name": "TSMC Arizona",
      "velocity_score": 72.4,
      "status": "at_risk",
      "updated_at": "2025-12-29T09:15:00Z"
    }
  ],
  "meta": { "total": 50, "page": 1 }
}</code></pre>
                    </div>
                </div>
                <div class="api-cta">
                    <button class="api-btn primary" onclick="requestApiAccess()">Request API Access</button>
                    <a href="#" class="api-link">View Documentation</a>
                </div>
            </div>
            
            <!-- Custom Dashboard Section -->
            <div class="custom-dashboard-section">
                <div class="custom-dashboard-header">
                    <h3 class="custom-dashboard-title">Custom Dashboards</h3>
                    <span class="custom-dashboard-badge">Coming Soon</span>
                </div>
                <p class="custom-dashboard-desc">Create personalized views focused on your specific sectors, geographies, or watchlist. Save multiple configurations and switch between them instantly.</p>
                <div class="custom-dashboard-preview">
                    <div class="dashboard-template">
                        <div class="dashboard-template-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                        </div>
                        <span class="dashboard-template-name">Semiconductor Focus</span>
                    </div>
                    <div class="dashboard-template">
                        <div class="dashboard-template-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                        </div>
                        <span class="dashboard-template-name">Texas Projects</span>
                    </div>
                    <div class="dashboard-template">
                        <div class="dashboard-template-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                        </div>
                        <span class="dashboard-template-name">High Risk Only</span>
                    </div>
                    <div class="dashboard-template add-new">
                        <div class="dashboard-template-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                        </div>
                        <span class="dashboard-template-name">Create New</span>
                    </div>
                </div>
                <button class="waitlist-btn" onclick="joinWaitlist()">Join Waitlist</button>
            </div>
            
            <!-- Methodology Section -->
            <div class="methodology-section" id="methodologySection">
                <div class="methodology-header">
                    <h2 class="methodology-title">Velocity Scoring Methodology</h2>
                    <p class="methodology-subtitle">Version 3.0 | Last Updated: January 2026</p>
                </div>
                
                <!-- Industry Baseline Reality -->
                <div style="background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; color: white;">
                    <div style="display: flex; align-items: flex-start; gap: 1rem;">
                        <div style="background: #FDFF66; color: #1e1b4b; padding: 0.5rem 0.75rem; border-radius: 6px; font-weight: 700; font-size: 0.75rem; flex-shrink: 0;">INDUSTRY BASELINE</div>
                        <div>
                            <div style="font-size: 0.9rem; line-height: 1.6;">McKinsey and Oxford research on megaprojects shows <strong>77% exceed budgets by 40% or more</strong>. The average delay across infrastructure megaprojects is <strong>20 months</strong>. Only <strong>8-9% deliver on time and on budget</strong>. Our scoring methodology is calibrated to this reality, not to aspirational corporate timelines.</div>
                            <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 0.5rem;">Sources: McKinsey Global Institute, "Megaprojects: The Good, the Bad, and the Better" (2022). Bent Flyvbjerg, Oxford Major Projects Programme.</div>
                        </div>
                    </div>
                </div>
                
                <div class="methodology-grid">
                    <!-- Overview -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Methodology Overview</h3>
                        <p class="methodology-text" style="margin-bottom: 1rem;">The HCC Velocity Score quantifies infrastructure project execution health on a 0-100 scale. The methodology combines four equally-weighted quantitative factors with a critical adjustment for Original Commitment Accountability. This adjustment ensures projects cannot reset the scoreboard by simply announcing new target dates. Projects are permanently penalized for slipping from originally announced production dates at approximately 5 points per year of delay (capped at -30 points). Projects delivering ahead of schedule receive bonuses of +3 to +8 points.</p>
                        <div style="background: #f8fafc; border-radius: 8px; padding: 1rem; font-family: 'Inter', monospace; font-size: 0.85rem; border: 1px solid #e2e8f0;">
                            <strong>Velocity Score Formula:</strong><br>
                            Base Score = (Timeline Adherence  0.25) + (Funding Security  0.25) + (Construction Progress  0.25) + (Operator Stability  0.25)<br>
                            <strong>Final Score = Base Score + Original Commitment Adjustment (5 to -30 points)</strong>
                        </div>
                    </div>
                    
                    <!-- Scoring Components -->
                    <div class="methodology-card">
                        <h3 class="methodology-card-title">Scoring Components (25% Each)</h3>
                        <div class="methodology-table">
                            <div class="methodology-row header">
                                <span>Component</span>
                                <span>Weight</span>
                                <span>Key Factors</span>
                            </div>
                            <div class="methodology-row">
                                <span><strong>Timeline Adherence</strong></span>
                                <span>25%</span>
                                <span>Current schedule vs. announced dates, milestone completion rate</span>
                            </div>
                            <div class="methodology-row">
                                <span><strong>Funding Security</strong></span>
                                <span>25%</span>
                                <span>Capital committed vs. required, CHIPS/IRA awards, credit ratings</span>
                            </div>
                            <div class="methodology-row">
                                <span><strong>Construction Progress</strong></span>
                                <span>25%</span>
                                <span>Physical completion percentage, permit status, equipment delivery</span>
                            </div>
                            <div class="methodology-row">
                                <span><strong>Operator Stability</strong></span>
                                <span>25%</span>
                                <span>Corporate financial health, management continuity, customer commitments</span>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(253,255,102,0.1); border-radius: 6px; border-left: 3px solid #FDFF66;">
                            <div style="font-size: 0.75rem; color: #64748b;"><strong style="color: #1e1b4b;">Original Commitment Adjustment:</strong> Projects penalized ~5 points per year of delay from original announcement (capped at -30). Intel Ohio announced 2025 production in January 2022 but now targets 2030-31, resulting in a -25 to -30 point adjustment reflecting approximately 5% annual value erosion.</div>
                        </div>
                    </div>
                    
                    <!-- Execution Status Scale -->
                    <div class="methodology-card">
                        <h3 class="methodology-card-title">Execution Status Scale</h3>
                        <div class="rating-scale">
                            <div class="rating-item strong-buy">
                                <span class="rating-range">85-100</span>
                                <span class="rating-label">ON TRACK</span>
                                <span class="rating-desc">Executing within industry norms, delays of 3 years or less</span>
                            </div>
                            <div class="rating-item hold">
                                <span class="rating-range">65-84</span>
                                <span class="rating-label">AT RISK</span>
                                <span class="rating-desc">Material variance requiring monitoring, 4-7 year delays</span>
                            </div>
                            <div class="rating-item sell">
                                <span class="rating-range">35-64</span>
                                <span class="rating-label">DISTRESSED</span>
                                <span class="rating-desc">Significant execution problems, uncertain outcome</span>
                            </div>
                            <div class="rating-item strong-sell">
                                <span class="rating-range">0-34</span>
                                <span class="rating-label">CRITICAL</span>
                                <span class="rating-desc">Project viability in question, potential termination risk</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- RAID Framework -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">RAID Framework for Project Tracking</h3>
                        <p class="methodology-text" style="margin-bottom: 1rem;">Each project is monitored using the RAID framework (Risks, Actions, Issues, Decisions), a project management standard adopted from enterprise PMO practices. This structured approach captures granular intelligence that drives early warning alerts.</p>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                            <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                <div style="font-weight: 700; color: #92400e; margin-bottom: 0.5rem;">RISKS</div>
                                <div style="font-size: 0.75rem; color: #78350f;">Potential future events that could impact timeline or budget. Scored by probability  impact. Examples: regulatory uncertainty, workforce availability, power interconnection delays.</div>
                            </div>
                            <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6;">
                                <div style="font-weight: 700; color: #1e40af; margin-bottom: 0.5rem;">ACTIONS</div>
                                <div style="font-size: 0.75rem; color: #1e3a8a;">Key milestones with announced and verified dates. Tracks groundbreaking, equipment installation, production start, and capacity ramp. Variance analysis identifies early warning signals.</div>
                            </div>
                            <div style="background: #fee2e2; padding: 1rem; border-radius: 8px; border-left: 4px solid #ef4444;">
                                <div style="font-weight: 700; color: #991b1b; margin-bottom: 0.5rem;">ISSUES</div>
                                <div style="font-size: 0.75rem; color: #7f1d1d;">Current problems actively affecting the project. Examples: FERC rejection of interconnection agreement, ICE enforcement disruption, equipment tariff impacts, funding gaps.</div>
                            </div>
                            <div style="background: #d1fae5; padding: 1rem; border-radius: 8px; border-left: 4px solid #10b981;">
                                <div style="font-weight: 700; color: #065f46; margin-bottom: 0.5rem;">DECISIONS</div>
                                <div style="font-size: 0.75rem; color: #064e3b;">Critical choices made by project sponsors or regulators. Examples: site selection, JV partner changes, strategic pivots, government incentive awards.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section-Specific Methodologies -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Section-Specific Methodologies</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                            <div style="background: #f8fafc; padding: 1.25rem; border-radius: 10px; border-left: 4px solid #1e1b4b;">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem;">Regulatory & Community Risk Monitor</h4>
                                <p style="font-size: 0.75rem; color: #475569; line-height: 1.6;">Cases selected based on regulatory significance (FERC precedent), capital scale (Dominion $7.6B rate base, Meta $10B+ project), and documented legal outcomes (court rulings, council votes). Sources limited to official filings, state audit agencies, grid operator reports, and court records. This section does not track all data center approvals or rejections.</p>
                            </div>
                            <div style="background: #f8fafc; padding: 1.25rem; border-radius: 10px; border-left: 4px solid #1e1b4b;">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem;">Workforce Risk Watch</h4>
                                <p style="font-size: 0.75rem; color: #475569; line-height: 1.6;">Project-specific workforce impacts compiled from company statements, regulatory filings (WARN Act), official government data (DHS), and industry surveys (AGC/NCCER). State-level data from AGC 2025 Workforce Survey conducted July-Aug 2025 with 1,400 contractor respondents. Layoff figures reflect announced cuts as of Jan 2026.</p>
                            </div>
                            <div style="background: #f8fafc; padding: 1.25rem; border-radius: 10px; border-left: 4px solid #1e1b4b;">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem;">Terminated Projects</h4>
                                <p style="font-size: 0.75rem; color: #475569; line-height: 1.6;">Projects classified as Terminated when company ceases operations, files for bankruptcy without emergence, or officially cancels announced facility. Distressed projects (e.g., Wolfspeed Chapter 11 with emergence, Ford BlueOval JV restructuring) remain Active with adjusted scores.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Primary Data Sources -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Primary Data Sources</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                            <div class="source-category">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 2px solid #FDFF66;">Federal Government Sources</h4>
                                <ul style="font-size: 0.75rem; color: #475569; list-style: none; padding: 0;">
                                    <li style="margin-bottom: 0.5rem;"> <strong>SEC EDGAR</strong> - 10-K, 10-Q, 8-K filings with material project disclosures</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>CHIPS.gov</strong> - Preliminary Memoranda of Terms (PMTs), award announcements</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>Department of Energy</strong> - Loan Programs Office commitments, IRA credits</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>FERC eLibrary</strong> - Interconnection agreements, rate case filings, rejections</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>EPA</strong> - Environmental impact assessments, air quality permits</li>
                                </ul>
                            </div>
                            <div class="source-category">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 2px solid #FDFF66;">Grid Operator Queue Data</h4>
                                <ul style="font-size: 0.75rem; color: #475569; list-style: none; padding: 0;">
                                    <li style="margin-bottom: 0.5rem;"> <strong>PJM Interconnection</strong> - Queue Scope public database (13 states)</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>ERCOT</strong> - Generation Interconnection Status (GIS) Report, Large Load Queue</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>CAISO</strong> - Cluster 15 queue data, Points of Interconnection Heatmap</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>MISO</strong> - Interconnection Queue public database</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>SPP, NYISO, ISO-NE</strong> - Regional queue databases</li>
                                </ul>
                                <div style="font-size: 0.65rem; color: #94a3b8; margin-top: 0.5rem;">Reference: Lawrence Berkeley National Laboratory "Queued Up" reports (emp.lbl.gov/queues)</div>
                            </div>
                            <div class="source-category">
                                <h4 style="color: #1e1b4b; font-size: 0.85rem; margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 2px solid #FDFF66;">Corporate & Industry Sources</h4>
                                <ul style="font-size: 0.75rem; color: #475569; list-style: none; padding: 0;">
                                    <li style="margin-bottom: 0.5rem;"> <strong>Earnings Calls</strong> - Quarterly transcripts with management commentary</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>Investor Presentations</strong> - Capital expenditure guidance, project timelines</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>Press Releases</strong> - Milestone announcements, partnership disclosures</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>State Economic Development</strong> - Incentive agreements, clawback provisions</li>
                                    <li style="margin-bottom: 0.5rem;"> <strong>County Permit Databases</strong> - Building permits, zoning approvals</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Research & Academic Citations -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Research Foundation & Academic Citations</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                            <div>
                                <h4 style="color: #1e1b4b; font-size: 0.8rem; margin-bottom: 0.75rem;">Megaproject Performance Research</h4>
                                <ul style="font-size: 0.7rem; color: #475569; list-style: none; padding: 0; line-height: 1.6;">
                                    <li style="margin-bottom: 0.75rem;"> <strong>McKinsey Global Institute</strong> (2022): "Megaprojects: The Good, the Bad, and the Better" - 77% of megaprojects exceed budgets by 40%+</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>Bent Flyvbjerg, Oxford</strong>: Major Projects Programme research on megaproject underperformance and optimism bias</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>LBNL Queued Up 2024</strong>: Only 13% of queued generation projects historically reach commercial operation</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>PJM Market Monitor</strong>: 63% of 2025/26 capacity auction price increase attributed to data center load growth</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #1e1b4b; font-size: 0.8rem; margin-bottom: 0.75rem;">Workforce & Regulatory Research</h4>
                                <ul style="font-size: 0.7rem; color: #475569; list-style: none; padding: 0; line-height: 1.6;">
                                    <li style="margin-bottom: 0.75rem;"> <strong>AGC Workforce Survey (Aug 2025)</strong>: 92% of contractors struggling to hire, 28% of firms impacted by immigration enforcement</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>JLARC Virginia (2025)</strong>: Data centers contribute 74,000 jobs, $5.5B labor income, $9.1B GDP annually to Virginia</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>DHS (Sept 2025)</strong>: Hyundai-LG Georgia raid was largest single-site immigration enforcement in DHS history (475 detained)</li>
                                    <li style="margin-bottom: 0.75rem;"> <strong>FERC Orders (2024-2025)</strong>: Amazon/Talen Susquehanna co-location rejected twice, establishing precedent for nuclear arrangements</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Key Findings from Research -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Key Findings from Portfolio Research</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                            <div style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); padding: 1.25rem; border-radius: 10px; border: 1px solid #e2e8f0;">
                                <div style="font-size: 2rem; font-weight: 800; color: #1e1b4b;">16</div>
                                <div style="font-size: 0.8rem; font-weight: 600; color: #475569;">Delayed Projects</div>
                                <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.5rem;">32% of portfolio. Primary causes: Workforce (6), Financial/Demand (6), Strategic Pivot (3), Grid/Power (1)</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); padding: 1.25rem; border-radius: 10px; border: 1px solid #e2e8f0;">
                                <div style="font-size: 2rem; font-weight: 800; color: #1e1b4b;">46%</div>
                                <div style="font-size: 0.8rem; font-weight: 600; color: #475569;">Grid Constrained</div>
                                <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.5rem;">23 projects facing interconnection challenges. Average queue time now 5+ years (up from 2 years in 2008)</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); padding: 1.25rem; border-radius: 10px; border: 1px solid #e2e8f0;">
                                <div style="font-size: 2rem; font-weight: 800; color: #1e1b4b;">2%</div>
                                <div style="font-size: 0.8rem; font-weight: 600; color: #475569;">Workforce Shortage Delays</div>
                                <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.5rem;">Only 1 project (TSMC Arizona) delayed by genuine skills gap. Now resolved and executing ahead of schedule.</div>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(253,255,102,0.1); border-radius: 8px; border-left: 4px solid #FDFF66;">
                            <div style="font-size: 0.75rem; color: #475569;"><strong style="color: #1e1b4b;">Methodology Insight:</strong> The narrative that "workforce shortage is delaying U.S. infrastructure" is not supported by our data. Primary delay drivers are EV demand collapse (battery sector), corporate financial distress (Intel), regulatory/permitting issues (data centers), and lack of customer commitments (Samsung Taylor). Power interconnection constraints affect 10x more projects than workforce issues.</div>
                        </div>
                    </div>
                    
                    <!-- Verification Process -->
                    <div class="methodology-card full-width">
                        <h3 class="methodology-card-title">Seven-Stage Verification Process</h3>
                        <p class="methodology-text" style="margin-bottom: 1rem;">Data flows through seven verification stages before affecting velocity scores or generating alerts. This staged approach balances speed with accuracy.</p>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem;">
                            <div style="background: #1e1b4b; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">1</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Announcement Capture</div>
                            </div>
                            <div style="background: #312e81; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">2</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">SEC Filing Cross-Ref</div>
                            </div>
                            <div style="background: #4338ca; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">3</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Permit Application</div>
                            </div>
                            <div style="background: #4f46e5; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">4</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Queue Monitoring</div>
                            </div>
                            <div style="background: #6366f1; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">5</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Construction Verify</div>
                            </div>
                            <div style="background: #818cf8; color: white; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800; color: #FDFF66;">6</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Progress Tracking</div>
                            </div>
                            <div style="background: #a5b4fc; color: #1e1b4b; padding: 0.75rem 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.25rem; font-weight: 800;">7</div>
                                <div style="font-size: 0.65rem; font-weight: 600;">Score & Alert</div>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; font-size: 0.7rem; color: #64748b;">Discrepancies between announcements and filings raise flags. A $10B project announced in a press release but not mentioned in the next 10-Q suggests conditional or speculative commitment. Data center announced for Q2 should show permit applications by Q3 or status changes to MONITORING.</div>
                    </div>
                    
                    <!-- Update Frequency -->
                    <div class="methodology-card">
                        <h3 class="methodology-card-title">Update Frequency</h3>
                        <div class="update-frequency">
                            <div class="frequency-item">
                                <span class="frequency-type">Real-time</span>
                                <span class="frequency-desc">SEC 8-K filings, material announcements, FERC orders</span>
                            </div>
                            <div class="frequency-item">
                                <span class="frequency-type">Weekly</span>
                                <span class="frequency-desc">Grid queue positions, construction progress, permit activity</span>
                            </div>
                            <div class="frequency-item">
                                <span class="frequency-type">Monthly</span>
                                <span class="frequency-desc">Full score recalculation, RAID log updates, variance analysis</span>
                            </div>
                            <div class="frequency-item">
                                <span class="frequency-type">Quarterly</span>
                                <span class="frequency-desc">Comprehensive reassessment aligned with earnings cycles</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHIPS Act Funding Tracker -->
                    <div class="methodology-card">
                        <h3 class="methodology-card-title">CHIPS Act Funding Status</h3>
                        <div style="font-size: 0.75rem; color: #475569; margin-bottom: 1rem;">Federal awards tracked as funding security input. Source: CHIPS.gov</div>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">Intel</span>
                                <span style="font-size: 0.75rem; color: #f59e0b; font-weight: 700;">$8.5B + 10% equity stake</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">TSMC</span>
                                <span style="font-size: 0.75rem; color: #22c55e; font-weight: 700;">$6.6B (Finalized)</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">Micron</span>
                                <span style="font-size: 0.75rem; color: #22c55e; font-weight: 700;">$6.165B (Finalized)</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">Samsung</span>
                                <span style="font-size: 0.75rem; color: #ef4444; font-weight: 700;">$4.75B (-26% from $6.4B)</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">Texas Instruments</span>
                                <span style="font-size: 0.75rem; color: #22c55e; font-weight: 700;">$1.6B (Disbursing)</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8fafc; border-radius: 6px;">
                                <span style="font-size: 0.75rem; font-weight: 600;">GlobalFoundries</span>
                                <span style="font-size: 0.75rem; color: #22c55e; font-weight: 700;">$1.5B (Disbursing)</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Disclaimer -->
                <div class="methodology-disclaimer" style="margin-top: 2rem;">
                    <strong>Disclaimer:</strong> The HCC Velocity Score is provided for informational purposes only and should not be construed as investment advice. Scores reflect our assessment of project execution risk based on publicly available information and proprietary analysis. All data should be independently verified before making investment decisions. Past performance is not indicative of future results. Methodology subject to periodic refinement as market conditions evolve.
                </div>
                
                <!-- Contact -->
                <div class="methodology-contact" style="margin-top: 1.5rem; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 12px; border-left: 4px solid #1e1b4b;">
                    <div style="font-size: 0.9rem; font-weight: 700; color: #1e1b4b; margin-bottom: 0.75rem;">Methodology Inquiries</div>
                    <div style="font-size: 0.8rem; color: #475569; margin-bottom: 0.75rem;">Our methodology is designed to withstand scrutiny from institutional investors, media organizations, and regulatory bodies. We welcome questions about our scoring approach, data sources, and verification procedures.</div>
                    <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                        <div>
                            <div style="font-size: 0.7rem; color: #94a3b8; margin-bottom: 0.25rem;">Research & Data Corrections</div>
                            <a href="mailto:research@velocityxp.com" style="font-size: 0.85rem; color: #1e1b4b; font-weight: 600; text-decoration: none;">research@velocityxp.com</a>
                        </div>
                        <div>
                            <div style="font-size: 0.7rem; color: #94a3b8; margin-bottom: 0.25rem;">Media Inquiries</div>
                            <a href="mailto:press@velocityxp.com" style="font-size: 0.85rem; color: #1e1b4b; font-weight: 600; text-decoration: none;">press@velocityxp.com</a>
                        </div>
                        <div>
                            <div style="font-size: 0.7rem; color: #94a3b8; margin-bottom: 0.25rem;">Enterprise & API Access</div>
                            <a href="mailto:enterprise@velocityxp.com" style="font-size: 0.85rem; color: #1e1b4b; font-weight: 600; text-decoration: none;">enterprise@velocityxp.com</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Project Modal -->
    <div class="modal-overlay" id="projectModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Project Dashboard</div>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button id="modalViewSummary" onclick="toggleModalView('summary')" class="modal-view-btn active" style="padding: 0.375rem 0.75rem; border: 1px solid #e2e8f0; background: #1e1b4b; color: white; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">Summary</button>
                    <button id="modalViewFull" onclick="toggleModalView('full')" class="modal-view-btn" style="padding: 0.375rem 0.75rem; border: 1px solid #e2e8f0; background: white; color: #1e1b4b; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">Full Dashboard</button>
                    <button class="modal-close" onclick="closeProjectModal()"></button>
                </div>
            </div>
            <div class="modal-body">
                <!-- Summary View -->
                <div id="projectSummaryView" style="padding: 1.5rem;">
                    <div style="display: flex; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="flex: 1; text-align: center; padding: 1rem; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px;">
                            <div style="font-size: 0.7rem; color: rgba(255,255,255,0.7); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Velocity Score</div>
                            <div id="previewVelocity" style="font-size: 3rem; font-weight: 700; line-height: 1; color: #FDFF66;"></div>
                        </div>
                        <div style="flex: 1; text-align: center; padding: 1rem; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px;">
                            <div style="font-size: 0.7rem; color: rgba(255,255,255,0.7); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Status</div>
                            <div id="previewStatus" style="font-size: 1.5rem; font-weight: 700; color: #FDFF66;"></div>
                        </div>
                        <div style="flex: 1; text-align: center; padding: 1rem; background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); border-radius: 12px;">
                            <div style="font-size: 0.7rem; color: rgba(255,255,255,0.7); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Rating</div>
                            <div id="previewRating" style="font-size: 1.5rem; font-weight: 700; color: #FDFF66;"></div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.7rem; color: #64748b; text-transform: uppercase;">Location</div>
                            <div id="previewLocation" style="font-weight: 600; font-size: 1.1rem; margin-top: 0.25rem;"></div>
                        </div>
                        <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.7rem; color: #64748b; text-transform: uppercase;">Sector</div>
                            <div id="previewSector" style="font-weight: 600; font-size: 1.1rem; margin-top: 0.25rem;"></div>
                        </div>
                        <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.7rem; color: #64748b; text-transform: uppercase;">Capital Committed</div>
                            <div id="previewCapital" style="font-weight: 600; font-size: 1.1rem; margin-top: 0.25rem;"></div>
                        </div>
                        <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.7rem; color: #64748b; text-transform: uppercase;">Dashboard File</div>
                            <div id="previewFile" style="font-weight: 600; font-size: 0.9rem; margin-top: 0.25rem; word-break: break-all;"></div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button onclick="toggleModalView('full')" style="flex: 1; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; background: #1e1b4b; color: white; padding: 0.875rem 1.5rem; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; font-size: 0.95rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>
                            View Full RAID Dashboard
                        </button>
                        <button onclick="addToWatchlistFromModal()" style="display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; background: white; border: 2px solid #1e1b4b; color: #1e1b4b; padding: 0.875rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>
                            Watchlist
                        </button>
                    </div>
                    
                    <div style="margin-top: 1rem; padding: 0.75rem; background: #fffbeb; border: 1px solid #fcd34d; border-radius: 8px; font-size: 0.8rem; color: #92400e;">
                        <strong>Tip:</strong> Click "Full Dashboard" above or switch to "Full Dashboard" view to see the complete RAID analysis including risks, actions, issues, and decisions.
                    </div>
                </div>
                
                <!-- Full Dashboard View (iframe) -->
                <div id="projectFullView" style="display: none; height: 100%;">
                    <div id="iframeLoading" style="display: flex; align-items: center; justify-content: center; height: 200px; color: #64748b;">
                        <div style="text-align: center;">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="animation: spin 1s linear infinite; margin-bottom: 0.5rem;"><circle cx="12" cy="12" r="10" stroke-opacity="0.25"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg>
                            <div>Loading dashboard...</div>
                        </div>
                    </div>
                    <iframe id="projectIframe" style="width: 100%; height: calc(70vh - 60px); border: none; display: none;" onload="onIframeLoad()" onerror="onIframeError()"></iframe>
                    <div id="iframeError" style="display: none; padding: 2rem; text-align: center; color: #64748b;">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" style="margin-bottom: 1rem;"><circle cx="12" cy="12" r="10"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>
                        <h3 style="color: #1e1b4b; margin-bottom: 0.5rem;">Dashboard Not Available</h3>
                        <p style="margin-bottom: 1rem;">The RAID dashboard file could not be loaded in this view.</p>
                        <p style="font-size: 0.85rem; margin-bottom: 1rem;">This typically happens when viewing from Claude's file preview. To access the full dashboards:</p>
                        <ol style="text-align: left; max-width: 400px; margin: 0 auto 1rem; font-size: 0.85rem;">
                            <li style="margin-bottom: 0.5rem;">Download all project files to a local folder</li>
                            <li style="margin-bottom: 0.5rem;">Open NXT_EXECUTIVE_DASHBOARD.html in your browser</li>
                            <li>The RAID dashboards will load correctly when all files are in the same folder</li>
                        </ol>
                        <button onclick="toggleModalView('summary')" style="background: #1e1b4b; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Back to Summary</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Subscribe Modal -->
    <div class="modal-overlay" id="subscribeModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <div class="modal-title">Subscribe to Alerts</div>
                <button class="modal-close" onclick="closeSubscribeModal()"></button>
            </div>
            <div class="modal-body-content">
                <p class="modal-description">Receive early warning alerts when project status changes or key milestones are at risk.</p>
                
                <div class="subscribe-form">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-input" placeholder="your@email.com" id="subscribeEmail">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Alert Preferences</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" checked>
                                <span class="checkbox-label">Critical Alerts (Status changes to Distressed)</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" checked>
                                <span class="checkbox-label">Weekly Summary Brief</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" checked>
                                <span class="checkbox-label">CHIPS Act Updates</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox">
                                <span class="checkbox-label">All Project Updates (Daily)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Sectors of Interest</label>
                        <div class="tag-select">
                            <span class="tag-option selected">Semiconductor</span>
                            <span class="tag-option selected">Data Center</span>
                            <span class="tag-option">Battery</span>
                            <span class="tag-option">Automotive</span>
                            <span class="tag-option">Pharma</span>
                            <span class="tag-option">Solar</span>
                        </div>
                    </div>
                    
                    <button class="submit-btn" onclick="submitSubscription()">Subscribe Now</button>
                    <p class="form-disclaimer">You can unsubscribe at any time. We respect your privacy.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Alerts Panel -->
    <div class="alerts-panel" id="alertsPanel">
        <div class="alerts-panel-header">
            <h3 class="alerts-panel-title">Active Alerts</h3>
            <button class="alerts-panel-close" onclick="closeAlertsPanel()"></button>
        </div>
        <div class="alerts-panel-filters">
            <button class="alert-filter active" data-filter="all">All (3)</button>
            <button class="alert-filter" data-filter="critical">Critical (2)</button>
            <button class="alert-filter" data-filter="warning">Warning (1)</button>
        </div>
        <div class="alerts-panel-list">
            <div class="alert-panel-item critical">
                <div class="alert-panel-badge">CRITICAL</div>
                <div class="alert-panel-content">
                    <div class="alert-panel-title">Samsung Taylor: Strategic Review</div>
                    <div class="alert-panel-text">Equipment installation frozen. Board decision expected Q1 2025.</div>
                    <div class="alert-panel-meta">
                        <span class="alert-panel-time">2 hours ago</span>
                        <a href="#" onclick="openProjectModal('SE003_Samsung_Taylor_RAID.html'); closeAlertsPanel();">View Project</a>
                    </div>
                </div>
            </div>
            <div class="alert-panel-item critical">
                <div class="alert-panel-badge">CRITICAL</div>
                <div class="alert-panel-content">
                    <div class="alert-panel-title">Intel Ohio: CHIPS Review Approaching</div>
                    <div class="alert-panel-text">Q2 2025 milestone review. $8.5B at risk of clawback.</div>
                    <div class="alert-panel-meta">
                        <span class="alert-panel-time">1 day ago</span>
                        <a href="#" onclick="openProjectModal('SE002_Intel_Ohio_RAID.html'); closeAlertsPanel();">View Project</a>
                    </div>
                </div>
            </div>
            <div class="alert-panel-item warning">
                <div class="alert-panel-badge">WARNING</div>
                <div class="alert-panel-content">
                    <div class="alert-panel-title">TSMC Arizona: First Silicon Target</div>
                    <div class="alert-panel-text">H1 2025 target approaching. Yield ramp risk elevated.</div>
                    <div class="alert-panel-meta">
                        <span class="alert-panel-time">3 days ago</span>
                        <a href="#" onclick="openProjectModal('SE001_TSMC_Arizona_RAID.html'); closeAlertsPanel();">View Project</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="alerts-panel-footer">
            <a href="#" onclick="switchToPage('risks'); closeAlertsPanel();">View All Risks</a>
        </div>
    </div>
    
    <!-- Download Progress Modal -->
    <div class="modal-overlay" id="downloadModal">
        <div class="modal-content modal-tiny">
            <div class="download-progress">
                <div class="download-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                </div>
                <div class="download-text" id="downloadText">Generating PDF...</div>
                <div class="download-bar">
                    <div class="download-bar-fill" id="downloadBarFill"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Share Modal -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <div class="modal-title">Share Dashboard</div>
                <button class="modal-close" onclick="closeShareModal()"></button>
            </div>
            <div class="modal-body-content">
                <div class="share-options">
                    <div class="share-option" onclick="copyShareLink()">
                        <div class="share-option-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                        </div>
                        <div class="share-option-text">
                            <span class="share-option-title">Copy Link</span>
                            <span class="share-option-desc">Share a link to this dashboard</span>
                        </div>
                    </div>
                    <div class="share-option" onclick="emailReport()">
                        <div class="share-option-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                        </div>
                        <div class="share-option-text">
                            <span class="share-option-title">Email Report</span>
                            <span class="share-option-desc">Send the weekly brief via email</span>
                        </div>
                    </div>
                    <div class="share-option" onclick="scheduleReport()">
                        <div class="share-option-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                        </div>
                        <div class="share-option-text">
                            <span class="share-option-title">Schedule Reports</span>
                            <span class="share-option-desc">Set up recurring email delivery</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <div class="modal-title">Sign In to HCC Velocity</div>
                <button class="modal-close" onclick="closeLoginModal()"></button>
            </div>
            <div class="modal-body-content">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
                    <button class="auth-tab" onclick="switchAuthTab('register')">Create Account</button>
                </div>
                
                <div class="auth-form" id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="you@company.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="">
                    </div>
                    <div class="form-row">
                        <label class="checkbox-item">
                            <input type="checkbox" id="rememberMe" checked>
                            <span class="checkbox-label">Remember me</span>
                        </label>
                        <a href="#" class="form-link">Forgot password?</a>
                    </div>
                    <button class="submit-btn" onclick="handleLogin()">Sign In</button>
                    
                    <div class="auth-divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-auth">
                        <button class="social-btn google" onclick="socialLogin('google')">
                            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                            Google
                        </button>
                        <button class="social-btn microsoft" onclick="socialLogin('microsoft')">
                            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#F25022" d="M1 1h10v10H1z"/><path fill="#00A4EF" d="M1 13h10v10H1z"/><path fill="#7FBA00" d="M13 1h10v10H13z"/><path fill="#FFB900" d="M13 13h10v10H13z"/></svg>
                            Microsoft
                        </button>
                    </div>
                </div>
                
                <div class="auth-form" id="registerForm" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="registerName" placeholder="John Smith">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Work Email</label>
                        <input type="email" class="form-input" id="registerEmail" placeholder="you@company.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company</label>
                        <input type="text" class="form-input" id="registerCompany" placeholder="Acme Corp">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="registerPassword" placeholder="Min 8 characters">
                    </div>
                    <button class="submit-btn" onclick="handleRegister()">Create Account</button>
                    <p class="form-disclaimer">By creating an account, you agree to our Terms of Service and Privacy Policy.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Preferences Modal -->
    <div class="modal-overlay" id="preferencesModal">
        <div class="modal-content modal-medium">
            <div class="modal-header">
                <div class="modal-title">Preferences</div>
                <button class="modal-close" onclick="closePreferencesModal()"></button>
            </div>
            <div class="modal-body-content">
                <div class="prefs-section">
                    <h4 class="prefs-section-title">Display</h4>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Compact View</span>
                            <span class="prefs-desc">Show more data with less spacing</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="prefCompactView" onchange="Preferences.set('compactView', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Chart Animations</span>
                            <span class="prefs-desc">Enable smooth transitions on charts</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="prefChartAnimations" checked onchange="Preferences.set('chartAnimations', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Default Page</span>
                            <span class="prefs-desc">Page to show on load</span>
                        </div>
                        <select class="prefs-select" id="prefDefaultPage" onchange="Preferences.set('defaultPage', this.value)">
                            <option value="home">Home</option>
                            <option value="portfolio">Portfolio</option>
                            <option value="markets">Markets</option>
                            <option value="risks">Risks</option>
                        </select>
                    </div>
                </div>
                
                <div class="prefs-section">
                    <h4 class="prefs-section-title">Data & Refresh</h4>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Auto Refresh</span>
                            <span class="prefs-desc">Automatically update data</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="prefAutoRefresh" checked onchange="Preferences.set('autoRefresh', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Refresh Interval</span>
                            <span class="prefs-desc">How often to check for updates</span>
                        </div>
                        <select class="prefs-select" id="prefRefreshInterval" onchange="Preferences.set('refreshInterval', parseInt(this.value))">
                            <option value="15">15 seconds</option>
                            <option value="30" selected>30 seconds</option>
                            <option value="60">1 minute</option>
                            <option value="300">5 minutes</option>
                        </select>
                    </div>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Table Page Size</span>
                            <span class="prefs-desc">Rows per page in tables</span>
                        </div>
                        <select class="prefs-select" id="prefTablePageSize" onchange="Preferences.set('tablePageSize', parseInt(this.value))">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
                
                <div class="prefs-section">
                    <h4 class="prefs-section-title">Notifications</h4>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">In-App Alerts</span>
                            <span class="prefs-desc">Show notification banners</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="prefAlertsEnabled" checked onchange="Preferences.set('alertsEnabled', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="prefs-row">
                        <div class="prefs-label">
                            <span class="prefs-name">Email Digest</span>
                            <span class="prefs-desc">Frequency of email summaries</span>
                        </div>
                        <select class="prefs-select" id="prefEmailDigest" onchange="Preferences.set('emailDigest', this.value)">
                            <option value="none">None</option>
                            <option value="daily">Daily</option>
                            <option value="weekly" selected>Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                </div>
                
                <div class="prefs-actions">
                    <button class="prefs-reset-btn" onclick="Preferences.reset(); showNotification('Preferences reset to defaults', 'info');">Reset to Defaults</button>
                    <button class="prefs-save-btn" onclick="closePreferencesModal(); showNotification('Preferences saved', 'success');">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer" style="text-align: center;">
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand-section" style="display: flex; align-items: center; gap: 0.75rem;">
                    <!-- Velocity Logo -->
                    <img src="Velocity_Transparent_Logo.svg" alt="Velocity" style="height: 36px; width: auto;">
                    <!-- Yellow brand bar -->
                    <div style="width: 6px; height: 28px; background: var(--electric-yellow);"></div>
                    <!-- HCC Logo -->
                    <img src="New_HCC_Logo.svg" alt="HCC" style="height: 70px; width: auto; margin-left: 16px; transform: scaleX(1.3); transform-origin: left center;">
                </div>
                <div class="footer-links-section">
                    <a href="#" onclick="switchToPage('tools')">Methodology</a>
                    <a href="#">API Access</a>
                    <a href="mailto:press@velocityxp.com">Press Inquiries</a>
                    <a href="#">Contact</a>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-disclaimer">Data provided for informational purposes only. Not investment advice.</div>
                <div class="footer-copyright"> 2025 Velocity. All rights reserved.</div>
            </div>
        </div>
    </footer>
    
    <script>
        // Global error handler
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            // Suppress all script errors to prevent console spam
            return true;
        };
        
        // =====================================================
        // NXT VELOCITY REPORT - CORE APPLICATION
        // =====================================================
        
        // =====================================================
        // API CONFIGURATION & REAL-TIME DATA FEEDS
        // =====================================================
        const API_CONFIG = {
            baseUrl: 'https://api.nxtvelocity.com/v1',
            wsUrl: 'wss://ws.nxtvelocity.com/v1/stream',
            version: '1.0.0',
            timeout: 30000
        };
        
        // API Client
        const NxtAPI = {
            token: null,
            
            async request(endpoint, options = {}) {
                const url = `${API_CONFIG.baseUrl}${endpoint}`;
                const headers = {
                    'Content-Type': 'application/json',
                    ...(this.token && { 'Authorization': `Bearer ${this.token}` }),
                    ...options.headers
                };
                
                try {
                    const response = await fetch(url, {
                        ...options,
                        headers,
                        timeout: API_CONFIG.timeout
                    });
                    
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Request failed:', error);
                    // Return cached data in demo mode
                    return this.getCachedData(endpoint);
                }
            },
            
            getCachedData(endpoint) {
                // Demo mode cached data
                const cache = {
                    '/portfolio/summary': {
                        capital: 1270000000000,
                        projects: 50,
                        velocity: 66,
                        atRisk: 68,
                        updatedAt: new Date().toISOString()
                    },
                    '/projects': allProjects,
                    '/alerts': [
                        { id: 1, type: 'critical', title: 'Samsung Taylor', message: 'Strategic review announced' },
                        { id: 2, type: 'critical', title: 'Intel Ohio', message: 'CHIPS review approaching' },
                        { id: 3, type: 'warning', title: 'TSMC Arizona', message: 'First silicon target H1 2025' }
                    ]
                };
                return cache[endpoint] || null;
            },
            
            // Portfolio endpoints
            async getPortfolio() { return this.request('/portfolio/summary'); },
            async getProjects() { return this.request('/projects'); },
            async getProject(id) { return this.request(`/projects/${id}`); },
            async getAlerts() { return this.request('/alerts'); },
            async getSectors() { return this.request('/sectors'); },
            
            // User endpoints
            async login(email, password) { return this.request('/auth/login', { method: 'POST', body: JSON.stringify({ email, password }) }); },
            async register(data) { return this.request('/auth/register', { method: 'POST', body: JSON.stringify(data) }); },
            async getUser() { return this.request('/user/profile'); },
            async updatePreferences(prefs) { return this.request('/user/preferences', { method: 'PUT', body: JSON.stringify(prefs) }); }
        };
        
        // =====================================================
        // REAL-TIME DATA FEED (WebSocket)
        // =====================================================
        class LiveDataFeed {
            constructor() {
                this.ws = null;
                this.subscribers = new Map();
                this.reconnectAttempts = 0;
                this.maxReconnectAttempts = 5;
                this.isConnected = false;
            }
            
            connect() {
                try {
                    // In production, this would be a real WebSocket
                    // this.ws = new WebSocket(API_CONFIG.wsUrl);
                    // For demo, simulate with intervals
                    this.simulateLiveData();
                    this.isConnected = true;
                    this.updateConnectionStatus(true);
                } catch (error) {
                    console.error('WebSocket connection failed:', error);
                    this.scheduleReconnect();
                }
            }
            
            simulateLiveData() {
                // Simulate real-time updates every 30 seconds
                setInterval(() => {
                    if (!this.isConnected) return;
                    
                    // Update timestamp
                    const timestamp = document.querySelector('.freshness-timestamp');
                    if (timestamp) {
                        const now = new Date();
                        timestamp.textContent = now.toLocaleString('en-US', {
                            month: 'short', day: 'numeric', year: 'numeric',
                            hour: '2-digit', minute: '2-digit', second: '2-digit',
                            timeZoneName: 'short'
                        });
                    }
                    
                    // Simulate velocity fluctuation
                    const velocityEl = document.querySelector('.executive-kpi.highlight .executive-kpi-value');
                    if (velocityEl) {
                        const baseVelocity = 67.2;
                        const fluctuation = (Math.random() - 0.5) * 0.4;
                        const newVelocity = Math.round(baseVelocity + fluctuation);
                        velocityEl.textContent = newVelocity;
                    }
                    
                    // Notify subscribers
                    this.notifySubscribers('velocityUpdate', { velocity: 66 });
                }, 30000);
                
                // Simulate occasional alerts
                setInterval(() => {
                    if (Math.random() < 0.1) { // 10% chance every minute
                        this.notifySubscribers('newAlert', {
                            type: 'info',
                            message: 'New data available'
                        });
                    }
                }, 60000);
            }
            
            subscribe(event, callback) {
                if (!this.subscribers.has(event)) {
                    this.subscribers.set(event, []);
                }
                this.subscribers.get(event).push(callback);
            }
            
            notifySubscribers(event, data) {
                if (this.subscribers.has(event)) {
                    this.subscribers.get(event).forEach(cb => cb(data));
                }
            }
            
            updateConnectionStatus(connected) {
                const dot = document.querySelector('.freshness-dot');
                const text = document.querySelector('.freshness-text');
                if (dot && text) {
                    if (connected) {
                        dot.style.background = 'var(--green)';
                        text.textContent = 'Live';
                        text.style.color = 'var(--green)';
                    } else {
                        dot.style.background = 'var(--yellow)';
                        text.textContent = 'Reconnecting...';
                        text.style.color = 'var(--yellow)';
                    }
                }
            }
            
            scheduleReconnect() {
                if (this.reconnectAttempts >= this.maxReconnectAttempts) {
                    this.updateConnectionStatus(false);
                    return;
                }
                this.reconnectAttempts++;
                setTimeout(() => this.connect(), 5000 * this.reconnectAttempts);
            }
            
            disconnect() {
                this.isConnected = false;
                if (this.ws) this.ws.close();
            }
        }
        
        const liveFeed = new LiveDataFeed();
        
        // =====================================================
        // USER AUTHENTICATION & SESSION MANAGEMENT
        // =====================================================
        const AuthManager = {
            user: null,
            
            init() {
                // Check for existing session
                const savedUser = localStorage.getItem('nxt_user');
                const savedToken = localStorage.getItem('nxt_token');
                
                if (savedUser && savedToken) {
                    this.user = JSON.parse(savedUser);
                    NxtAPI.token = savedToken;
                    this.updateUI();
                }
            },
            
            async login(email, password) {
                try {
                    // Demo mode - simulate login
                    const user = {
                        id: 'user_' + Date.now(),
                        email: email,
                        name: email.split('@')[0],
                        plan: 'professional',
                        createdAt: new Date().toISOString()
                    };
                    const token = 'demo_token_' + Math.random().toString(36).substr(2);
                    
                    this.user = user;
                    NxtAPI.token = token;
                    
                    localStorage.setItem('nxt_user', JSON.stringify(user));
                    localStorage.setItem('nxt_token', token);
                    
                    this.updateUI();
                    closeLoginModal();
                    showNotification('Welcome back, ' + user.name + '!', 'success');
                    
                    return { success: true, user };
                } catch (error) {
                    showNotification('Login failed. Please try again.', 'error');
                    return { success: false, error };
                }
            },
            
            async register(data) {
                try {
                    const user = {
                        id: 'user_' + Date.now(),
                        email: data.email,
                        name: data.name,
                        company: data.company,
                        plan: 'trial',
                        createdAt: new Date().toISOString()
                    };
                    const token = 'demo_token_' + Math.random().toString(36).substr(2);
                    
                    this.user = user;
                    NxtAPI.token = token;
                    
                    localStorage.setItem('nxt_user', JSON.stringify(user));
                    localStorage.setItem('nxt_token', token);
                    
                    this.updateUI();
                    closeLoginModal();
                    showNotification('Account created! Welcome to HCC Velocity.', 'success');
                    
                    return { success: true, user };
                } catch (error) {
                    return { success: false, error };
                }
            },
            
            logout() {
                this.user = null;
                NxtAPI.token = null;
                localStorage.removeItem('nxt_user');
                localStorage.removeItem('nxt_token');
                this.updateUI();
                showNotification('You have been logged out.', 'info');
            },
            
            isAuthenticated() {
                return !!this.user;
            },
            
            updateUI() {
                const userSection = document.getElementById('userSection');
                const loginBtn = document.getElementById('loginBtn');
                
                if (this.user) {
                    if (userSection) {
                        userSection.innerHTML = `
                            <div class="user-menu" onclick="toggleUserDropdown()">
                                <div class="user-avatar">${this.user.name.charAt(0).toUpperCase()}</div>
                                <span class="user-name">${this.user.name}</span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                            </div>
                            <div class="user-dropdown" id="userDropdown">
                                <div class="user-dropdown-header">
                                    <span class="user-dropdown-name">${this.user.name}</span>
                                    <span class="user-dropdown-email">${this.user.email}</span>
                                    <span class="user-dropdown-plan">${this.user.plan} plan</span>
                                </div>
                                <div class="user-dropdown-items">
                                    <a href="#" onclick="openPreferencesModal()">Preferences</a>
                                    <a href="#" onclick="openWatchlistManager()">My Watchlist</a>
                                    <a href="#" onclick="openApiKeysModal()">API Keys</a>
                                    <a href="#" onclick="AuthManager.logout()">Sign Out</a>
                                </div>
                            </div>
                        `;
                        userSection.style.display = 'block';
                    }
                    if (loginBtn) loginBtn.style.display = 'none';
                } else {
                    if (userSection) userSection.style.display = 'none';
                    if (loginBtn) loginBtn.style.display = 'flex';
                }
            }
        };
        
        // =====================================================
        // PERSISTENT PREFERENCES
        // =====================================================
        const Preferences = {
            defaults: {
                theme: 'light',
                compactView: false,
                defaultPage: 'home',
                alertsEnabled: true,
                emailDigest: 'weekly',
                watchlist: [],
                favoritesSectors: ['Semiconductor', 'Data Center'],
                tablePageSize: 25,
                chartAnimations: true,
                autoRefresh: true,
                refreshInterval: 30
            },
            
            get(key) {
                const prefs = this.getAll();
                return prefs[key] !== undefined ? prefs[key] : this.defaults[key];
            },
            
            set(key, value) {
                const prefs = this.getAll();
                prefs[key] = value;
                localStorage.setItem('nxt_preferences', JSON.stringify(prefs));
                this.applyPreference(key, value);
            },
            
            getAll() {
                const saved = localStorage.getItem('nxt_preferences');
                return saved ? { ...this.defaults, ...JSON.parse(saved) } : { ...this.defaults };
            },
            
            reset() {
                localStorage.removeItem('nxt_preferences');
                Object.keys(this.defaults).forEach(key => {
                    this.applyPreference(key, this.defaults[key]);
                });
            },
            
            applyPreference(key, value) {
                switch (key) {
                    case 'theme':
                        document.body.setAttribute('data-theme', value);
                        break;
                    case 'compactView':
                        document.body.classList.toggle('compact-view', value);
                        break;
                    case 'chartAnimations':
                        // Charts disabled - preference has no effect
                        break;
                }
            },
            
            applyAll() {
                const prefs = this.getAll();
                Object.keys(prefs).forEach(key => {
                    this.applyPreference(key, prefs[key]);
                });
            },
            
            // Watchlist management
            addToWatchlist(projectId) {
                const watchlist = this.get('watchlist');
                if (!watchlist.includes(projectId)) {
                    watchlist.push(projectId);
                    this.set('watchlist', watchlist);
                    showNotification('Added to watchlist', 'success');
                }
            },
            
            removeFromWatchlist(projectId) {
                let watchlist = this.get('watchlist');
                watchlist = watchlist.filter(id => id !== projectId);
                this.set('watchlist', watchlist);
                showNotification('Removed from watchlist', 'success');
            },
            
            isInWatchlist(projectId) {
                return this.get('watchlist').includes(projectId);
            }
        };
        
        // =====================================================
        // MOBILE APP FEATURES (PWA Support)
        // =====================================================
        const MobileApp = {
            init() {
                // Register service worker for offline support
                if ('serviceWorker' in navigator) {
                    // navigator.serviceWorker.register('/sw.js');
                }
                
                // Handle install prompt
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    this.deferredPrompt = e;
                    this.showInstallBanner();
                });
                
                // Detect if running as installed app
                if (window.matchMedia('(display-mode: standalone)').matches) {
                    document.body.classList.add('pwa-mode');
                }
                
                // Handle orientation changes
                window.addEventListener('orientationchange', () => {
                    this.handleOrientationChange();
                });
                
                // Add touch gestures
                this.initTouchGestures();
            },
            
            showInstallBanner() {
                if (this.deferredPrompt && !localStorage.getItem('pwa_dismissed')) {
                    const banner = document.createElement('div');
                    banner.className = 'pwa-install-banner';
                    banner.innerHTML = `
                        <div class="pwa-banner-content">
                            <div class="pwa-banner-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            </div>
                            <div class="pwa-banner-text">
                                <strong>Install HCC Velocity</strong>
                                <span>Get the full mobile experience</span>
                            </div>
                        </div>
                        <div class="pwa-banner-actions">
                            <button onclick="MobileApp.install()">Install</button>
                            <button onclick="MobileApp.dismissBanner()">Not now</button>
                        </div>
                    `;
                    document.body.appendChild(banner);
                    setTimeout(() => banner.classList.add('show'), 100);
                }
            },
            
            async install() {
                if (this.deferredPrompt) {
                    this.deferredPrompt.prompt();
                    const { outcome } = await this.deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        showNotification('App installed successfully!', 'success');
                    }
                    this.deferredPrompt = null;
                    this.dismissBanner();
                }
            },
            
            dismissBanner() {
                const banner = document.querySelector('.pwa-install-banner');
                if (banner) {
                    banner.classList.remove('show');
                    setTimeout(() => banner.remove(), 300);
                }
                localStorage.setItem('pwa_dismissed', 'true');
            },
            
            handleOrientationChange() {
                // Adjust charts on orientation change
                setTimeout(() => {
                    if (typeof initializeCharts === 'function') {
                        // Reinitialize charts for new dimensions
                    }
                }, 300);
            },
            
            initTouchGestures() {
                let touchStartX = 0;
                let touchEndX = 0;
                
                document.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                }, false);
                
                document.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    this.handleSwipe();
                }, false);
                
                this.handleSwipe = () => {
                    const diff = touchStartX - touchEndX;
                    if (Math.abs(diff) > 100) {
                        // Swipe detected
                        const alertsPanel = document.getElementById('alertsPanel');
                        if (diff > 0 && alertsPanel && !alertsPanel.classList.contains('active')) {
                            // Swipe left - open alerts
                            // openAlertsPanel();
                        } else if (diff < 0 && alertsPanel && alertsPanel.classList.contains('active')) {
                            // Swipe right - close alerts
                            closeAlertsPanel();
                        }
                    }
                };
            }
        };
        
        // =====================================================
        // NAVIGATION & PAGE MANAGEMENT
        // =====================================================
        // Project Data - Updated Jan 8, 2026 with web-verified information
                const allProjects = [
            // SEMICONDUCTOR (11 projects - added SK Hynix Indiana)
            { name: 'Texas Instruments Sherman', location: 'Sherman, TX', sector: 'Semiconductor', capital: '$60B+', velocity: 88, status: 'Producing', rating: 'EXECUTING', phase: 'SM1 Online Dec 2025', chipsAward: '$1.6B', file: 'SE009_Texas_Instruments_RAID.html' },
            { name: 'TSMC Arizona', location: 'Phoenix, AZ', sector: 'Semiconductor', capital: '$165B', velocity: 85, status: 'Producing', rating: 'EXECUTING', phase: 'Fab 1 4nm Volume', chipsAward: '$6.6B', file: 'SE001_TSMC_Arizona_RAID.html' },
            { name: 'Micron Idaho', location: 'Boise, ID', sector: 'Semiconductor', capital: '$200B US', velocity: 55, status: '2yr Behind', rating: 'DISTRESSED', phase: 'Fab 1  mid-2027', chipsAward: '$6.4B', file: 'SE010_Micron_Idaho_RAID.html' },
            { name: 'GlobalFoundries Malta', location: 'Malta, NY + VT', sector: 'Semiconductor', capital: '$16B', velocity: 45, status: '2-3yr Delayed', rating: 'DISTRESSED', phase: 'Construction 2025', chipsAward: '$1.5B', file: 'SE004_GlobalFoundries_Malta_RAID.html' },
            { name: 'Applied Materials EPIC', location: 'Sunnyvale, CA', sector: 'Semiconductor', capital: '$4B', velocity: 82, status: 'Executing', rating: 'AT RISK', phase: 'Target 2026', chipsAward: '$', file: 'SE005_Applied_Materials_RAID.html' },
            { name: 'Polar Semiconductor', location: 'Bloomington, MN', sector: 'Semiconductor', capital: '$525M', velocity: 85, status: 'Executing', rating: 'ON TRACK', phase: 'First CHIPS Awardee', chipsAward: '$123M', file: 'SE007_Polar_Semiconductor_RAID.html' },
            { name: 'SK Hynix Indiana', location: 'West Lafayette, IN', sector: 'Semiconductor', capital: '$3.87B', velocity: 82, status: 'Executing', rating: 'AT RISK', phase: 'H2 2028 Target', chipsAward: '$458M', file: 'SE011_SK_Hynix_Indiana_RAID.html' },
            { name: 'Micron New York', location: 'Clay, NY', sector: 'Semiconductor', capital: '$100B', velocity: 45, status: '2-3yr Behind', rating: 'DISTRESSED', phase: 'Fab 1  Q3 2030', chipsAward: '$6.165B', file: 'SE008_Micron_NY_RAID.html' },
            { name: 'Samsung Taylor', location: 'Taylor, TX', sector: 'Semiconductor', capital: '$44B', velocity: 35, status: '2yr Behind Original', rating: 'DISTRESSED', phase: '2026-27 (was 2024)', chipsAward: '$4.745B', file: 'SE003_Samsung_Taylor_RAID.html' },
            { name: 'Intel Ohio', location: 'New Albany, OH', sector: 'Semiconductor', capital: '$28B', velocity: 32, status: '5yr Behind Original', rating: 'CRITICAL', phase: '2030-31 (was 2025)', chipsAward: '$1.5B OH', file: 'SE002_Intel_Ohio_RAID.html' },
            { name: 'Wolfspeed NC', location: 'Siler City, NC', sector: 'Semiconductor', capital: '$5B', velocity: 72, status: 'Post-Ch.11 Recovery', rating: 'ON TRACK', phase: 'Prod June 2025', chipsAward: '$0', file: 'SE006_Wolfspeed_NC_RAID.html' },
            
            // DATA CENTER (7 projects) - Updated Jan 8, 2026
            { name: 'Apple Data Centers', location: 'Multiple', sector: 'Data Center', capital: '$600B 4-year', velocity: 85, status: 'Major Expansion', rating: 'EXECUTING', phase: 'Expansion', chipsAward: '$', file: 'DC006_Apple_RAID.html' },
            { name: 'Stargate AI Infrastructure', location: 'Abilene TX + 5 Sites', sector: 'Data Center', capital: '$500B*', velocity: 88, status: 'Operational Sept 25', rating: 'EXECUTING', phase: 'Ahead of Schedule', chipsAward: '$', file: 'DC003_Oracle_Stargate_RAID.html' },
            { name: 'Meta AI Infrastructure', location: 'LA/OH/WI/KC', sector: 'Data Center', capital: '$65-72B (2025)', velocity: 78, status: 'Executing', rating: 'ON TRACK', phase: 'Titan Clusters', chipsAward: '$', file: 'DC001_Meta_Hyperion_RAID.html' },
            { name: 'Amazon AWS Expansion', location: 'PA/NC/IN/MS', sector: 'Data Center', capital: '$100B (2025)', velocity: 82, status: 'Executing', rating: 'EXECUTING', phase: '$30B+ Announced', chipsAward: '$', file: 'DC004_Amazon_AWS_RAID.html' },
            { name: 'Google AI Infrastructure', location: 'PJM Region + VA/IN', sector: 'Data Center', capital: '$75B (2025)', velocity: 85, status: 'Executing', rating: 'EXECUTING', phase: '$85B Capex', chipsAward: '$', file: 'DC002_Google_AI_RAID.html' },
            { name: 'Microsoft AI Infrastructure', location: 'Multiple + TMI Nuclear', sector: 'Data Center', capital: '$80B (FY25)', velocity: 65, status: 'Mixed Progress', rating: 'MONITORING', phase: 'Some Paused', chipsAward: '$', file: 'DC005_Microsoft_AI_RAID.html' },
            { name: 'CoreWeave Denton', location: 'Denton, TX', sector: 'Data Center', capital: '$6.1B', velocity: 72, status: 'Minor Delays', rating: 'ON TRACK', phase: '60+ Days Behind', chipsAward: '$', file: 'DC007_CoreWeave_Denton_RAID.html' },
            
            // BATTERY (12 projects - Updated Jan 3, 2026)
            { name: 'SK Battery Georgia', location: 'Commerce, GA', sector: 'Battery', capital: '$2.6B', velocity: 88, status: 'Operational 2022', rating: 'EXECUTING', phase: '22 GWh Producing', chipsAward: 'IRA', file: 'BT002_SK_Battery_Georgia_RAID.html' },
            { name: 'LG Energy Michigan', location: 'Holland, MI', sector: 'Battery', capital: '$1.7B', velocity: 80, status: 'Operational', rating: 'ON TRACK', phase: 'LFP ESS Producing', chipsAward: 'IRA', file: 'BT003_LG_Energy_Georgia_RAID.html' },
            { name: 'Honda LG Ohio', location: 'Fayette County, OH', sector: 'Battery', capital: '$4.4B', velocity: 75, status: 'Near Complete', rating: 'ON TRACK', phase: 'Prod 2026', chipsAward: '$', file: 'BT004_Honda_LG_Ohio_RAID.html' },
            { name: 'Hyundai LG Georgia', location: 'Ellabell, GA', sector: 'Battery', capital: '$4.3B', velocity: 72, status: 'Resumed', rating: 'ON TRACK', phase: 'H1 2026 Target', chipsAward: '$', file: 'BT009_Hyundai_LG_Georgia_RAID.html' },
            { name: 'LG Chem Tennessee', location: 'Clarksville, TN', sector: 'Battery', capital: '$3.2B', velocity: 65, status: '~12mo Delay', rating: 'MONITORING', phase: 'Prod 2026', chipsAward: '$', file: 'BT014_LG_Chem_Tennessee_RAID.html' },
            { name: 'StarPlus Kokomo', location: 'Kokomo, IN', sector: 'Battery', capital: '$6.3B', velocity: 75, status: 'Opened Dec 2024', rating: 'ON TRACK', phase: 'Ramp-up Issues', chipsAward: '$7.54B DOE', file: 'BT006_StarPlus_Kokomo_RAID.html' },
            { name: 'AESC Kentucky', location: 'Bowling Green, KY', sector: 'Battery', capital: '$2B', velocity: 38, status: 'Halted', rating: 'DISTRESSED', phase: '12-24mo+ Delay', chipsAward: '$', file: 'BT007_AESC_Kentucky_RAID.html' },
            { name: 'Panasonic Kansas', location: 'De Soto, KS', sector: 'Battery', capital: '$4B', velocity: 78, status: 'Operational', rating: 'EXECUTING', phase: 'Producing', chipsAward: '$', file: 'BT001_Panasonic_Kansas_RAID.html' },
            { name: 'Redwood Materials', location: 'McCarran, NV', sector: 'Battery', capital: '$3.5B', velocity: 45, status: '1-2yr Delay', rating: 'DISTRESSED', phase: 'Cathode Delayed', chipsAward: 'Self-Funded', file: 'BT005_Redwood_Materials_RAID.html' },
            { name: 'Ascend Elements KY', location: 'Hopkinsville, KY', sector: 'Battery', capital: '$1B', velocity: 25, status: '~3yr Delay', rating: 'CRITICAL', phase: 'DOE Grant Returned', chipsAward: 'Cancelled', file: 'BT012_Ascend_Elements_RAID.html' },
            { name: 'BlueOval SK Kentucky', location: 'Glendale, KY', sector: 'Battery', capital: '$5.8B', velocity: 38, status: 'Major Pivot', rating: 'CRITICAL', phase: '1,600 Laid Off', chipsAward: '$9.2B DOE', file: 'BT010_BlueOval_SK_RAID.html' },
            { name: 'Sila Moses Lake', location: 'Moses Lake, WA', sector: 'Battery', capital: '$1.3B+', velocity: 82, status: 'Operational', rating: 'EXECUTING', phase: 'Producing Sept 25', chipsAward: '$100M DOE', file: 'BT011_Sila_Moses_Lake_RAID.html' },
            { name: 'Natron Energy', location: 'Holland, MI', sector: 'Battery', capital: '$0', velocity: 0, status: 'SHUT DOWN', rating: 'TERMINATED', phase: 'Ceased Sept 2025', chipsAward: '$', file: 'BT013_Natron_Energy_RAID.html' },
            
            // AUTOMOTIVE (9 projects) - Updated Jan 3, 2026
            { name: 'Hyundai Metaplant', location: 'Ellabell, GA', sector: 'Automotive', capital: '$7.6B', velocity: 82, status: 'Operational', rating: 'EXECUTING', phase: 'Grand Open Mar 25', chipsAward: '$', file: 'AU008_Hyundai_Metaplant_RAID.html' },
            { name: 'Scout Motors SC', location: 'Blythewood, SC', sector: 'Automotive', capital: '$2.3B', velocity: 65, status: '~12mo Delay', rating: 'MONITORING', phase: 'Late 2027 Target', chipsAward: '$', file: 'AU007_Scout_Motors_RAID.html' },
            { name: 'Toyota NC Battery', location: 'Liberty, NC', sector: 'Automotive', capital: '$13.9B', velocity: 88, status: 'Operational', rating: 'EXECUTING', phase: 'Prod Nov 2025', chipsAward: '$664M NC', file: 'AU009_Toyota_NC_Battery_RAID.html' },
            { name: 'Hyundai Steel Louisiana', location: 'Donaldsonville, LA', sector: 'Steel', capital: '$5.8B', velocity: 82, status: 'Executing', rating: 'AT RISK', phase: '2029 Target', chipsAward: '$', file: 'AU006_Hyundai_Steel_LA_RAID.html' },
            { name: 'GM Factory ZERO', location: 'Detroit, MI', sector: 'Automotive', capital: '$2.2B', velocity: 82, status: 'Operational 2021', rating: 'EXECUTING', phase: 'Producing EVs', chipsAward: '$', file: 'AU002_GM_Factory_ZERO_RAID.html' },
            { name: 'Ford BlueOval MI', location: 'Marshall, MI', sector: 'Battery', capital: '$3B', velocity: 72, status: 'Executing', rating: 'AT RISK', phase: '60% Complete', chipsAward: 'CATL Licensed', file: 'AU001_Ford_BlueOval_RAID.html' },
            { name: 'Ford BlueOval City', location: 'Stanton, TN', sector: 'Gas/Hybrid Mfg', capital: '$5.6B', velocity: 42, status: 'Pivot to Gas', rating: 'CRITICAL', phase: 'EV Scrapped Dec 25', chipsAward: '$', file: 'AU004_Ford_BlueOval_City_RAID.html' },
            { name: 'Rivian Georgia', location: 'Social Circle, GA', sector: 'Automotive', capital: '$6.57B', velocity: 32, status: '4yr Delay', rating: 'CRITICAL', phase: 'Prod 2028 (was 2024)', chipsAward: '$', file: 'AU003_Rivian_Georgia_RAID.html' },
            { name: 'VinFast NC', location: 'Moncure, NC', sector: 'Automotive', capital: '$4B', velocity: 28, status: 'Stalled', rating: 'CRITICAL', phase: 'Delayed to 2028', chipsAward: '$', file: 'AU005_VinFast_NC_RAID.html' },
            
            // PHARMA (3 projects)
            { name: 'Eli Lilly LEAP', location: 'Lebanon, IN', sector: 'Pharma', capital: '$13.5B', velocity: 86, status: 'Executing', rating: 'EXECUTING', phase: 'Foundry Groundbreaking', chipsAward: '$', file: 'PH001_Eli_Lilly_LEAP_RAID.html' },
            { name: 'Novo Nordisk Clayton', location: 'Clayton, NC', sector: 'Pharma', capital: '$4.1B', velocity: 82, status: 'Executing', rating: 'EXECUTING', phase: 'BE&K Construction', chipsAward: '$', file: 'PH002_Novo_Nordisk_RAID.html' },
            { name: 'Amgen Holly Springs', location: 'Holly Springs, NC', sector: 'Pharma', capital: '$1.5B', velocity: 85, status: 'Operational', rating: 'EXECUTING', phase: 'Facility 1 Live Jan 25', chipsAward: '$', file: 'PH003_Amgen_RAID.html' },
            
            // SOLAR (2 projects) - Updated Jan 3, 2026
            { name: 'First Solar US', location: 'OH/AL/LA/SC', sector: 'Solar', capital: '$4.5B', velocity: 92, status: 'Expanding', rating: 'EXECUTING', phase: 'LA Open Jul 25', chipsAward: '$', file: 'SO002_First_Solar_RAID.html' },
            { name: 'Qcells Georgia', location: 'Dalton/Cartersville', sector: 'Solar', capital: '$2.8B', velocity: 82, status: 'Minor Delay', rating: 'ON TRACK', phase: '8.4GW by 2025', chipsAward: '$1.45B DOE', file: 'SO001_Qcells_Georgia_RAID.html' },
            
            // STEEL (2 projects) - Updated Jan 3, 2026
            { name: 'Steel Dynamics Sinton', location: 'Sinton, TX', sector: 'Steel', capital: '$1.9B', velocity: 72, status: 'Ramp Issues', rating: 'MONITORING', phase: '60-75% Capacity', chipsAward: '$', file: 'ST002_Steel_Dynamics_RAID.html' },
            { name: 'Nucor West Virginia', location: 'Apple Grove, WV', sector: 'Steel', capital: '$4.0B', velocity: 48, status: '2-3yr Delay', rating: 'DISTRESSED', phase: 'Mid-Late 2026', chipsAward: '$', file: 'ST001_Nucor_WV_RAID.html' },
            
            // HYDROGEN (2 projects) - Updated Jan 3, 2026
            { name: 'Air Products Louisiana', location: 'Ascension Parish, LA', sector: 'Hydrogen', capital: '$8-9B', velocity: 32, status: 'Spending Halted', rating: 'CRITICAL', phase: '2028-29 (was 2026)', chipsAward: '$', file: 'HY002_Air_Products_RAID.html' },
            { name: 'Plug Power NY', location: 'Rochester, NY', sector: 'Hydrogen', capital: '$125M', velocity: 35, status: 'Financial Crisis', rating: 'DISTRESSED', phase: 'Going Concern', chipsAward: '$1.66B DOE', file: 'HY001_Plug_Power_RAID.html' },
            
            // ENERGY STORAGE (1 project) - Updated Jan 3, 2026
            { name: 'Form Energy WV', location: 'Weirton, WV', sector: 'Energy Storage', capital: '$760M', velocity: 82, status: 'Producing', rating: 'EXECUTING', phase: 'Commercial Prod', chipsAward: '$405M Series F', file: 'ES001_Form_Energy_RAID.html' }
        ];
        
        // Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                const pageId = tab.dataset.page;
                // Skip if it's the Analysis dropdown trigger (no actual page)
                if (pageId === 'analysis') {
                    e.preventDefault();
                    return;
                }
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    tab.classList.add('active');
                    targetPage.classList.add('active');
                    if (pageId === 'markets') renderProjectsTable();
                }
            });
        });
        
        function switchToPage(pageId) {
            const targetPage = document.getElementById(pageId);
            const targetTab = document.querySelector(`[data-page="${pageId}"]`);
            if (targetPage) {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                if (targetTab) targetTab.classList.add('active');
                targetPage.classList.add('active');
                if (pageId === 'markets') renderProjectsTable();
            }
        }
        
        // Projects Table
        function renderProjectsTable() {
            const tbody = document.getElementById('projectsTableBody');
            const searchTerm = document.getElementById('filterSearch').value.toLowerCase();
            const sectorFilter = document.getElementById('filterSector').value;
            const statusFilter = document.getElementById('filterStatus').value;
            
            let filtered = allProjects.filter(p => {
                if (searchTerm && !p.name.toLowerCase().includes(searchTerm) && !p.location.toLowerCase().includes(searchTerm)) return false;
                if (sectorFilter && p.sector !== sectorFilter) return false;
                if (statusFilter && p.status !== statusFilter) return false;
                return true;
            });
            
            tbody.innerHTML = filtered.map(p => {
                let ratingClass = 'rating-hold';
                if (p.rating === 'EXECUTING') ratingClass = 'rating-strong-buy';
                else if (p.rating === 'ON TRACK') ratingClass = 'rating-buy';
                else if (p.rating === 'MONITORING') ratingClass = 'rating-hold';
                else if (p.rating === 'DISTRESSED') ratingClass = 'rating-sell';
                else if (p.rating === 'CRITICAL') ratingClass = 'rating-strong-sell';
                else if (p.rating === 'TERMINATED') ratingClass = 'rating-strong-sell';
                
                return `
                <tr onclick="openProjectModal('${p.file}')">
                    <td><div class="project-name-cell"><span class="project-name">${p.name}</span><span class="project-location">${p.location}</span></div></td>
                    <td>${p.sector}</td>
                    <td>${p.capital}</td>
                    <td class="velocity-cell">${Math.round(p.velocity)}</td>
                    <td><span class="phase-badge">${p.phase}</span></td>
                    <td><span class="status-badge ${p.status === 'On Track' ? 'on-track' : p.status === 'At Risk' ? 'at-risk' : 'distressed'}">${p.status}</span></td>
                    <td><span class="rating-badge ${ratingClass}">${p.rating}</span></td>
                </tr>
            `}).join('');
        }
        
        function filterProjects() {
            renderProjectsTable();
        }
        
        let sortColumn = 'velocity';
        let sortDirection = 'desc';
        function sortProjects(column) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = 'desc';
            }
            
            allProjects.sort((a, b) => {
                let valA = a[column];
                let valB = b[column];
                if (column === 'capital') {
                    valA = parseFloat(valA.replace(/[$B,]/g, ''));
                    valB = parseFloat(valB.replace(/[$B,]/g, ''));
                }
                if (sortDirection === 'asc') {
                    return valA > valB ? 1 : -1;
                } else {
                    return valA < valB ? 1 : -1;
                }
            });
            renderProjectsTable();
        }
        
        // Markets View Toggle
        function showMarketsView(view) {
            document.querySelectorAll('.markets-nav-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('marketsProjects').style.display = view === 'projects' ? 'block' : 'none';
            document.getElementById('marketsCompare').style.display = view === 'compare' ? 'block' : 'none';
            document.getElementById('marketsSectors').style.display = view === 'sectors' ? 'block' : 'none';
            if (view === 'compare') {
                initCompare();
            }
        }
        
        // Stocks Filter - handles both sector and risk filtering
        function filterStocks(filter) {
            document.querySelectorAll('.stocks-filter-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            const rows = document.querySelectorAll('#stocksTableBody tr');
            rows.forEach(row => {
                if (filter === 'all') {
                    row.style.display = '';
                } else if (['semi', 'dc', 'auto', 'pharma', 'energy'].includes(filter)) {
                    // Sector filter
                    row.style.display = row.dataset.sector === filter ? '' : 'none';
                } else {
                    // Risk filter
                    row.style.display = row.dataset.risk === filter ? '' : 'none';
                }
            });
        }
        
        // Sortable stocks table
        let stocksSortCol = 4; // Default sort by % Mkt Cap
        let stocksSortAsc = false; // Default descending
        
        function sortStocksTable(colIndex) {
            const table = document.getElementById('stocksTable');
            const tbody = document.getElementById('stocksTableBody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            
            // Toggle direction if same column
            if (stocksSortCol === colIndex) {
                stocksSortAsc = !stocksSortAsc;
            } else {
                stocksSortCol = colIndex;
                stocksSortAsc = false; // Default descending for new column
            }
            
            // Update header icons
            table.querySelectorAll('th').forEach((th, i) => {
                th.classList.remove('sorted');
                const icon = th.querySelector('.sort-icon');
                if (icon) icon.textContent = '';
            });
            const header = table.querySelectorAll('th')[colIndex];
            header.classList.add('sorted');
            const sortIcon = header.querySelector('.sort-icon');
            if (sortIcon) sortIcon.textContent = stocksSortAsc ? '' : '';
            
            rows.sort((a, b) => {
                let aVal = a.cells[colIndex].textContent.trim();
                let bVal = b.cells[colIndex].textContent.trim();
                
                // Handle numeric values
                if (colIndex === 2 || colIndex === 3) { // Mkt Cap, Exposure
                    aVal = parseFloat(aVal.replace(/[$T,B]/g, '')) * (aVal.includes('T') ? 1000 : 1);
                    bVal = parseFloat(bVal.replace(/[$T,B]/g, '')) * (bVal.includes('T') ? 1000 : 1);
                    if (isNaN(aVal)) aVal = 0;
                    if (isNaN(bVal)) bVal = 0;
                } else if (colIndex === 4) { // % Mkt Cap
                    aVal = parseFloat(aVal.replace('%', '').replace('<', '0.')) || 0;
                    bVal = parseFloat(bVal.replace('%', '').replace('<', '0.')) || 0;
                } else if (colIndex === 5) { // YTD
                    aVal = parseFloat(aVal.replace('%', '').replace('+', '')) || 0;
                    bVal = parseFloat(bVal.replace('%', '').replace('+', '')) || 0;
                } else if (colIndex === 6) { // Risk
                    const riskOrder = {critical: 4, high: 3, medium: 2, low: 1};
                    aVal = riskOrder[aVal.toLowerCase()] || 0;
                    bVal = riskOrder[bVal.toLowerCase()] || 0;
                } else if (colIndex === 7) { // Catalyst - sort by quarter
                    const parseQuarter = (s) => {
                        if (s.includes('Ongoing')) return 9999;
                        const match = s.match(/Q(\d)\s*(\d{4})/);
                        if (match) return parseInt(match[2]) * 10 + parseInt(match[1]);
                        const yearMatch = s.match(/(\d{4})/);
                        if (yearMatch) return parseInt(yearMatch[1]) * 10 + 5;
                        return 9999;
                    };
                    aVal = parseQuarter(aVal);
                    bVal = parseQuarter(bVal);
                }
                
                if (typeof aVal === 'number' && typeof bVal === 'number') {
                    return stocksSortAsc ? aVal - bVal : bVal - aVal;
                }
                return stocksSortAsc ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
            });
            
            rows.forEach(row => tbody.appendChild(row));
        }
        
        // CSV Export Function
        function exportStocksCSV() {
            const table = document.getElementById('stocksTable');
            const rows = table.querySelectorAll('tr');
            let csv = [];
            
            // Headers
            const headers = ['Ticker', 'Company', 'Sector', 'Market Cap', 'Exposure', '% Mkt Cap', 'YTD', 'Risk', 'Next Catalyst', 'Catalyst Event', 'Projects', 'Upside', 'Downside'];
            csv.push(headers.join(','));
            
            // Data rows
            const tbody = document.getElementById('stocksTableBody');
            tbody.querySelectorAll('tr').forEach(row => {
                if (row.style.display === 'none') return; // Skip filtered rows
                const ticker = row.querySelector('.stocks-ticker')?.textContent || '';
                const company = row.querySelector('.stocks-company-sub')?.textContent || '';
                const sector = row.querySelector('.stocks-sector')?.textContent || '';
                const mktcap = row.querySelector('.stocks-mktcap')?.textContent || '';
                const exposure = row.querySelector('.stocks-exposure')?.textContent || '';
                const pct = row.querySelector('.stocks-pct')?.textContent || '';
                const ytd = row.querySelector('.stocks-ytd')?.textContent || '';
                const risk = row.querySelector('.stocks-risk')?.textContent || '';
                const catalystDate = row.querySelector('.stocks-catalyst-date')?.textContent || '';
                const catalystEvent = row.querySelector('.stocks-catalyst-event')?.textContent || '';
                const projects = row.querySelector('.stocks-project-link')?.textContent || '';
                const upside = row.querySelector('.stocks-impact-up')?.textContent?.replace('', '') || '';
                const downside = row.querySelector('.stocks-impact-down')?.textContent?.replace('', '') || '';
                
                const rowData = [ticker, `"${company}"`, sector, mktcap, exposure, pct, ytd, risk, catalystDate, `"${catalystEvent}"`, `"${projects}"`, upside, downside];
                csv.push(rowData.join(','));
            });
            
            // Download
            const blob = new Blob([csv.join('\\n')], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nxt_shareholder_impact_' + new Date().toISOString().split('T')[0] + '.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // Risk View Toggle
        function showRiskView(view) {
            document.querySelectorAll('.risk-nav-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('riskWarnings').style.display = view === 'warnings' ? 'block' : 'none';
            document.getElementById('riskPolicy').style.display = view === 'policy' ? 'block' : 'none';
            document.getElementById('riskInfrastructure').style.display = view === 'infrastructure' ? 'block' : 'none';
        }
        
        // Modal Functions
        let currentModalProject = null;
        
        function openProjectModal(file) {
            // Find project data
            const project = allProjects.find(p => p.file === file);
            currentModalProject = project;
            
            if (project) {
                // Show summary view
                toggleModalView('summary');
                
                // Set title
                document.getElementById('modalTitle').textContent = project.name;
                
                // Populate preview - all values in electric yellow
                const velocityEl = document.getElementById('previewVelocity');
                velocityEl.textContent = Math.round(project.velocity);
                velocityEl.style.color = '#FDFF66';
                
                const statusEl = document.getElementById('previewStatus');
                statusEl.textContent = project.status;
                statusEl.style.color = '#FDFF66';
                
                const ratingEl = document.getElementById('previewRating');
                ratingEl.textContent = project.rating;
                ratingEl.style.color = '#FDFF66';
                
                document.getElementById('previewLocation').textContent = project.location;
                document.getElementById('previewSector').textContent = project.sector;
                document.getElementById('previewCapital').textContent = project.capital;
                document.getElementById('previewFile').textContent = file;
            } else {
                // Fallback for sector dashboards - go straight to full view
                toggleModalView('full');
                document.getElementById('modalTitle').textContent = file.replace(/_/g, ' ').replace('.html', '').replace(/^[A-Z]+\d+\s/, '');
                loadIframe(file);
            }
            
            document.getElementById('projectModal').classList.add('active');
        }
        
        function toggleModalView(view) {
            const summaryView = document.getElementById('projectSummaryView');
            const fullView = document.getElementById('projectFullView');
            const summaryBtn = document.getElementById('modalViewSummary');
            const fullBtn = document.getElementById('modalViewFull');
            
            if (view === 'summary') {
                summaryView.style.display = 'block';
                fullView.style.display = 'none';
                summaryBtn.style.background = '#1e1b4b';
                summaryBtn.style.color = 'white';
                fullBtn.style.background = 'white';
                fullBtn.style.color = '#1e1b4b';
                // Clear iframe when switching to summary
                document.getElementById('projectIframe').src = '';
            } else {
                summaryView.style.display = 'none';
                fullView.style.display = 'block';
                fullBtn.style.background = '#1e1b4b';
                fullBtn.style.color = 'white';
                summaryBtn.style.background = 'white';
                summaryBtn.style.color = '#1e1b4b';
                // Load iframe
                if (currentModalProject) {
                    loadIframe(currentModalProject.file);
                }
            }
        }
        
        function loadIframe(file) {
            const iframe = document.getElementById('projectIframe');
            const loading = document.getElementById('iframeLoading');
            const error = document.getElementById('iframeError');
            
            loading.style.display = 'flex';
            iframe.style.display = 'none';
            error.style.display = 'none';
            
            iframe.src = file;
            
            // Set a timeout to show error if iframe doesn't load
            setTimeout(() => {
                if (loading.style.display !== 'none') {
                    loading.style.display = 'none';
                    error.style.display = 'block';
                }
            }, 5000);
        }
        
        function onIframeLoad() {
            const iframe = document.getElementById('projectIframe');
            const loading = document.getElementById('iframeLoading');
            const error = document.getElementById('iframeError');
            
            // Check if iframe actually loaded content
            try {
                // This will throw if cross-origin or blocked
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (doc && doc.body && doc.body.innerHTML.length > 100) {
                    loading.style.display = 'none';
                    iframe.style.display = 'block';
                    error.style.display = 'none';
                } else {
                    throw new Error('Empty content');
                }
            } catch (e) {
                loading.style.display = 'none';
                iframe.style.display = 'none';
                error.style.display = 'block';
            }
        }
        
        function onIframeError() {
            document.getElementById('iframeLoading').style.display = 'none';
            document.getElementById('projectIframe').style.display = 'none';
            document.getElementById('iframeError').style.display = 'block';
        }
        
        function closeProjectModal() {
            document.getElementById('projectModal').classList.remove('active');
            document.getElementById('projectIframe').src = '';
            currentModalProject = null;
            // Reset to summary view for next open
            toggleModalView('summary');
        }
        
        function addToWatchlistFromModal() {
            if (currentModalProject) {
                const watchlist = Preferences.get('watchlist') || [];
                if (!watchlist.includes(currentModalProject.file)) {
                    watchlist.push(currentModalProject.file);
                    Preferences.set('watchlist', watchlist);
                    showNotification('Added to Watchlist', currentModalProject.name + ' has been added to your watchlist.', 'success');
                } else {
                    showNotification('Already in Watchlist', currentModalProject.name + ' is already in your watchlist.', 'info');
                }
            }
        }
        
        function openSectorModal(file) {
            currentModalProject = null;
            document.getElementById('modalTitle').textContent = file.replace('MACRO_', '').replace('.html', '') + ' Sector Dashboard';
            toggleModalView('full');
            loadIframe(file);
            document.getElementById('projectModal').classList.add('active');
        }
        
        // Close modal on background click
        document.getElementById('projectModal').addEventListener('click', function(e) {
            if (e.target === this) closeProjectModal();
        });
        
        // Escape key closes modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeProjectModal();
        });
        
        // Toggle Methodology Section
        function toggleMethodology() {
            // First switch to Tools page
            switchToPage('tools');
            // Then scroll to methodology section
            setTimeout(() => {
                const section = document.getElementById('methodologySection');
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }
        
        // Subscribe Modal
        function openSubscribeModal() {
            document.getElementById('subscribeModal').classList.add('active');
        }
        
        function closeSubscribeModal() {
            document.getElementById('subscribeModal').classList.remove('active');
        }
        
        function submitSubscription() {
            const email = document.getElementById('subscribeEmail').value;
            if (email) {
                closeSubscribeModal();
                showNotification('Success! You are now subscribed to alerts.', 'success');
            } else {
                showNotification('Please enter your email address.', 'error');
            }
        }
        
        // Tag selection toggle
        document.querySelectorAll('.tag-option').forEach(tag => {
            tag.addEventListener('click', function() {
                this.classList.toggle('selected');
            });
        });
        
        // Alerts Panel
        function openAlertsPanel() {
            document.getElementById('alertsPanel').classList.add('active');
        }
        
        function closeAlertsPanel() {
            document.getElementById('alertsPanel').classList.remove('active');
        }
        
        // Alert filter buttons
        document.querySelectorAll('.alert-filter').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.alert-filter').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // Share Modal
        function openShareModal() {
            document.getElementById('shareModal').classList.add('active');
        }
        
        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('active');
        }
        
        function copyShareLink() {
            navigator.clipboard.writeText(window.location.href);
            closeShareModal();
            showNotification('Link copied to clipboard!', 'success');
        }
        
        function emailReport() {
            closeShareModal();
            openSubscribeModal();
        }
        
        function scheduleReport() {
            closeShareModal();
            showNotification('Scheduled reports coming soon!', 'info');
        }
        
        // Download Functions
        function downloadWeeklyBrief() {
            const modal = document.getElementById('downloadModal');
            const bar = document.getElementById('downloadBarFill');
            const text = document.getElementById('downloadText');
            
            modal.classList.add('active');
            bar.style.width = '0%';
            text.textContent = 'Generating PDF...';
            
            // Simulate download progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    text.textContent = 'Download complete!';
                    setTimeout(() => {
                        modal.classList.remove('active');
                        showNotification('Weekly Brief downloaded successfully!', 'success');
                    }, 500);
                }
                bar.style.width = progress + '%';
                
                if (progress > 30 && progress < 60) {
                    text.textContent = 'Compiling data...';
                } else if (progress >= 60 && progress < 90) {
                    text.textContent = 'Generating charts...';
                } else if (progress >= 90) {
                    text.textContent = 'Finalizing...';
                }
            }, 200);
        }
        
        function exportToPowerPoint() {
            const modal = document.getElementById('downloadModal');
            const bar = document.getElementById('downloadBarFill');
            const text = document.getElementById('downloadText');
            
            modal.classList.add('active');
            bar.style.width = '0%';
            text.textContent = 'Creating PowerPoint...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 12;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    text.textContent = 'Export complete!';
                    setTimeout(() => {
                        modal.classList.remove('active');
                        showNotification('PowerPoint exported successfully!', 'success');
                    }, 500);
                }
                bar.style.width = progress + '%';
                
                if (progress > 25 && progress < 50) {
                    text.textContent = 'Building slides...';
                } else if (progress >= 50 && progress < 75) {
                    text.textContent = 'Adding charts...';
                } else if (progress >= 75) {
                    text.textContent = 'Applying theme...';
                }
            }, 250);
        }
        
        // Notification System
        function showNotification(message, type) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.innerHTML = `
                <span class="notification-icon">${type === 'success' ? '' : type === 'error' ? '' : ''}</span>
                <span class="notification-message">${message}</span>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 10);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Close modals on escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeProjectModal();
                closeSubscribeModal();
                closeShareModal();
                closeAlertsPanel();
                document.getElementById('downloadModal').classList.remove('active');
            }
        });
        
        // Close modals on overlay click
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
        
        // API Functions
        function copyApiExample() {
            const code = document.querySelector('.api-code code').textContent;
            navigator.clipboard.writeText(code);
            showNotification('API example copied to clipboard!', 'success');
        }
        
        function requestApiAccess() {
            showNotification('API access request submitted. Our team will contact you within 24 hours.', 'success');
        }
        
        // Advanced Feature Functions
        function openScenarioModal() {
            showNotification('Scenario Modeling launching soon. Join the waitlist!', 'info');
        }
        
        function openEarningsCalendar() {
            // Create and show earnings calendar modal
            const calendarHTML = `
                <div class="modal-overlay active" id="earningsModal" onclick="if(event.target===this) this.remove()">
                    <div class="modal-content modal-medium">
                        <div class="modal-header">
                            <div class="modal-title">Earnings Calendar</div>
                            <button class="modal-close" onclick="document.getElementById('earningsModal').remove()"></button>
                        </div>
                        <div class="modal-body-content">
                            <div class="earnings-calendar">
                                <div class="calendar-month">
                                    <h4 class="calendar-month-title">January 2025</h4>
                                    <div class="earnings-list">
                                        <div class="earnings-item">
                                            <div class="earnings-date">Jan 15</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">TSM</span>
                                                <span class="earnings-event">Q4 Earnings Call</span>
                                            </div>
                                            <span class="earnings-tag high">High Impact</span>
                                        </div>
                                        <div class="earnings-item">
                                            <div class="earnings-date">Jan 23</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">INTC</span>
                                                <span class="earnings-event">Q4 Earnings + Ohio Update</span>
                                            </div>
                                            <span class="earnings-tag critical">Critical</span>
                                        </div>
                                        <div class="earnings-item">
                                            <div class="earnings-date">Jan 28</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">TXN</span>
                                                <span class="earnings-event">Q4 Earnings Call</span>
                                            </div>
                                            <span class="earnings-tag medium">Medium</span>
                                        </div>
                                        <div class="earnings-item">
                                            <div class="earnings-date">Jan 29</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">F</span>
                                                <span class="earnings-event">Q4 Earnings + EV Update</span>
                                            </div>
                                            <span class="earnings-tag high">High Impact</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-month">
                                    <h4 class="calendar-month-title">February 2025</h4>
                                    <div class="earnings-list">
                                        <div class="earnings-item">
                                            <div class="earnings-date">Feb 5</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">LLY</span>
                                                <span class="earnings-event">Q4 Earnings + LEAP Progress</span>
                                            </div>
                                            <span class="earnings-tag medium">Medium</span>
                                        </div>
                                        <div class="earnings-item">
                                            <div class="earnings-date">Feb 12</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">ORCL</span>
                                                <span class="earnings-event">Q3 Earnings + Stargate Update</span>
                                            </div>
                                            <span class="earnings-tag high">High Impact</span>
                                        </div>
                                        <div class="earnings-item">
                                            <div class="earnings-date">Feb 26</div>
                                            <div class="earnings-info">
                                                <span class="earnings-company">NVDA</span>
                                                <span class="earnings-event">Q4 Earnings Call</span>
                                            </div>
                                            <span class="earnings-tag high">High Impact</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 1.5rem;">
                                <button onclick="openSubscribeModal(); document.getElementById('earningsModal').remove();" class="submit-btn" style="width: auto; padding: 0.75rem 2rem;">Get Earnings Alerts</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', calendarHTML);
        }
        
        function openPeerBenchmark() {
            showNotification('Peer Benchmarking tool coming in Q1 2025!', 'info');
        }
        
        function openAISummary() {
            // Create and show AI summary modal
            const summaryHTML = `
                <div class="modal-overlay active" id="aiSummaryModal" onclick="if(event.target===this) this.remove()">
                    <div class="modal-content modal-medium">
                        <div class="modal-header">
                            <div class="modal-title">AI Weekly Summary</div>
                            <button class="modal-close" onclick="document.getElementById('aiSummaryModal').remove()"></button>
                        </div>
                        <div class="modal-body-content">
                            <div class="ai-summary-header">
                                <span class="ai-summary-date">Week of January 3, 2026</span>
                                <span class="ai-summary-badge">AI Generated</span>
                            </div>
                            <div class="ai-summary-content">
                                <h4 class="ai-summary-section">Executive Summary</h4>
                                <p class="ai-summary-text">Portfolio tracks 50 projects representing $1.4T in committed capital. 42% of projects are executing on schedule (21), 18% on track with minor delays (9), 8% requiring monitoring (4), 16% distressed with 1-2 year delays (8), 14% critical with 3+ year delays (7), and 1 terminated. Of the 50 projects, 20 (40%) are at risk or worse based on deviation from original announcement dates.</p>
                                
                                <h4 class="ai-summary-section">Key Developments</h4>
                                <ul class="ai-summary-list">
                                    <li><strong>Natron Energy (TERMINATED):</strong> Sodium-ion battery pioneer ceased all operations September 3, 2025. $1.4B Rocky Mount gigafactory cancelled. First portfolio failure in 16 months of tracking.</li>
                                    <li><strong>Hyundai Steel Louisiana:</strong> $5.8B integrated steel mill announced March 2025 at White House. Posco took 20% stake ($582M) in December. Construction starts Q1-Q3 2026.</li>
                                    <li><strong>LG Chem Tennessee:</strong> Phase 1 construction COMPLETE per JE Dunn. Production commencing 2H 2025 to early 2026. Largest FDI in Tennessee history.</li>
                                    <li><strong>Polar Semiconductor:</strong> First company to finalize commercial CHIPS award ($123M). Now U.S.-owned. Doubling production capacity.</li>
                                </ul>
                                
                                <h4 class="ai-summary-section">Outlook</h4>
                                <p class="ai-summary-text">Watch Intel Ohio CHIPS milestone review and Samsung Taylor strategic decision. Applied Materials proceeds with private investment after August 2024 CHIPS denial. Pharma sector continues flawless execution with Eli Lilly, Novo Nordisk, and Amgen all on track. Battery sector shows bifurcation between successful JV plants and struggling independent manufacturers.</p>
                            </div>
                            <div class="ai-summary-actions">
                                <button onclick="downloadWeeklyBrief(); document.getElementById('aiSummaryModal').remove();" class="action-btn primary">Download Full Brief</button>
                                <button onclick="openSubscribeModal(); document.getElementById('aiSummaryModal').remove();" class="action-btn secondary">Get Weekly Updates</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', summaryHTML);
        }
        
        function joinWaitlist() {
            openSubscribeModal();
        }
        
        function openCompareModal() {
            showNotification('Select projects from the Markets view to compare them.', 'info');
            switchToPage('markets');
        }
        
        // Watchlist Functions
        function showAddToWatchlistModal() {
            showNotification('Browse projects in the Markets view and click "Add to Watchlist" to track them.', 'info');
            switchToPage('markets');
        }
        
        function removeFromWatchlist(projectName) {
            showNotification(projectName + ' removed from watchlist.', 'success');
            // In a real app, this would update the watchlist state
        }
        
        function exportWatchlist() {
            downloadWeeklyBrief();
        }
        
        // Login Modal Functions
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
        }
        
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.auth-tab:${tab === 'login' ? 'first-child' : 'last-child'}`).classList.add('active');
            document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = tab === 'register' ? 'block' : 'none';
        }
        
        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showNotification('Please enter email and password.', 'error');
                return;
            }
            
            AuthManager.login(email, password);
        }
        
        function handleRegister() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const company = document.getElementById('registerCompany').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!name || !email || !password) {
                showNotification('Please fill in all required fields.', 'error');
                return;
            }
            
            AuthManager.register({ name, email, company, password });
        }
        
        function socialLogin(provider) {
            showNotification('Social login with ' + provider + ' coming soon!', 'info');
        }
        
        // User Dropdown
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.toggle('active');
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const userSection = document.getElementById('userSection');
            const dropdown = document.getElementById('userDropdown');
            if (userSection && dropdown && !userSection.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });
        
        // Preferences Modal
        function openPreferencesModal() {
            document.getElementById('preferencesModal').classList.add('active');
            loadPreferencesUI();
        }
        
        function closePreferencesModal() {
            document.getElementById('preferencesModal').classList.remove('active');
        }
        
        function loadPreferencesUI() {
            const prefs = Preferences.getAll();
            document.getElementById('prefCompactView').checked = prefs.compactView;
            document.getElementById('prefChartAnimations').checked = prefs.chartAnimations;
            document.getElementById('prefDefaultPage').value = prefs.defaultPage;
            document.getElementById('prefAutoRefresh').checked = prefs.autoRefresh;
            document.getElementById('prefRefreshInterval').value = prefs.refreshInterval;
            document.getElementById('prefTablePageSize').value = prefs.tablePageSize;
            document.getElementById('prefAlertsEnabled').checked = prefs.alertsEnabled;
            document.getElementById('prefEmailDigest').value = prefs.emailDigest;
        }
        
        function openWatchlistManager() {
            closeUserDropdown();
            switchToPage('markets');
            setTimeout(() => showMarketsView('stocks'), 100);
        }
        
        function closeUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) dropdown.classList.remove('active');
        }
        
        function openApiKeysModal() {
            closeUserDropdown();
            switchToPage('tools');
            showNotification('API keys available in the API Access section below.', 'info');
        }
        
        // Initialize KPI Sparklines - disabled (charts removed)
        function initKPISparklines() {
            // Charts disabled to prevent script errors
        }
        
        // App Initialization
        function initApp() {
            // Initialize authentication
            AuthManager.init();
            
            // Apply saved preferences
            Preferences.applyAll();
            
            // Connect to live data feed
            liveFeed.connect();
            
            // Initialize mobile app features
            MobileApp.init();
            
            // Charts disabled - skip chart initialization
            // initializeCharts();
            // initKPISparklines();
            
            // Populate projects table
            renderProjectsTable();
            
            // Setup accessibility features
            setupAccessibility();
            
            // Announce page ready to screen readers
            announceToScreenReader('HCC Velocity Dashboard loaded. Portfolio velocity is 66.');
        }
        
        // Accessibility Setup
        function setupAccessibility() {
            // Create screen reader announcer
            if (!document.getElementById('srAnnouncer')) {
                const announcer = document.createElement('div');
                announcer.id = 'srAnnouncer';
                announcer.setAttribute('role', 'status');
                announcer.setAttribute('aria-live', 'polite');
                announcer.setAttribute('aria-atomic', 'true');
                announcer.className = 'sr-only';
                document.body.appendChild(announcer);
            }
            
            // Add skip link functionality
            const skipLink = document.querySelector('.skip-link');
            if (skipLink) {
                skipLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.getElementById('main-content');
                    if (target) {
                        target.setAttribute('tabindex', '-1');
                        target.focus();
                    }
                });
            }
            
            // Handle escape key for modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAllModals();
                }
            });
            
            // Trap focus in active modals
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('keydown', function(e) {
                    if (e.key === 'Tab') {
                        trapFocus(modal, e);
                    }
                });
            });
            
            // Add ARIA attributes to dynamic content
            document.querySelectorAll('[data-velocity]').forEach(el => {
                const velocity = el.getAttribute('data-velocity');
                el.setAttribute('aria-label', `Velocity score: ${velocity}`);
            });
            
            // Respect reduced motion preference
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.body.classList.add('reduce-motion');
            }
        }
        
        // Screen reader announcement
        function announceToScreenReader(message) {
            const announcer = document.getElementById('srAnnouncer');
            if (announcer) {
                announcer.textContent = '';
                setTimeout(() => {
                    announcer.textContent = message;
                }, 100);
            }
        }
        
        // Focus trap for modals
        function trapFocus(modal, e) {
            const focusableElements = modal.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            if (e.shiftKey && document.activeElement === firstElement) {
                e.preventDefault();
                lastElement.focus();
            } else if (!e.shiftKey && document.activeElement === lastElement) {
                e.preventDefault();
                firstElement.focus();
            }
        }
        
        // Close all modals
        function closeAllModals() {
            document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                modal.classList.remove('active');
            });
            document.getElementById('alertsPanel')?.classList.remove('active');
        }
        
        // Run on DOM ready
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Ticker Functions
        function addTicker() {
            const input = document.getElementById('tickerInput');
            const ticker = input.value.toUpperCase().trim();
            if (ticker) {
                // Add ticker logic here
                input.value = '';
            }
        }
        
        function removeTicker(ticker) {
            // Remove ticker logic here
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderProjectsTable();
            // Charts and animations disabled - using static values
            initScrollReveal();
        });
        
        
        // Scroll Reveal Animation
        function initScrollReveal() {
            const revealElements = document.querySelectorAll('.summary-card, .sector-card, .critical-section, .movers-card');
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('reveal', 'visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
            
            revealElements.forEach(function(el) {
                el.classList.add('reveal');
                observer.observe(el);
            });
        }
        
        // Compare Tool Functions - Data verified December 2025
                const compareProjects = [
            // SEMICONDUCTOR
            { id: 'SE009', name: 'Texas Instruments Sherman', sector: 'Semiconductor', score: 95, investment: '$40B', originalTarget: '2025', currentTarget: '2025', phase: 'Production', chipsAward: '$1.6B', jobsTarget: '3000', riskLevel: 'Low', color: '#6366f1' },
            { id: 'SE010', name: 'Micron Idaho', sector: 'Semiconductor', score: 87, investment: '$15B', originalTarget: '2025', currentTarget: '2025', phase: 'Construction', chipsAward: '$2.0B', jobsTarget: '2000', riskLevel: 'Low', color: '#6366f1' },
            { id: 'SE008', name: 'Micron New York', sector: 'Semiconductor', score: 62, investment: '$100B', originalTarget: '2028', currentTarget: '2030', phase: 'Site Prep', chipsAward: '$3.4B', jobsTarget: '9000', riskLevel: 'Medium', color: '#6366f1' },
            { id: 'SE001', name: 'TSMC Arizona', sector: 'Semiconductor', score: 85, investment: '$165B', originalTarget: '2024', currentTarget: '2025', phase: 'Fab 1 Online', chipsAward: '$6.6B', jobsTarget: '6000', riskLevel: 'Low', color: '#6366f1' },
            { id: 'SE005', name: 'Applied Materials EPIC', sector: 'Semiconductor', score: 62, investment: '$4B', originalTarget: '2026', currentTarget: '2026', phase: 'Construction', chipsAward: 'Denied', jobsTarget: '2000', riskLevel: 'Medium', color: '#6366f1' },
            { id: 'SE007', name: 'Polar Semiconductor', sector: 'Semiconductor', score: 78, investment: '$525M', originalTarget: '2025', currentTarget: '2026', phase: 'Expanding', chipsAward: '$123M', jobsTarget: '700', riskLevel: 'Low', color: '#6366f1' },
            { id: 'SE004', name: 'GlobalFoundries Malta', sector: 'Semiconductor', score: 72, investment: '$12B', originalTarget: '2025', currentTarget: '2025', phase: 'Construction', chipsAward: '$1.5B', jobsTarget: '1500', riskLevel: 'Medium', color: '#6366f1' },
            { id: 'SE002', name: 'Intel Ohio', sector: 'Semiconductor', score: 38, investment: '$28B', originalTarget: '2025', currentTarget: '2027', phase: 'Delayed', chipsAward: '$7.86B', jobsTarget: '3000', riskLevel: 'High', color: '#6366f1' },
            { id: 'SE003', name: 'Samsung Taylor', sector: 'Semiconductor', score: 45, investment: '$44B', originalTarget: '2024', currentTarget: '2026+', phase: 'Paused', chipsAward: '$6.4B', jobsTarget: '2000', riskLevel: 'High', color: '#6366f1' },
            { id: 'SE006', name: 'Wolfspeed NC', sector: 'Semiconductor', score: 28, investment: '$5B', originalTarget: '2024', currentTarget: 'TBD', phase: 'Ch.11', chipsAward: '$', jobsTarget: '1800', riskLevel: 'Critical', color: '#6366f1' },
            // DATA CENTER
            { id: 'DC006', name: 'Apple Data Centers', sector: 'Data Center', score: 85, investment: '$600B 4-yr', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'Major Expansion', chipsAward: '$', jobsTarget: '', riskLevel: 'Low', color: '#3b82f6' },
            { id: 'DC004', name: 'Amazon AWS Expansion', sector: 'Data Center', score: 74, investment: '$150B', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'Expansion', chipsAward: '$', jobsTarget: '', riskLevel: 'Low', color: '#3b82f6' },
            { id: 'DC001', name: 'Meta AI Infrastructure', sector: 'Data Center', score: 71, investment: '$65B', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'Expansion', chipsAward: '$', jobsTarget: '', riskLevel: 'Low', color: '#3b82f6' },
            { id: 'DC002', name: 'Google AI Infrastructure', sector: 'Data Center', score: 71, investment: '$75B', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'Expansion', chipsAward: '$', jobsTarget: '', riskLevel: 'Low', color: '#3b82f6' },
            { id: 'DC005', name: 'Microsoft AI Infrastructure', sector: 'Data Center', score: 68, investment: '$80B', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'Expansion', chipsAward: '$', jobsTarget: '', riskLevel: 'Low', color: '#3b82f6' },
            { id: 'DC003', name: 'Stargate JV', sector: 'Data Center', score: 52, investment: '$500B*', originalTarget: '2025', currentTarget: '2029', phase: 'Early Build', chipsAward: '$', jobsTarget: '100000+', riskLevel: 'High', color: '#3b82f6' },
            { id: 'DC007', name: 'CoreWeave Denton', sector: 'Data Center', score: 58, investment: '$1.6B', originalTarget: '2024', currentTarget: '2025', phase: 'Construction', chipsAward: '$', jobsTarget: '', riskLevel: 'Medium', color: '#3b82f6' },
            // BATTERY (12 projects)
            { id: 'BT002', name: 'SK Battery Georgia', sector: 'Battery', score: 78, investment: '$2.6B', originalTarget: '2023', currentTarget: '2023', phase: 'Operational', chipsAward: 'IRA', jobsTarget: '2600', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT003', name: 'LG Energy Michigan', sector: 'Battery', score: 80, investment: '$1.7B', originalTarget: '2024', currentTarget: '2025', phase: 'Operational', chipsAward: 'IRA', jobsTarget: '1200', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT004', name: 'Honda LG Ohio', sector: 'Battery', score: 80, investment: '$4.4B', originalTarget: '2025', currentTarget: '2025', phase: 'Near Complete', chipsAward: '$', jobsTarget: '2200', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT009', name: 'Hyundai LG Georgia', sector: 'Battery', score: 55, investment: '$4.3B', originalTarget: '2025', currentTarget: 'H1 2026', phase: 'Recovering', chipsAward: '$', jobsTarget: '1400', riskLevel: 'High', color: '#f59e0b' },
            { id: 'BT014', name: 'LG Chem Tennessee', sector: 'Battery', score: 78, investment: '$3.2B', originalTarget: '2025', currentTarget: '2025', phase: 'Phase 1 Complete', chipsAward: '$', jobsTarget: '860', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT006', name: 'StarPlus Kokomo', sector: 'Battery', score: 82, investment: '$6.3B', originalTarget: '2024', currentTarget: '2025', phase: 'Executing', chipsAward: '$7.54B DOE', jobsTarget: '2800', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT007', name: 'AESC Kentucky', sector: 'Battery', score: 38, investment: '$2B', originalTarget: '2025', currentTarget: 'TBD', phase: 'Stalled', chipsAward: '$', jobsTarget: '2000', riskLevel: 'Critical', color: '#f59e0b' },
            { id: 'BT001', name: 'Panasonic Kansas', sector: 'Battery', score: 78, investment: '$4B', originalTarget: '2024', currentTarget: '2024', phase: 'Operational', chipsAward: '$', jobsTarget: '4000', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT005', name: 'Redwood Materials', sector: 'Battery', score: 75, investment: '$3.5B', originalTarget: '2025', currentTarget: '2025', phase: 'Executing', chipsAward: 'Self-Funded', jobsTarget: '1500', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT012', name: 'Ascend Elements KY', sector: 'Battery', score: 35, investment: '$1B', originalTarget: '2025', currentTarget: 'Q4 2026', phase: 'Paused', chipsAward: 'Cancelled', jobsTarget: '400', riskLevel: 'High', color: '#22c55e' },
            { id: 'BT010', name: 'BlueOval SK Kentucky', sector: 'Battery', score: 38, investment: '$5.8B', originalTarget: '2025', currentTarget: '2027', phase: 'ESS Pivot', chipsAward: '$9.2B DOE', jobsTarget: '2100', riskLevel: 'Critical', color: '#ef4444' },
            { id: 'BT011', name: 'Sila Moses Lake', sector: 'Battery', score: 82, investment: '$1.3B+', originalTarget: '2025', currentTarget: '2025', phase: 'Operational', chipsAward: '$100M DOE', jobsTarget: '500', riskLevel: 'Low', color: '#22c55e' },
            { id: 'BT013', name: 'Natron Energy', sector: 'Battery', score: 0, investment: '$0', originalTarget: '2024', currentTarget: 'CEASED', phase: 'Shut Down', chipsAward: '$', jobsTarget: '0', riskLevel: 'Terminated', color: '#22c55e' },
            // AUTOMOTIVE
            { id: 'AU008', name: 'Hyundai Metaplant', sector: 'Automotive', score: 82, investment: '$7.6B', originalTarget: '2025', currentTarget: '2024', phase: 'Operational', chipsAward: '$', jobsTarget: '8100', riskLevel: 'Low', color: '#f59e0b' },
            { id: 'AU007', name: 'Scout Motors SC', sector: 'Automotive', score: 78, investment: '$2.3B', originalTarget: '2027', currentTarget: '2027', phase: 'On Track', chipsAward: '$', jobsTarget: '4000', riskLevel: 'Low', color: '#f59e0b' },
            { id: 'AU009', name: 'Toyota NC Battery', sector: 'Automotive', score: 88, investment: '$13.9B', originalTarget: '2025', currentTarget: '2025', phase: 'Operational', chipsAward: '$664M NC', jobsTarget: '5100', riskLevel: 'Low', color: '#22c55e' },
            { id: 'AU006', name: 'Hyundai Steel Louisiana', sector: 'Steel', score: 75, investment: '$5.8B', originalTarget: '2029', currentTarget: '2029', phase: 'Pre-Construction', chipsAward: '$', jobsTarget: '5400', riskLevel: 'Low', color: '#f59e0b' },
            { id: 'AU002', name: 'GM Factory ZERO', sector: 'Automotive', score: 45, investment: '$2.2B', originalTarget: '2021', currentTarget: 'Ongoing', phase: 'Downsizing', chipsAward: '$', jobsTarget: '2000', riskLevel: 'Critical', color: '#ef4444' },
            { id: 'AU001', name: 'Ford BlueOval MI', sector: 'Battery', score: 72, investment: '$3B', originalTarget: '2026', currentTarget: '2026', phase: '60% Complete', chipsAward: 'CATL', jobsTarget: '1700', riskLevel: 'Medium', color: '#22c55e' },
            { id: 'AU004', name: 'Ford BlueOval City', sector: 'Automotive', score: 42, investment: '$5.6B', originalTarget: '2025', currentTarget: '2029', phase: 'Pivot to Gas', chipsAward: '$', jobsTarget: '5800', riskLevel: 'Critical', color: '#f59e0b' },
            { id: 'AU003', name: 'Rivian Georgia', sector: 'Automotive', score: 58, investment: '$6.57B', originalTarget: '2024', currentTarget: 'Q1 2026', phase: 'Restarted', chipsAward: '$', jobsTarget: '7500', riskLevel: 'Medium', color: '#f59e0b' },
            { id: 'AU005', name: 'VinFast NC', sector: 'Automotive', score: 28, investment: '$4B', originalTarget: '2024', currentTarget: '2028', phase: 'Stalled', chipsAward: '$', jobsTarget: '7500', riskLevel: 'Critical', color: '#ef4444' },
            // PHARMA
            { id: 'PH001', name: 'Eli Lilly LEAP', sector: 'Pharma', score: 86, investment: '$13.5B', originalTarget: '2026', currentTarget: '2026', phase: 'Groundbreaking', chipsAward: '$', jobsTarget: '1100', riskLevel: 'Low', color: '#ec4899' },
            { id: 'PH002', name: 'Novo Nordisk Clayton', sector: 'Pharma', score: 82, investment: '$4.1B', originalTarget: '2027', currentTarget: '2027', phase: 'Construction', chipsAward: '$', jobsTarget: '1000', riskLevel: 'Low', color: '#ec4899' },
            { id: 'PH003', name: 'Amgen Holly Springs', sector: 'Pharma', score: 85, investment: '$1.5B', originalTarget: '2025', currentTarget: '2025', phase: 'Operational', chipsAward: '$', jobsTarget: '725', riskLevel: 'Low', color: '#ec4899' },
            // SOLAR - Updated Jan 3, 2026
            { id: 'SO002', name: 'First Solar US', sector: 'Solar', score: 92, investment: '$4.5B', originalTarget: 'Ongoing', currentTarget: 'Ongoing', phase: 'LA Open Jul 25', chipsAward: '$', jobsTarget: '5500', riskLevel: 'Low', color: '#14b8a6' },
            { id: 'SO001', name: 'Qcells Georgia', sector: 'Solar', score: 88, investment: '$2.8B', originalTarget: '2024', currentTarget: '2025', phase: 'Full Operations', chipsAward: '$1.45B DOE', jobsTarget: '4000', riskLevel: 'Low', color: '#14b8a6' },
            // STEEL - Updated Jan 3, 2026
            { id: 'ST002', name: 'Steel Dynamics Sinton', sector: 'Steel', score: 88, investment: '$1.9B', originalTarget: '2021', currentTarget: '2022', phase: 'Fully Operational', chipsAward: '$', jobsTarget: '590', riskLevel: 'Low', color: '#64748b' },
            { id: 'ST001', name: 'Nucor West Virginia', sector: 'Steel', score: 79, investment: '$4.0B', originalTarget: '2026', currentTarget: '2027', phase: '60% Complete', chipsAward: '$', jobsTarget: '800', riskLevel: 'Low', color: '#64748b' },
            // HYDROGEN - Updated Jan 3, 2026
            { id: 'HY002', name: 'Air Products Louisiana', sector: 'Hydrogen', score: 58, investment: '$8-9B', originalTarget: '2026', currentTarget: '2028', phase: 'Yara JV', chipsAward: '$', jobsTarget: '170', riskLevel: 'Medium', color: '#06b6d4' },
            { id: 'HY001', name: 'Plug Power NY', sector: 'Hydrogen', score: 32, investment: '$125M', originalTarget: '2023', currentTarget: 'TBD', phase: 'Going Concern', chipsAward: '$1.66B DOE', jobsTarget: '400', riskLevel: 'Critical', color: '#06b6d4' },
            // ENERGY STORAGE - Updated Jan 3, 2026
            { id: 'ES001', name: 'Form Energy WV', sector: 'Energy Storage', score: 82, investment: '$760M', originalTarget: '2024', currentTarget: '2024', phase: 'Producing', chipsAward: '$405M Series F', jobsTarget: '750', riskLevel: 'Low', color: '#8b5cf6' }
        ];
        
        let selectedCompareProjects = [];
        let compareInitialized = false;
        
        function initCompare() {
            if (compareInitialized) return;
            compareInitialized = true;
            renderCompareProjectList();
            
            document.querySelectorAll('.compare-filter-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.compare-filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderCompareProjectList(tab.dataset.filter);
                });
            });
            
            document.getElementById('compareClearBtn').addEventListener('click', () => {
                selectedCompareProjects = [];
                updateCompareUI();
            });
        }
        
        function renderCompareProjectList(filter = 'all') {
            const list = document.getElementById('compareProjectList');
            const filtered = filter === 'all' ? compareProjects : compareProjects.filter(p => p.sector === filter);
            
            list.innerHTML = filtered.map(p => {
                const selectedIndex = selectedCompareProjects.findIndex(s => s.id === p.id);
                let selectedClass = '';
                if (selectedIndex === 0) selectedClass = 'selected';
                else if (selectedIndex === 1) selectedClass = 'selected-2';
                else if (selectedIndex === 2) selectedClass = 'selected-3';
                else if (selectedIndex === 3) selectedClass = 'selected-4';
                
                // Only highlight critical phases
                let phaseClass = '';
                if (['Ch.11', 'Cancelled', 'Stalled', 'Restructuring'].includes(p.phase)) phaseClass = 'phase-critical';
                
                return `
                    <div class="compare-project-item ${selectedClass}" data-id="${p.id}">
                        <div class="compare-project-logo">${p.id.substring(0,2)}</div>
                        <div class="compare-project-info">
                            <div class="compare-project-name">${p.name}</div>
                            <div class="compare-project-sector">${p.sector} | ${p.investment}</div>
                        </div>
                        <div class="compare-project-right">
                            <div class="compare-project-score">${Math.round(p.score)}</div>
                            <div class="compare-project-phase ${phaseClass}">${p.phase}</div>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.querySelectorAll('.compare-project-item').forEach(item => {
                item.addEventListener('click', () => toggleCompareProject(item.dataset.id));
            });
        }
        
        function toggleCompareProject(id) {
            const project = compareProjects.find(p => p.id === id);
            const index = selectedCompareProjects.findIndex(p => p.id === id);
            
            if (index >= 0) {
                selectedCompareProjects.splice(index, 1);
            } else if (selectedCompareProjects.length < 4) {
                selectedCompareProjects.push(project);
            }
            
            updateCompareUI();
        }
        
        function updateCompareUI() {
            document.getElementById('compareSelectedCount').textContent = `${selectedCompareProjects.length} of 4 selected`;
            renderCompareProjectList(document.querySelector('.compare-filter-tab.active').dataset.filter);
            
            if (selectedCompareProjects.length === 0) {
                document.getElementById('compareEmptyState').style.display = 'block';
                document.getElementById('compareChartArea').style.display = 'none';
            } else {
                document.getElementById('compareEmptyState').style.display = 'none';
                document.getElementById('compareChartArea').style.display = 'block';
                updateComparisonChart();
                updateComparisonTable();
            }
        }
        
        function updateComparisonChart() {
            // Update legend with project info - no chart, just selected project summary
            document.getElementById('compareLegend').innerHTML = selectedCompareProjects.map((p, i) => `
                <div class="compare-legend-item">
                    <span class="compare-legend-name">${p.name}</span>
                    <span class="compare-legend-score">${Math.round(p.score)}</span>
                    <span class="compare-legend-phase">${p.phase}</span>
                </div>
            `).join('');
        }
        
        function updateComparisonTable() {
            const thead = document.querySelector('.compare-table thead tr');
            const tbody = document.querySelector('.compare-table tbody');
            
            thead.innerHTML = '<th>Metric</th>' + selectedCompareProjects.map(p => `<th>${p.name}</th>`).join('');
            
            const metrics = [
                { name: 'Velocity Score', key: 'score', format: v => Math.round(v) },
                { name: 'Investment', key: 'investment', format: v => v },
                { name: 'CHIPS Act Award', key: 'chipsAward', format: v => v },
                { name: 'Original Target', key: 'originalTarget', format: v => v },
                { name: 'Current Target', key: 'currentTarget', format: v => v },
                { name: 'Phase', key: 'phase', format: v => v },
                { name: 'Jobs Target', key: 'jobsTarget', format: v => v },
                { name: 'Risk Level', key: 'riskLevel', format: v => v },
                { name: 'Sector', key: 'sector', format: v => v },
            ];
            
            tbody.innerHTML = metrics.map(m => {
                const values = selectedCompareProjects.map(p => {
                    const raw = p[m.key];
                    return { raw, formatted: m.format(raw) };
                });
                
                return `
                    <tr>
                        <td class="compare-metric-name">${m.name}</td>
                        ${values.map((v, i) => {
                            // Only emphasize Critical risk level in Deep Indigo
                            let cls = '';
                            if (m.name === 'Risk Level' && v.formatted === 'Critical') {
                                cls = 'compare-critical-text';
                            }
                            return `<td class="compare-metric-value"><span class="${cls}">${v.formatted}</span></td>`;
                        }).join('')}
                    </tr>
                `;
            }).join('');
        }
    </script>
</body>
</html>
